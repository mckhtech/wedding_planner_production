2025-12-22 06:53:30,510 - app.main - INFO - Directory ready: ./uploads
2025-12-22 06:53:30,510 - app.main - INFO - Directory ready: ./generated
2025-12-22 06:53:30,510 - app.main - INFO - Directory ready: ./template_previews
2025-12-22 06:53:30,510 - app.main - INFO - ğŸš€ Application started successfully
2025-12-22 06:54:35,007 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 06:54:35,068 - app.services.auth_service - INFO - Google token verified for email: vikaspurohit105@gmail.com
2025-12-22 06:54:35,101 - app.services.auth_service - INFO - Existing Google user logged in: vikaspurohit105@gmail.com
2025-12-22 06:54:35,101 - app.services.auth_service - INFO - Access token created for user: vikaspurohit105@gmail.com
2025-12-22 06:55:31,982 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 06:55:32,035 - app.services.auth_service - INFO - Google token verified for email: prishapatel021@gmail.com
2025-12-22 06:55:32,043 - app.services.auth_service - INFO - Existing Google user logged in: prishapatel021@gmail.com
2025-12-22 06:55:32,043 - app.services.auth_service - INFO - Access token created for user: prishapatel021@gmail.com
2025-12-22 06:55:49,389 - app.api.generation - INFO - ğŸ’³ PAID: Using token 38 - Uses remaining: 1/2
2025-12-22 06:55:49,508 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/6222c8a6-7875-4e7f-ae9c-a357d2c39aba.jpg
2025-12-22 06:55:49,509 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6222c8a6-7875-4e7f-ae9c-a357d2c39aba.jpg
2025-12-22 06:55:49,509 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6222c8a6-7875-4e7f-ae9c-a357d2c39aba.jpg
2025-12-22 06:55:49,527 - app.api.generation - INFO - ğŸ”„ Processing generation 89 - Mode: GenerationMode.COUPLE
2025-12-22 06:55:49,550 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 06:55:49,550 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 06:55:49,550 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 06:55:49,551 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 06:55:49,657 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5507 characters
2025-12-22 06:55:49,742 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 06:55:49,742 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 06:56:00,316 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 06:56:00,534 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 06:56:00,536 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/d49c6d1b-f72d-460b-9123-30f4fcb58071.png (size: unknown)
2025-12-22 06:56:00,684 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/f651925d-8475-4c00-b11d-ae85a6ab26ae.png
2025-12-22 06:56:00,684 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 06:56:00,685 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 06:56:00,690 - app.api.generation - INFO - ğŸ’³ Token 38 used. Remaining uses: 0/2
2025-12-22 06:56:00,695 - app.api.generation - INFO - âœ… Generation 89 completed successfully
2025-12-22 06:56:12,180 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 06:56:12,232 - app.services.auth_service - INFO - Google token verified for email: vikaspurohit105@gmail.com
2025-12-22 06:56:12,239 - app.services.auth_service - INFO - Existing Google user logged in: vikaspurohit105@gmail.com
2025-12-22 06:56:12,240 - app.services.auth_service - INFO - Access token created for user: vikaspurohit105@gmail.com
2025-12-22 07:10:30,134 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 07:10:30,189 - app.services.auth_service - INFO - Google token verified for email: vikaspurohit105@gmail.com
2025-12-22 07:10:30,197 - app.services.auth_service - INFO - Existing Google user logged in: vikaspurohit105@gmail.com
2025-12-22 07:10:30,197 - app.services.auth_service - INFO - Access token created for user: vikaspurohit105@gmail.com
2025-12-22 07:44:36,872 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 07:44:36,923 - app.services.auth_service - INFO - Google token verified for email: vikaspurohit105@gmail.com
2025-12-22 07:44:36,931 - app.services.auth_service - INFO - Existing Google user logged in: vikaspurohit105@gmail.com
2025-12-22 07:44:36,932 - app.services.auth_service - INFO - Access token created for user: vikaspurohit105@gmail.com
2025-12-22 07:45:40,925 - app.services.payment_service - INFO - Payment token created: 44 for user 9, template 5 (2 uses)
2025-12-22 07:45:40,925 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 44
2025-12-22 07:45:40,929 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 44 for user 9
2025-12-22 07:45:41,733 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 44
2025-12-22 07:45:41,736 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 44
2025-12-22 07:45:41,736 - app.api.payment - INFO - âœ… Payment verified: Token 44
2025-12-22 07:47:08,525 - app.api.generation - INFO - ğŸ’³ PAID: Using token 44 - Uses remaining: 2/2
2025-12-22 07:47:08,679 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/2f333260-482b-4f19-b8d8-54636d4f5289.jpg
2025-12-22 07:47:08,679 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/2f333260-482b-4f19-b8d8-54636d4f5289.jpg
2025-12-22 07:47:08,679 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/2f333260-482b-4f19-b8d8-54636d4f5289.jpg
2025-12-22 07:47:08,690 - app.api.generation - INFO - ğŸ”„ Processing generation 90 - Mode: GenerationMode.COUPLE
2025-12-22 07:47:08,711 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 07:47:08,711 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 07:47:08,711 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 07:47:08,711 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 07:47:09,086 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5336 characters
2025-12-22 07:47:09,151 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 07:47:09,151 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 07:47:18,086 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 07:47:18,280 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 07:47:18,282 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/a9e4d3ed-dadb-4ea3-9aec-96c944c0efa6.png (size: unknown)
2025-12-22 07:47:18,397 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/5869f7c6-33d2-446e-8bae-b1184fd17a85.png
2025-12-22 07:47:18,398 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 07:47:18,398 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 07:47:18,402 - app.api.generation - INFO - ğŸ’³ Token 44 used. Remaining uses: 1/2
2025-12-22 07:47:18,406 - app.api.generation - INFO - âœ… Generation 90 completed successfully
2025-12-22 07:50:46,570 - app.api.generation - INFO - ğŸ’³ PAID: Using token 44 - Uses remaining: 1/2
2025-12-22 07:50:46,744 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/e6e9f0a2-b905-4836-a39d-7d8755c109dd.jpg
2025-12-22 07:50:46,744 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e6e9f0a2-b905-4836-a39d-7d8755c109dd.jpg
2025-12-22 07:50:46,744 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e6e9f0a2-b905-4836-a39d-7d8755c109dd.jpg
2025-12-22 07:50:46,754 - app.api.generation - INFO - ğŸ”„ Processing generation 91 - Mode: GenerationMode.COUPLE
2025-12-22 07:50:46,776 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 07:50:46,776 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 07:50:46,776 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 07:50:46,776 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 07:50:47,125 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5336 characters
2025-12-22 07:50:47,189 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 07:50:47,189 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 07:50:57,519 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 07:50:57,716 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 07:50:57,718 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/9fb41684-307b-4211-ad21-b855d77a75eb.png (size: unknown)
2025-12-22 07:50:57,831 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/84c20b03-faaf-4732-acac-e27d32f49cb3.png
2025-12-22 07:50:57,831 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 07:50:57,832 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 07:50:57,835 - app.api.generation - INFO - ğŸ’³ Token 44 used. Remaining uses: 0/2
2025-12-22 07:50:57,839 - app.api.generation - INFO - âœ… Generation 91 completed successfully
2025-12-22 08:39:37,273 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 08:39:37,324 - app.services.auth_service - INFO - Google token verified for email: vikaspurohit105@gmail.com
2025-12-22 08:39:37,331 - app.services.auth_service - INFO - Existing Google user logged in: vikaspurohit105@gmail.com
2025-12-22 08:39:37,331 - app.services.auth_service - INFO - Access token created for user: vikaspurohit105@gmail.com
2025-12-22 08:45:24,617 - app.services.auth_service - WARNING - Failed login attempt for user: admin@weddingai.com
2025-12-22 08:45:24,618 - app.database - ERROR - Database session error: 401: Incorrect email or password
2025-12-22 08:45:28,926 - app.services.auth_service - INFO - User authenticated successfully: admin@weddingai.com
2025-12-22 08:45:28,926 - app.services.auth_service - INFO - Access token created for user: admin@weddingai.com
2025-12-22 08:56:20,636 - app.services.payment_service - INFO - Payment token created: 45 for user 9, template 1 (2 uses)
2025-12-22 08:56:20,636 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 45
2025-12-22 08:56:20,639 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 45 for user 9
2025-12-22 08:56:21,488 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 45
2025-12-22 08:56:21,491 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 45
2025-12-22 08:56:21,491 - app.api.payment - INFO - âœ… Payment verified: Token 45
2025-12-22 09:01:30,342 - app.api.generation - INFO - ğŸ’³ PAID: Using token 45 - Uses remaining: 2/2
2025-12-22 09:01:30,512 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/e8204f82-7398-4b5b-bbcf-64d81f982078.jpg
2025-12-22 09:01:30,513 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e8204f82-7398-4b5b-bbcf-64d81f982078.jpg
2025-12-22 09:01:30,513 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e8204f82-7398-4b5b-bbcf-64d81f982078.jpg
2025-12-22 09:01:30,529 - app.api.generation - INFO - ğŸ”„ Processing generation 92 - Mode: GenerationMode.COUPLE
2025-12-22 09:01:30,558 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 09:01:30,558 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 09:01:30,559 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 09:01:30,559 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 09:01:30,926 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5981 characters
2025-12-22 09:01:30,990 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 09:01:30,990 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 09:01:40,304 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 09:01:40,490 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 09:01:40,492 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/8e947e3a-b57e-4bae-8cf2-2881bd89c8ae.png (size: unknown)
2025-12-22 09:01:40,607 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/f9f1a0ab-fe5d-4362-826d-1f6034edee7b.png
2025-12-22 09:01:40,608 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 09:01:40,608 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 09:01:40,611 - app.api.generation - INFO - ğŸ’³ Token 45 used. Remaining uses: 1/2
2025-12-22 09:01:40,616 - app.api.generation - INFO - âœ… Generation 92 completed successfully
2025-12-22 09:20:07,017 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 09:20:07,072 - app.services.auth_service - INFO - Google token verified for email: prishapatel021@gmail.com
2025-12-22 09:20:07,080 - app.services.auth_service - INFO - Existing Google user logged in: prishapatel021@gmail.com
2025-12-22 09:20:07,081 - app.services.auth_service - INFO - Access token created for user: prishapatel021@gmail.com
2025-12-22 10:14:08,979 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 10:14:09,032 - app.services.auth_service - INFO - Google token verified for email: prishapatel021@gmail.com
2025-12-22 10:14:09,040 - app.services.auth_service - INFO - Existing Google user logged in: prishapatel021@gmail.com
2025-12-22 10:14:09,040 - app.services.auth_service - INFO - Access token created for user: prishapatel021@gmail.com
2025-12-22 11:41:01,469 - app.api.generation - INFO - ğŸ’³ PAID: Using token 40 - Uses remaining: 2/2
2025-12-22 11:41:01,615 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/57f07c24-7478-4df7-a1a0-735b44d27800.jpeg
2025-12-22 11:41:01,615 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/57f07c24-7478-4df7-a1a0-735b44d27800.jpeg
2025-12-22 11:41:01,615 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/57f07c24-7478-4df7-a1a0-735b44d27800.jpeg
2025-12-22 11:41:01,633 - app.api.generation - INFO - ğŸ”„ Processing generation 93 - Mode: GenerationMode.COUPLE
2025-12-22 11:41:01,665 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 11:41:01,665 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 11:41:01,665 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 11:41:01,665 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 11:41:01,783 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5127 characters
2025-12-22 11:41:01,876 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 11:41:01,877 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 11:41:09,971 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 11:41:10,160 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 11:41:10,162 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/98f019b0-9ec3-42f3-9d1d-95197bea3d3b.png (size: unknown)
2025-12-22 11:41:10,307 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/e3e976d6-9323-4344-b0cc-5452a4756e2a.png
2025-12-22 11:41:10,308 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 11:41:10,308 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 11:41:10,312 - app.api.generation - INFO - ğŸ’³ Token 40 used. Remaining uses: 1/2
2025-12-22 11:41:10,316 - app.api.generation - INFO - âœ… Generation 93 completed successfully
2025-12-22 11:42:23,181 - app.services.payment_service - INFO - Payment token created: 46 for user 5, template 57 (2 uses)
2025-12-22 11:42:23,181 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 46
2025-12-22 11:42:23,184 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 46 for user 5
2025-12-22 11:42:23,842 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 46
2025-12-22 11:42:23,845 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 46
2025-12-22 11:42:23,845 - app.api.payment - INFO - âœ… Payment verified: Token 46
2025-12-22 11:42:35,044 - app.api.generation - INFO - ğŸ’³ PAID: Using token 46 - Uses remaining: 2/2
2025-12-22 11:42:35,165 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/dea6c35d-445d-48de-bd45-37fe4181302a.jpg
2025-12-22 11:42:35,165 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/dea6c35d-445d-48de-bd45-37fe4181302a.jpg
2025-12-22 11:42:35,165 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/dea6c35d-445d-48de-bd45-37fe4181302a.jpg
2025-12-22 11:42:35,175 - app.api.generation - INFO - ğŸ”„ Processing generation 94 - Mode: GenerationMode.COUPLE
2025-12-22 11:42:35,200 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 11:42:35,200 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 11:42:35,200 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 11:42:35,200 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 11:42:35,301 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 4987 characters
2025-12-22 11:42:35,370 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 11:42:35,370 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 11:42:43,151 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 11:42:43,359 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 11:42:43,361 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/86b2ef8b-1c8e-427a-b5cb-e574fb09dd62.png (size: unknown)
2025-12-22 11:42:43,470 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/4da5dba1-12b8-4c67-84b1-e83e07234d1a.png
2025-12-22 11:42:43,471 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 11:42:43,471 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 11:42:43,475 - app.api.generation - INFO - ğŸ’³ Token 46 used. Remaining uses: 1/2
2025-12-22 11:42:43,479 - app.api.generation - INFO - âœ… Generation 94 completed successfully
2025-12-22 11:59:04,592 - app.services.payment_service - INFO - Payment token created: 47 for user 5, template 54 (2 uses)
2025-12-22 11:59:04,593 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 47
2025-12-22 11:59:04,596 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 47 for user 5
2025-12-22 11:59:05,104 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 47
2025-12-22 11:59:05,107 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 47
2025-12-22 11:59:05,108 - app.api.payment - INFO - âœ… Payment verified: Token 47
2025-12-22 11:59:15,731 - app.api.generation - INFO - ğŸ’³ PAID: Using token 47 - Uses remaining: 2/2
2025-12-22 11:59:15,860 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/110797dd-e53a-433b-8ecf-66a2c0594294.jpg
2025-12-22 11:59:15,860 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/110797dd-e53a-433b-8ecf-66a2c0594294.jpg
2025-12-22 11:59:15,860 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/110797dd-e53a-433b-8ecf-66a2c0594294.jpg
2025-12-22 11:59:15,870 - app.api.generation - INFO - ğŸ”„ Processing generation 95 - Mode: GenerationMode.COUPLE
2025-12-22 11:59:15,890 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 11:59:15,890 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 11:59:15,890 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 11:59:15,890 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 11:59:15,983 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5507 characters
2025-12-22 11:59:16,051 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 11:59:16,051 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 11:59:24,211 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 11:59:24,413 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 11:59:24,415 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/b8e22529-4408-49e8-bf22-647e48ce3f72.png (size: unknown)
2025-12-22 11:59:24,565 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/7359d800-41e1-4d3b-a348-50ed133623a0.png
2025-12-22 11:59:24,566 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 11:59:24,567 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 11:59:24,570 - app.api.generation - INFO - ğŸ’³ Token 47 used. Remaining uses: 1/2
2025-12-22 11:59:24,575 - app.api.generation - INFO - âœ… Generation 95 completed successfully
2025-12-22 12:00:47,890 - app.api.generation - INFO - ğŸ’³ PAID: Using token 43 - Uses remaining: 1/2
2025-12-22 12:00:48,005 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/5eec6150-2e9f-48db-960f-508178de5a8f.jpeg
2025-12-22 12:00:48,005 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/5eec6150-2e9f-48db-960f-508178de5a8f.jpeg
2025-12-22 12:00:48,006 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/5eec6150-2e9f-48db-960f-508178de5a8f.jpeg
2025-12-22 12:00:48,017 - app.api.generation - INFO - ğŸ”„ Processing generation 96 - Mode: GenerationMode.COUPLE
2025-12-22 12:00:48,040 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 12:00:48,040 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 12:00:48,040 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 12:00:48,040 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 12:00:48,133 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5981 characters
2025-12-22 12:00:48,198 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 12:00:48,198 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 12:00:58,805 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 12:00:58,983 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 12:00:58,985 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/59bde7d8-89b2-4130-b28d-fd7d0a78d1a3.png (size: unknown)
2025-12-22 12:00:59,161 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/f15fc748-65cb-4b43-adc9-3d46a175b2e5.png
2025-12-22 12:00:59,162 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 12:00:59,162 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 12:00:59,165 - app.api.generation - INFO - ğŸ’³ Token 43 used. Remaining uses: 0/2
2025-12-22 12:00:59,170 - app.api.generation - INFO - âœ… Generation 96 completed successfully
2025-12-22 12:02:02,578 - app.services.payment_service - INFO - Payment token created: 48 for user 5, template 12 (2 uses)
2025-12-22 12:02:02,578 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 48
2025-12-22 12:02:02,580 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 48 for user 5
2025-12-22 12:02:02,811 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 48
2025-12-22 12:02:02,814 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 48
2025-12-22 12:02:02,814 - app.api.payment - INFO - âœ… Payment verified: Token 48
2025-12-22 12:02:12,424 - app.api.generation - INFO - ğŸ’³ PAID: Using token 48 - Uses remaining: 2/2
2025-12-22 12:02:12,531 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/80e55807-283c-4538-bebb-bf132ec57020.jpg
2025-12-22 12:02:12,531 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/80e55807-283c-4538-bebb-bf132ec57020.jpg
2025-12-22 12:02:12,531 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/80e55807-283c-4538-bebb-bf132ec57020.jpg
2025-12-22 12:02:12,542 - app.api.generation - INFO - ğŸ”„ Processing generation 97 - Mode: GenerationMode.COUPLE
2025-12-22 12:02:12,562 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-22 12:02:12,562 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-22 12:02:12,562 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-22 12:02:12,562 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-22 12:02:12,653 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5301 characters
2025-12-22 12:02:12,717 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-22 12:02:12,717 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-22 12:02:22,707 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-22 12:02:22,893 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-22 12:02:22,894 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/7368fa55-b1a6-4893-8ad3-a6aaf061c4a9.png (size: unknown)
2025-12-22 12:02:23,011 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/67373b6e-d0d6-4a19-8c26-f861c4713a8d.png
2025-12-22 12:02:23,012 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-22 12:02:23,012 - app.api.generation - INFO - âœ… Generation complete!
2025-12-22 12:02:23,016 - app.api.generation - INFO - ğŸ’³ Token 48 used. Remaining uses: 1/2
2025-12-22 12:02:23,020 - app.api.generation - INFO - âœ… Generation 97 completed successfully
2025-12-22 12:12:56,353 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-22 12:12:56,405 - app.services.auth_service - INFO - Google token verified for email: vikaspurohit105@gmail.com
2025-12-22 12:12:56,412 - app.services.auth_service - INFO - Existing Google user logged in: vikaspurohit105@gmail.com
2025-12-22 12:12:56,413 - app.services.auth_service - INFO - Access token created for user: vikaspurohit105@gmail.com
2025-12-23 05:13:19,109 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 05:13:19,162 - app.services.auth_service - INFO - Google token verified for email: vikaspurohit105@gmail.com
2025-12-23 05:13:19,213 - app.services.auth_service - INFO - Existing Google user logged in: vikaspurohit105@gmail.com
2025-12-23 05:13:19,213 - app.services.auth_service - INFO - Access token created for user: vikaspurohit105@gmail.com
2025-12-23 05:14:36,840 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 05:14:36,891 - app.services.auth_service - INFO - Google token verified for email: faiz.equanimoustech@gmail.com
2025-12-23 05:14:36,903 - app.services.auth_service - INFO - New Google user created: faiz.equanimoustech@gmail.com (ID: 28)
2025-12-23 05:14:36,903 - app.services.auth_service - INFO - Access token created for user: faiz.equanimoustech@gmail.com
2025-12-23 05:20:57,828 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 05:20:57,883 - app.services.auth_service - INFO - Google token verified for email: srushtibhadgavkar@gmail.com
2025-12-23 05:20:57,891 - app.services.auth_service - INFO - New Google user created: srushtibhadgavkar@gmail.com (ID: 29)
2025-12-23 05:20:57,892 - app.services.auth_service - INFO - Access token created for user: srushtibhadgavkar@gmail.com
2025-12-23 05:25:45,373 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 29 has 1 credits
2025-12-23 05:25:45,380 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 05:25:45,380 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 05:25:50,697 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 29 has 0 credits
2025-12-23 05:25:50,702 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 05:25:50,703 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 05:26:12,410 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:27:35,974 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:27:48,774 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:29:47,372 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:29:52,472 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:30:19,916 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:31:15,312 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:34:35,205 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:35:30,411 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:36:29,585 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:36:44,915 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:38:49,464 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 05:47:55,550 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 05:47:55,602 - app.services.auth_service - INFO - Google token verified for email: srushtibhadgavkar@gmail.com
2025-12-23 05:47:55,608 - app.services.auth_service - INFO - Existing Google user logged in: srushtibhadgavkar@gmail.com
2025-12-23 05:47:55,608 - app.services.auth_service - INFO - Access token created for user: srushtibhadgavkar@gmail.com
2025-12-23 06:08:21,616 - app.api.generation - INFO - ğŸ’³ PAID: Using token 48 - Uses remaining: 1/2
2025-12-23 06:08:21,716 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/7dbbcd91-2430-4da1-93de-fd323f20cbfe.jpg
2025-12-23 06:08:21,717 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7dbbcd91-2430-4da1-93de-fd323f20cbfe.jpg
2025-12-23 06:08:21,717 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7dbbcd91-2430-4da1-93de-fd323f20cbfe.jpg
2025-12-23 06:08:21,755 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/b4cc782c-cd9e-48a4-b9ea-2c2a88327966.jpg
2025-12-23 06:08:21,755 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/b4cc782c-cd9e-48a4-b9ea-2c2a88327966.jpg
2025-12-23 06:08:21,755 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/b4cc782c-cd9e-48a4-b9ea-2c2a88327966.jpg
2025-12-23 06:08:21,755 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:08:21,768 - app.api.generation - INFO - ğŸ”„ Processing generation 98 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:08:21,804 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:08:21,804 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:08:21,804 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:08:21,804 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:08:21,999 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5578 characters
2025-12-23 06:08:22,063 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:08:22,063 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:08:31,667 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:08:31,871 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:08:31,873 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/cdca82be-0ed0-4971-a6f4-c1421b64c778.png (size: unknown)
2025-12-23 06:08:32,016 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/4d9597ae-6533-457f-b98e-6310616466d0.png
2025-12-23 06:08:32,017 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:08:32,017 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:08:32,020 - app.api.generation - INFO - ğŸ’³ Token 48 used. Remaining uses: 0/2
2025-12-23 06:08:32,025 - app.api.generation - INFO - âœ… Generation 98 completed successfully
2025-12-23 06:08:43,130 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:08:43,185 - app.services.auth_service - INFO - Google token verified for email: srushtibhadgavkar@gmail.com
2025-12-23 06:08:43,192 - app.services.auth_service - INFO - Existing Google user logged in: srushtibhadgavkar@gmail.com
2025-12-23 06:08:43,192 - app.services.auth_service - INFO - Access token created for user: srushtibhadgavkar@gmail.com
2025-12-23 06:10:02,905 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:10:02,957 - app.services.auth_service - INFO - Google token verified for email: working74123@gmail.com
2025-12-23 06:10:02,967 - app.services.auth_service - INFO - New Google user created: working74123@gmail.com (ID: 30)
2025-12-23 06:10:02,968 - app.services.auth_service - INFO - Access token created for user: working74123@gmail.com
2025-12-23 06:10:04,323 - app.api.generation - INFO - ğŸ’³ PAID: Using token 45 - Uses remaining: 1/2
2025-12-23 06:10:04,443 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/aea5b2e6-0d2d-4559-b89f-5caf975b8930.jpg
2025-12-23 06:10:04,444 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/aea5b2e6-0d2d-4559-b89f-5caf975b8930.jpg
2025-12-23 06:10:04,444 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/aea5b2e6-0d2d-4559-b89f-5caf975b8930.jpg
2025-12-23 06:10:04,453 - app.api.generation - INFO - ğŸ”„ Processing generation 99 - Mode: GenerationMode.COUPLE
2025-12-23 06:10:04,475 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:10:04,475 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:10:04,475 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:10:04,475 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:10:04,562 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5981 characters
2025-12-23 06:10:04,628 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:10:04,628 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:10:14,895 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:10:15,091 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:10:15,093 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/94c3cce3-4be8-4e88-a696-cfab97af4032.png (size: unknown)
2025-12-23 06:10:15,209 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/c602278e-5ddc-407a-bcfb-2bb18f4b59b0.png
2025-12-23 06:10:15,209 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:10:15,210 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:10:15,213 - app.api.generation - INFO - ğŸ’³ Token 45 used. Remaining uses: 0/2
2025-12-23 06:10:15,217 - app.api.generation - INFO - âœ… Generation 99 completed successfully
2025-12-23 06:11:14,250 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:11:14,299 - app.services.auth_service - INFO - Google token verified for email: akshatjingar2404@gmail.com
2025-12-23 06:11:14,308 - app.services.auth_service - INFO - New Google user created: akshatjingar2404@gmail.com (ID: 31)
2025-12-23 06:11:14,308 - app.services.auth_service - INFO - Access token created for user: akshatjingar2404@gmail.com
2025-12-23 06:11:56,456 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:11:56,509 - app.services.auth_service - INFO - Google token verified for email: jainams2104@gmail.com
2025-12-23 06:11:56,518 - app.services.auth_service - INFO - New Google user created: jainams2104@gmail.com (ID: 32)
2025-12-23 06:11:56,518 - app.services.auth_service - INFO - Access token created for user: jainams2104@gmail.com
2025-12-23 06:12:27,419 - app.services.payment_service - INFO - Payment token created: 49 for user 9, template 5 (2 uses)
2025-12-23 06:12:27,419 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 49
2025-12-23 06:12:27,422 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 49 for user 9
2025-12-23 06:12:28,009 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 49
2025-12-23 06:12:28,012 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 49
2025-12-23 06:12:28,012 - app.api.payment - INFO - âœ… Payment verified: Token 49
2025-12-23 06:12:57,782 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 30 has 1 credits
2025-12-23 06:12:57,915 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/4f22190b-e693-4572-8e73-8ffa5dc6d26b.jpg
2025-12-23 06:12:57,915 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/4f22190b-e693-4572-8e73-8ffa5dc6d26b.jpg
2025-12-23 06:12:57,915 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/4f22190b-e693-4572-8e73-8ffa5dc6d26b.jpg
2025-12-23 06:12:57,925 - app.api.generation - INFO - ğŸ”„ Processing generation 100 - Mode: GenerationMode.COUPLE
2025-12-23 06:12:57,944 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:12:57,944 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:12:57,944 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:12:57,944 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:12:58,043 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5089 characters
2025-12-23 06:12:58,106 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:12:58,106 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:13:06,621 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:13:06,811 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:13:06,812 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/7bf040e3-1e02-4b59-8a85-0d58cad42845.png (size: unknown)
2025-12-23 06:13:06,953 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/5e40343c-684b-4a5a-bc4a-1604ba6c97af.png
2025-12-23 06:13:07,042 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 06:13:07,042 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 06:13:07,042 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:13:07,042 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 06:13:07,042 - app.services.watermark_service - INFO -   Input: /tmp/tmpemu0ks6i.png
2025-12-23 06:13:07,042 - app.services.watermark_service - INFO -   Output: generated/e75f06ac-b824-4b5f-bb9d-dc61b6fda222_watermarked.png
2025-12-23 06:13:07,042 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:13:07,043 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 06:13:07,071 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:13:07,072 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 06:13:07,080 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 06:13:07,080 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 06:13:08,403 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/e75f06ac-b824-4b5f-bb9d-dc61b6fda222_watermarked.png
2025-12-23 06:13:08,443 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/f876960f-2a09-4749-95d2-02f8f32d4519.png
2025-12-23 06:13:08,444 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/f876960f-2a09-4749-95d2-02f8f32d4519.png
2025-12-23 06:13:08,445 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:13:08,446 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:13:08,450 - app.api.generation - INFO - âœ… Generation 100 completed successfully
2025-12-23 06:13:11,495 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 32 has 1 credits
2025-12-23 06:13:11,500 - app.database - ERROR - Database session error: 400: At least 1 partner image is required for FLEXIBLE mode
2025-12-23 06:13:16,558 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 32 has 0 credits
2025-12-23 06:13:16,563 - app.database - ERROR - Database session error: 400: At least 1 partner image is required for FLEXIBLE mode
2025-12-23 06:13:20,990 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:13:22,171 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:13:40,286 - app.api.generation - INFO - ğŸ’³ PAID: Using token 49 - Uses remaining: 2/2
2025-12-23 06:13:40,432 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/fb673c74-1786-4f87-9923-e8384c21f5ea.jpg
2025-12-23 06:13:40,432 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/fb673c74-1786-4f87-9923-e8384c21f5ea.jpg
2025-12-23 06:13:40,432 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/fb673c74-1786-4f87-9923-e8384c21f5ea.jpg
2025-12-23 06:13:40,501 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/0e7abc4e-c187-4356-840f-505328e45350.png
2025-12-23 06:13:40,501 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0e7abc4e-c187-4356-840f-505328e45350.png
2025-12-23 06:13:40,501 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0e7abc4e-c187-4356-840f-505328e45350.png
2025-12-23 06:13:40,502 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:13:40,513 - app.api.generation - INFO - ğŸ”„ Processing generation 101 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:13:40,546 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:13:40,546 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:13:40,546 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:13:40,546 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:13:40,825 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5613 characters
2025-12-23 06:13:40,889 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:13:40,889 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:13:52,554 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:13:52,743 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:13:52,744 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/23eba213-ff36-4468-9089-758a565161cd.png (size: unknown)
2025-12-23 06:13:52,907 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/fb09286d-5d88-4316-85de-7e30830f592f.png
2025-12-23 06:13:52,908 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:13:52,908 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:13:52,911 - app.api.generation - INFO - ğŸ’³ Token 49 used. Remaining uses: 1/2
2025-12-23 06:13:52,915 - app.api.generation - INFO - âœ… Generation 101 completed successfully
2025-12-23 06:13:53,246 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:13:53,299 - app.services.auth_service - INFO - Google token verified for email: akshatjingar2404@gmail.com
2025-12-23 06:13:53,306 - app.services.auth_service - INFO - Existing Google user logged in: akshatjingar2404@gmail.com
2025-12-23 06:13:53,307 - app.services.auth_service - INFO - Access token created for user: akshatjingar2404@gmail.com
2025-12-23 06:13:56,456 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:14:01,919 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:14:14,138 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:14:33,328 - app.services.payment_service - INFO - Payment token created: 50 for user 29, template 27 (2 uses)
2025-12-23 06:14:33,328 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 50
2025-12-23 06:14:33,330 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 50 for user 29
2025-12-23 06:14:33,436 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:14:33,487 - app.services.auth_service - INFO - Google token verified for email: akshatjingar2404@gmail.com
2025-12-23 06:14:33,493 - app.services.auth_service - INFO - Existing Google user logged in: akshatjingar2404@gmail.com
2025-12-23 06:14:33,494 - app.services.auth_service - INFO - Access token created for user: akshatjingar2404@gmail.com
2025-12-23 06:14:33,944 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 50
2025-12-23 06:14:33,947 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 50
2025-12-23 06:14:33,947 - app.api.payment - INFO - âœ… Payment verified: Token 50
2025-12-23 06:14:42,070 - app.api.generation - INFO - ğŸ’³ PAID: Using token 50 - Uses remaining: 2/2
2025-12-23 06:14:42,074 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:14:42,074 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:14:45,056 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:14:46,630 - app.api.generation - INFO - ğŸ’³ PAID: Using token 50 - Uses remaining: 2/2
2025-12-23 06:14:46,633 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:14:46,634 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:14:47,430 - app.services.payment_service - INFO - Payment token created: 51 for user 30, template 26 (2 uses)
2025-12-23 06:14:47,430 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 51
2025-12-23 06:14:47,433 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 51 for user 30
2025-12-23 06:14:47,982 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 51
2025-12-23 06:14:47,984 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 51
2025-12-23 06:14:47,984 - app.api.payment - INFO - âœ… Payment verified: Token 51
2025-12-23 06:14:48,446 - app.services.payment_service - INFO - Payment token created: 52 for user 30, template 26 (2 uses)
2025-12-23 06:14:48,446 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 52
2025-12-23 06:14:48,448 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 52 for user 30
2025-12-23 06:14:48,699 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 52
2025-12-23 06:14:48,701 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 52
2025-12-23 06:14:48,701 - app.api.payment - INFO - âœ… Payment verified: Token 52
2025-12-23 06:15:01,907 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:15:02,399 - app.api.generation - INFO - ğŸ’³ PAID: Using token 50 - Uses remaining: 2/2
2025-12-23 06:15:02,403 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:15:02,404 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:15:09,820 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:15:22,991 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:15:23,043 - app.services.auth_service - INFO - Google token verified for email: patelprisha0320@gmail.com
2025-12-23 06:15:23,050 - app.services.auth_service - INFO - Existing Google user logged in: patelprisha0320@gmail.com
2025-12-23 06:15:23,050 - app.services.auth_service - INFO - Access token created for user: patelprisha0320@gmail.com
2025-12-23 06:15:43,622 - app.api.generation - INFO - ğŸ’³ PAID: Using token 50 - Uses remaining: 2/2
2025-12-23 06:15:43,625 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:15:43,626 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:15:57,891 - app.api.generation - INFO - ğŸ’³ PAID: Using token 50 - Uses remaining: 2/2
2025-12-23 06:15:57,894 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:15:57,895 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:16:05,202 - app.services.payment_service - INFO - Payment token created: 53 for user 30, template 12 (2 uses)
2025-12-23 06:16:05,202 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 53
2025-12-23 06:16:05,205 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 53 for user 30
2025-12-23 06:16:05,798 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 53
2025-12-23 06:16:05,800 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 53
2025-12-23 06:16:05,800 - app.api.payment - INFO - âœ… Payment verified: Token 53
2025-12-23 06:16:07,974 - app.api.generation - INFO - ğŸ’³ PAID: Using token 49 - Uses remaining: 1/2
2025-12-23 06:16:08,149 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/b9a5aa71-91e9-4fe4-9fac-c16a2b5aee19.jpg
2025-12-23 06:16:08,149 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/b9a5aa71-91e9-4fe4-9fac-c16a2b5aee19.jpg
2025-12-23 06:16:08,149 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/b9a5aa71-91e9-4fe4-9fac-c16a2b5aee19.jpg
2025-12-23 06:16:08,226 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/c3119257-5901-408c-90ed-5691c6fafeff.png
2025-12-23 06:16:08,226 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/c3119257-5901-408c-90ed-5691c6fafeff.png
2025-12-23 06:16:08,226 - app.api.generation - INFO -    Saved user image 2: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/c3119257-5901-408c-90ed-5691c6fafeff.png
2025-12-23 06:16:08,336 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/0a0b7a45-4e0d-46f4-96f3-d95b1e037b66.png
2025-12-23 06:16:08,337 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0a0b7a45-4e0d-46f4-96f3-d95b1e037b66.png
2025-12-23 06:16:08,337 - app.api.generation - INFO -    Saved user image 3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0a0b7a45-4e0d-46f4-96f3-d95b1e037b66.png
2025-12-23 06:16:08,409 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/58c28eb8-d89d-4972-bce3-adbcab9ba213.png
2025-12-23 06:16:08,409 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/58c28eb8-d89d-4972-bce3-adbcab9ba213.png
2025-12-23 06:16:08,409 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/58c28eb8-d89d-4972-bce3-adbcab9ba213.png
2025-12-23 06:16:08,479 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/cd019594-08b9-4179-aee6-22e9fe065663.png
2025-12-23 06:16:08,479 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/cd019594-08b9-4179-aee6-22e9fe065663.png
2025-12-23 06:16:08,479 - app.api.generation - INFO -    Saved partner image 2: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/cd019594-08b9-4179-aee6-22e9fe065663.png
2025-12-23 06:16:08,576 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/56633f88-3c7c-4672-bb87-91181748df23.png
2025-12-23 06:16:08,576 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/56633f88-3c7c-4672-bb87-91181748df23.png
2025-12-23 06:16:08,576 - app.api.generation - INFO -    Saved partner image 3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/56633f88-3c7c-4672-bb87-91181748df23.png
2025-12-23 06:16:08,576 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 3 user + 3 partner images
2025-12-23 06:16:08,586 - app.api.generation - INFO - ğŸ”„ Processing generation 102 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:16:08,670 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:16:08,670 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:16:08,670 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:16:08,670 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 3 user + 3 partner images
2025-12-23 06:16:09,840 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5610 characters
2025-12-23 06:16:09,904 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:16:09,904 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:16:22,068 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:16:22,259 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:16:22,260 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/9cc579b1-62e9-496f-a26b-b44e3754ce21.png (size: unknown)
2025-12-23 06:16:22,437 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/2724f2c1-8aa0-453b-a0ba-8fe0e8a855aa.png
2025-12-23 06:16:22,437 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:16:22,437 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:16:22,441 - app.api.generation - INFO - ğŸ’³ Token 49 used. Remaining uses: 0/2
2025-12-23 06:16:22,444 - app.api.generation - INFO - âœ… Generation 102 completed successfully
2025-12-23 06:16:22,463 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:16:22,956 - app.api.generation - INFO - ğŸ’³ PAID: Using token 53 - Uses remaining: 2/2
2025-12-23 06:16:22,993 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/01f011cb-d9be-4907-ac6c-613198258b75.jpg
2025-12-23 06:16:22,993 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/01f011cb-d9be-4907-ac6c-613198258b75.jpg
2025-12-23 06:16:22,993 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/01f011cb-d9be-4907-ac6c-613198258b75.jpg
2025-12-23 06:16:23,003 - app.api.generation - INFO - ğŸ”„ Processing generation 103 - Mode: GenerationMode.COUPLE
2025-12-23 06:16:23,032 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:16:23,032 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:16:23,032 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:16:23,032 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:16:23,125 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5301 characters
2025-12-23 06:16:23,189 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:16:23,189 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:16:34,664 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:16:34,843 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:16:34,844 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/9e240d6e-d80b-4e81-92df-fe7ddaaa8434.png (size: unknown)
2025-12-23 06:16:34,986 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/6bba6baa-a838-4638-a684-c1fc9653b485.png
2025-12-23 06:16:34,987 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:16:34,987 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:16:34,990 - app.api.generation - INFO - ğŸ’³ Token 53 used. Remaining uses: 1/2
2025-12-23 06:16:34,994 - app.api.generation - INFO - âœ… Generation 103 completed successfully
2025-12-23 06:16:44,993 - app.services.payment_service - INFO - Payment token created: 54 for user 29, template 29 (2 uses)
2025-12-23 06:16:44,993 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 54
2025-12-23 06:16:44,995 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 54 for user 29
2025-12-23 06:16:45,580 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 54
2025-12-23 06:16:45,582 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 54
2025-12-23 06:16:45,582 - app.api.payment - INFO - âœ… Payment verified: Token 54
2025-12-23 06:16:56,834 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:17:00,127 - app.api.generation - INFO - ğŸ’³ PAID: Using token 54 - Uses remaining: 2/2
2025-12-23 06:17:00,195 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:17:00,196 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:17:03,925 - app.api.generation - INFO - ğŸ’³ PAID: Using token 54 - Uses remaining: 2/2
2025-12-23 06:17:03,929 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:17:03,929 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:17:32,700 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:17:41,738 - app.services.payment_service - INFO - Payment token created: 55 for user 29, template 51 (2 uses)
2025-12-23 06:17:41,738 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 55
2025-12-23 06:17:41,742 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 55 for user 29
2025-12-23 06:17:42,022 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 55
2025-12-23 06:17:42,025 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 55
2025-12-23 06:17:42,025 - app.api.payment - INFO - âœ… Payment verified: Token 55
2025-12-23 06:17:45,190 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:17:46,947 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:17:53,114 - app.api.generation - INFO - ğŸ’³ PAID: Using token 55 - Uses remaining: 2/2
2025-12-23 06:17:53,118 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:17:53,118 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:18:02,030 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:18:08,107 - app.services.payment_service - INFO - Payment token created: 56 for user 30, template 54 (2 uses)
2025-12-23 06:18:08,107 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 56
2025-12-23 06:18:08,110 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 56 for user 30
2025-12-23 06:18:08,365 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 56
2025-12-23 06:18:08,367 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 56
2025-12-23 06:18:08,367 - app.api.payment - INFO - âœ… Payment verified: Token 56
2025-12-23 06:18:10,531 - app.services.payment_service - INFO - Payment token created: 57 for user 4, template 1 (2 uses)
2025-12-23 06:18:10,531 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 57
2025-12-23 06:18:10,534 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 57 for user 4
2025-12-23 06:18:11,198 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 57
2025-12-23 06:18:11,200 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 57
2025-12-23 06:18:11,201 - app.api.payment - INFO - âœ… Payment verified: Token 57
2025-12-23 06:18:12,569 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:18:37,062 - app.services.payment_service - INFO - Payment token created: 58 for user 32, template 1 (2 uses)
2025-12-23 06:18:37,062 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 58
2025-12-23 06:18:37,065 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 58 for user 32
2025-12-23 06:18:37,077 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 31 has 1 credits
2025-12-23 06:18:37,216 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/fad310c7-4455-445b-a873-a374f6adf9e8.jpg
2025-12-23 06:18:37,216 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/fad310c7-4455-445b-a873-a374f6adf9e8.jpg
2025-12-23 06:18:37,216 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/fad310c7-4455-445b-a873-a374f6adf9e8.jpg
2025-12-23 06:18:37,216 - app.services.storage_service - WARNING - Invalid file type attempted: .heic
2025-12-23 06:18:37,216 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:18:37,996 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 58
2025-12-23 06:18:37,998 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 58
2025-12-23 06:18:37,999 - app.api.payment - INFO - âœ… Payment verified: Token 58
2025-12-23 06:18:40,660 - app.services.payment_service - INFO - Payment token created: 59 for user 30, template 57 (2 uses)
2025-12-23 06:18:40,661 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 59
2025-12-23 06:18:40,663 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 59 for user 30
2025-12-23 06:18:40,968 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 59
2025-12-23 06:18:40,970 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 59
2025-12-23 06:18:40,970 - app.api.payment - INFO - âœ… Payment verified: Token 59
2025-12-23 06:18:43,456 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 31 has 0 credits
2025-12-23 06:18:43,601 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/0240e2ea-e827-4fe9-a1f1-4f6a644ef4c8.jpg
2025-12-23 06:18:43,601 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0240e2ea-e827-4fe9-a1f1-4f6a644ef4c8.jpg
2025-12-23 06:18:43,601 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0240e2ea-e827-4fe9-a1f1-4f6a644ef4c8.jpg
2025-12-23 06:18:43,601 - app.services.storage_service - WARNING - Invalid file type attempted: .heic
2025-12-23 06:18:43,601 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:19:03,614 - app.api.generation - INFO - ğŸ’³ PAID: Using token 59 - Uses remaining: 2/2
2025-12-23 06:19:03,712 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/e4e44c87-5f3b-49d2-ae53-d765b4369568.jpg
2025-12-23 06:19:03,712 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e4e44c87-5f3b-49d2-ae53-d765b4369568.jpg
2025-12-23 06:19:03,712 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e4e44c87-5f3b-49d2-ae53-d765b4369568.jpg
2025-12-23 06:19:03,723 - app.api.generation - INFO - ğŸ”„ Processing generation 104 - Mode: GenerationMode.COUPLE
2025-12-23 06:19:03,748 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:19:03,748 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:19:03,748 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:19:03,748 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:19:03,837 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 4987 characters
2025-12-23 06:19:03,901 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:19:03,901 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:19:12,440 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:19:12,626 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:19:12,630 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/9af40b95-674f-42df-839e-117b00477c04.png (size: unknown)
2025-12-23 06:19:12,737 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/a4904f92-b3f4-4f73-a28e-7efc2036cb91.png
2025-12-23 06:19:12,738 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:19:12,738 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:19:12,741 - app.api.generation - INFO - ğŸ’³ Token 59 used. Remaining uses: 1/2
2025-12-23 06:19:12,745 - app.api.generation - INFO - âœ… Generation 104 completed successfully
2025-12-23 06:19:19,782 - app.services.payment_service - INFO - Payment token created: 60 for user 32, template 26 (2 uses)
2025-12-23 06:19:19,782 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 60
2025-12-23 06:19:19,785 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 60 for user 32
2025-12-23 06:19:20,508 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 60
2025-12-23 06:19:20,511 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 60
2025-12-23 06:19:20,511 - app.api.payment - INFO - âœ… Payment verified: Token 60
2025-12-23 06:20:00,234 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:20:01,431 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 30 has 0 credits
2025-12-23 06:20:01,724 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/01173058-4488-4da1-87ae-5dac05422a6a.jpg
2025-12-23 06:20:01,725 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/01173058-4488-4da1-87ae-5dac05422a6a.jpg
2025-12-23 06:20:01,725 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/01173058-4488-4da1-87ae-5dac05422a6a.jpg
2025-12-23 06:20:01,738 - app.api.generation - INFO - ğŸ”„ Processing generation 105 - Mode: GenerationMode.COUPLE
2025-12-23 06:20:01,759 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:20:01,759 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:20:01,759 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:20:01,759 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:20:01,982 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5664 characters
2025-12-23 06:20:02,233 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:20:02,233 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:20:09,741 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:20:09,922 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:20:09,923 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/c6e80b25-dc31-4eab-bbed-7881b4f890f7.png (size: unknown)
2025-12-23 06:20:10,040 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/e7753588-f81e-4fd4-a0fd-e9c83626bca3.png
2025-12-23 06:20:10,135 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 06:20:10,135 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 06:20:10,135 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:20:10,135 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 06:20:10,135 - app.services.watermark_service - INFO -   Input: /tmp/tmp87icbh5k.png
2025-12-23 06:20:10,135 - app.services.watermark_service - INFO -   Output: generated/3f2338d3-1a7d-4187-8827-eadf136c96fd_watermarked.png
2025-12-23 06:20:10,135 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:20:10,135 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 06:20:10,163 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:20:10,163 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 06:20:10,171 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 06:20:10,171 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 06:20:11,467 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/3f2338d3-1a7d-4187-8827-eadf136c96fd_watermarked.png
2025-12-23 06:20:11,549 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/af6acfc3-6394-4a80-824e-ed96986f80a6.png
2025-12-23 06:20:11,549 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/af6acfc3-6394-4a80-824e-ed96986f80a6.png
2025-12-23 06:20:11,551 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:20:11,551 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:20:11,555 - app.api.generation - INFO - âœ… Generation 105 completed successfully
2025-12-23 06:20:11,849 - app.services.payment_service - INFO - Payment token created: 61 for user 9, template 12 (2 uses)
2025-12-23 06:20:11,849 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 61
2025-12-23 06:20:11,851 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 61 for user 9
2025-12-23 06:20:12,114 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 61
2025-12-23 06:20:12,117 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 61
2025-12-23 06:20:12,117 - app.api.payment - INFO - âœ… Payment verified: Token 61
2025-12-23 06:20:27,045 - app.services.payment_service - INFO - Payment token created: 62 for user 29, template 57 (2 uses)
2025-12-23 06:20:27,046 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 62
2025-12-23 06:20:27,048 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 62 for user 29
2025-12-23 06:20:27,333 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 62
2025-12-23 06:20:27,335 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 62
2025-12-23 06:20:27,336 - app.api.payment - INFO - âœ… Payment verified: Token 62
2025-12-23 06:20:28,615 - app.services.payment_service - INFO - Payment token created: 63 for user 29, template 57 (2 uses)
2025-12-23 06:20:28,615 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 63
2025-12-23 06:20:28,617 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 63 for user 29
2025-12-23 06:20:28,903 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 63
2025-12-23 06:20:28,905 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 63
2025-12-23 06:20:28,905 - app.api.payment - INFO - âœ… Payment verified: Token 63
2025-12-23 06:20:35,493 - app.api.generation - INFO - ğŸ’³ PAID: Using token 57 - Uses remaining: 2/2
2025-12-23 06:20:35,632 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/6d76dcb1-5636-449b-9a1d-d5bce38fac2a.jpg
2025-12-23 06:20:35,632 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6d76dcb1-5636-449b-9a1d-d5bce38fac2a.jpg
2025-12-23 06:20:35,633 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6d76dcb1-5636-449b-9a1d-d5bce38fac2a.jpg
2025-12-23 06:20:35,643 - app.api.generation - INFO - ğŸ”„ Processing generation 106 - Mode: GenerationMode.COUPLE
2025-12-23 06:20:35,664 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:20:35,664 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:20:35,664 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:20:35,664 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:20:35,754 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5981 characters
2025-12-23 06:20:35,818 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:20:35,819 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:20:44,357 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:20:44,536 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:20:44,538 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/adb076d7-b5ca-4c1f-b4ba-cf80284a9c3b.png (size: unknown)
2025-12-23 06:20:44,666 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/8865943f-812a-47b5-9890-cbb8e1bd82e3.png
2025-12-23 06:20:44,667 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:20:44,667 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:20:44,670 - app.api.generation - INFO - ğŸ’³ Token 57 used. Remaining uses: 1/2
2025-12-23 06:20:44,674 - app.api.generation - INFO - âœ… Generation 106 completed successfully
2025-12-23 06:20:45,954 - app.api.generation - INFO - ğŸ’³ PAID: Using token 62 - Uses remaining: 2/2
2025-12-23 06:20:45,957 - app.services.storage_service - WARNING - Invalid file type attempted: .jfif
2025-12-23 06:20:45,957 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:20:58,525 - app.api.generation - INFO - ğŸ’³ PAID: Using token 60 - Uses remaining: 2/2
2025-12-23 06:20:58,758 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/941c370a-caed-4a25-819d-997cec884b86.jpeg
2025-12-23 06:20:58,758 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/941c370a-caed-4a25-819d-997cec884b86.jpeg
2025-12-23 06:20:58,758 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/941c370a-caed-4a25-819d-997cec884b86.jpeg
2025-12-23 06:20:58,846 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/624b3e58-bacd-4635-a23e-470ac6a3863d.jpeg
2025-12-23 06:20:58,846 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/624b3e58-bacd-4635-a23e-470ac6a3863d.jpeg
2025-12-23 06:20:58,847 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/624b3e58-bacd-4635-a23e-470ac6a3863d.jpeg
2025-12-23 06:20:58,847 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:20:58,855 - app.api.generation - INFO - ğŸ”„ Processing generation 107 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:20:58,890 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:20:58,890 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:20:58,891 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:20:58,891 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:20:59,598 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5315 characters
2025-12-23 06:20:59,662 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:20:59,662 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:21:10,539 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:21:10,737 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:21:10,738 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/fbc00c6f-6408-44a1-82b3-03cea623e2bf.png (size: unknown)
2025-12-23 06:21:10,882 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/41fd9536-2df3-456a-9087-2452d3028554.png
2025-12-23 06:21:10,882 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:21:10,882 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:21:10,886 - app.api.generation - INFO - ğŸ’³ Token 60 used. Remaining uses: 1/2
2025-12-23 06:21:10,890 - app.api.generation - INFO - âœ… Generation 107 completed successfully
2025-12-23 06:22:24,343 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:22:28,771 - app.api.generation - INFO - ğŸ’³ PAID: Using token 56 - Uses remaining: 2/2
2025-12-23 06:22:28,878 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/bd089ddc-e353-45f5-b0f7-3587dec9a1c6.jpg
2025-12-23 06:22:28,878 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/bd089ddc-e353-45f5-b0f7-3587dec9a1c6.jpg
2025-12-23 06:22:28,878 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/bd089ddc-e353-45f5-b0f7-3587dec9a1c6.jpg
2025-12-23 06:22:28,888 - app.api.generation - INFO - ğŸ”„ Processing generation 108 - Mode: GenerationMode.COUPLE
2025-12-23 06:22:28,909 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:22:28,909 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:22:28,909 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:22:28,910 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:22:29,002 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5507 characters
2025-12-23 06:22:29,066 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:22:29,067 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:22:39,245 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:22:39,452 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:22:39,454 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/e3bcd80a-7573-4962-90ef-4543ceb00b69.png (size: unknown)
2025-12-23 06:22:39,649 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/0b0c15b7-fc5d-41cb-9338-3fe2ed9647e1.png
2025-12-23 06:22:39,650 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:22:39,650 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:22:39,653 - app.api.generation - INFO - ğŸ’³ Token 56 used. Remaining uses: 1/2
2025-12-23 06:22:39,657 - app.api.generation - INFO - âœ… Generation 108 completed successfully
2025-12-23 06:23:05,988 - app.api.generation - INFO - ğŸ’³ PAID: Using token 60 - Uses remaining: 1/2
2025-12-23 06:23:06,141 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/84925195-d92d-4cea-b905-4f3d16c32814.jpeg
2025-12-23 06:23:06,141 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/84925195-d92d-4cea-b905-4f3d16c32814.jpeg
2025-12-23 06:23:06,141 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/84925195-d92d-4cea-b905-4f3d16c32814.jpeg
2025-12-23 06:23:06,150 - app.api.generation - INFO - ğŸ”„ Processing generation 109 - Mode: GenerationMode.COUPLE
2025-12-23 06:23:06,170 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:23:06,170 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:23:06,170 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:23:06,170 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:23:06,475 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5038 characters
2025-12-23 06:23:06,540 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:23:06,540 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:23:16,144 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:23:16,347 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:23:16,349 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/24005105-8d08-4c9f-8b52-da1890cc2b23.png (size: unknown)
2025-12-23 06:23:16,500 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/f48b1982-5009-4680-b482-1c5e8719cc80.png
2025-12-23 06:23:16,501 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:23:16,501 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:23:16,505 - app.api.generation - INFO - ğŸ’³ Token 60 used. Remaining uses: 0/2
2025-12-23 06:23:16,508 - app.api.generation - INFO - âœ… Generation 109 completed successfully
2025-12-23 06:23:27,969 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:23:28,753 - app.api.generation - INFO - ğŸ’³ PAID: Using token 56 - Uses remaining: 1/2
2025-12-23 06:23:28,851 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/8e114ec3-780a-41e1-9b5f-b0b93935d524.jpg
2025-12-23 06:23:28,851 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8e114ec3-780a-41e1-9b5f-b0b93935d524.jpg
2025-12-23 06:23:28,851 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8e114ec3-780a-41e1-9b5f-b0b93935d524.jpg
2025-12-23 06:23:28,860 - app.api.generation - INFO - ğŸ”„ Processing generation 110 - Mode: GenerationMode.COUPLE
2025-12-23 06:23:28,892 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:23:28,892 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:23:28,892 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:23:28,892 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:23:28,978 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5507 characters
2025-12-23 06:23:29,043 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:23:29,043 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:23:37,181 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:23:37,373 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:23:37,375 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/f21f3ab0-6bba-4b2c-8568-abad2219b097.png (size: unknown)
2025-12-23 06:23:37,520 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/cfb6c392-0e53-4ac6-9cd0-b681ef2cc8b9.png
2025-12-23 06:23:37,521 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:23:37,521 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:23:37,524 - app.api.generation - INFO - ğŸ’³ Token 56 used. Remaining uses: 0/2
2025-12-23 06:23:37,528 - app.api.generation - INFO - âœ… Generation 110 completed successfully
2025-12-23 06:24:27,896 - app.api.generation - INFO - ğŸ’³ PAID: Using token 58 - Uses remaining: 2/2
2025-12-23 06:24:28,039 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/d2b318f2-86dc-4f7c-9444-257465f3aaab.jpeg
2025-12-23 06:24:28,039 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/d2b318f2-86dc-4f7c-9444-257465f3aaab.jpeg
2025-12-23 06:24:28,039 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/d2b318f2-86dc-4f7c-9444-257465f3aaab.jpeg
2025-12-23 06:24:28,050 - app.api.generation - INFO - ğŸ”„ Processing generation 111 - Mode: GenerationMode.COUPLE
2025-12-23 06:24:28,073 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:24:28,073 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:24:28,073 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:24:28,073 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:24:28,395 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5981 characters
2025-12-23 06:24:28,458 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:24:28,459 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:24:38,024 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:24:38,222 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:24:38,224 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/f1d52293-c7f8-47a7-b9c4-af8554d7d605.png (size: unknown)
2025-12-23 06:24:38,390 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/aca06437-be91-4894-8520-566684dc372f.png
2025-12-23 06:24:38,391 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:24:38,391 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:24:38,394 - app.api.generation - INFO - ğŸ’³ Token 58 used. Remaining uses: 1/2
2025-12-23 06:24:38,398 - app.api.generation - INFO - âœ… Generation 111 completed successfully
2025-12-23 06:24:42,814 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:24:51,947 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:24:53,574 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:24:53,625 - app.services.auth_service - INFO - Google token verified for email: working74123@gmail.com
2025-12-23 06:24:53,631 - app.services.auth_service - INFO - Existing Google user logged in: working74123@gmail.com
2025-12-23 06:24:53,632 - app.services.auth_service - INFO - Access token created for user: working74123@gmail.com
2025-12-23 06:25:13,374 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:25:13,424 - app.services.auth_service - INFO - Google token verified for email: srushtibhadgavkar@gmail.com
2025-12-23 06:25:13,431 - app.services.auth_service - INFO - Existing Google user logged in: srushtibhadgavkar@gmail.com
2025-12-23 06:25:13,431 - app.services.auth_service - INFO - Access token created for user: srushtibhadgavkar@gmail.com
2025-12-23 06:25:16,614 - app.services.payment_service - INFO - Payment token created: 64 for user 29, template 7 (2 uses)
2025-12-23 06:25:16,614 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 64
2025-12-23 06:25:16,617 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 64 for user 29
2025-12-23 06:25:17,295 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 64
2025-12-23 06:25:17,298 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 64
2025-12-23 06:25:17,298 - app.api.payment - INFO - âœ… Payment verified: Token 64
2025-12-23 06:25:32,981 - app.api.generation - INFO - ğŸ’³ PAID: Using token 64 - Uses remaining: 2/2
2025-12-23 06:25:33,074 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/c1068f3a-1276-44b4-a529-2d330baf0bfa.jpg
2025-12-23 06:25:33,075 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/c1068f3a-1276-44b4-a529-2d330baf0bfa.jpg
2025-12-23 06:25:33,075 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/c1068f3a-1276-44b4-a529-2d330baf0bfa.jpg
2025-12-23 06:25:33,084 - app.api.generation - INFO - ğŸ”„ Processing generation 112 - Mode: GenerationMode.COUPLE
2025-12-23 06:25:33,104 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:25:33,104 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:25:33,104 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:25:33,104 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:25:33,193 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5127 characters
2025-12-23 06:25:33,257 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:25:33,258 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:25:40,921 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:25:41,110 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:25:41,111 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/4ac826d8-b788-4c1e-abe9-0a2067f96611.png (size: unknown)
2025-12-23 06:25:41,249 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/cd4d3a54-75ca-473b-a4d2-66453533472c.png
2025-12-23 06:25:41,249 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:25:41,250 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:25:41,253 - app.api.generation - INFO - ğŸ’³ Token 64 used. Remaining uses: 1/2
2025-12-23 06:25:41,256 - app.api.generation - INFO - âœ… Generation 112 completed successfully
2025-12-23 06:26:21,902 - app.services.auth_service - WARNING - Registration attempt with existing email: user8@example.com
2025-12-23 06:26:21,902 - app.database - ERROR - Database session error: 400: Email already registered
2025-12-23 06:26:29,433 - app.services.auth_service - INFO - New user registered: user9@example.com (ID: 33)
2025-12-23 06:26:47,472 - app.services.auth_service - INFO - User authenticated successfully: user9@example.com
2025-12-23 06:26:47,473 - app.services.auth_service - INFO - Access token created for user: user9@example.com
2025-12-23 06:27:06,235 - app.services.payment_service - INFO - Payment token created: 65 for user 32, template 7 (2 uses)
2025-12-23 06:27:06,235 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 65
2025-12-23 06:27:06,238 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 65 for user 32
2025-12-23 06:27:07,131 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 65
2025-12-23 06:27:07,134 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 65
2025-12-23 06:27:07,134 - app.api.payment - INFO - âœ… Payment verified: Token 65
2025-12-23 06:27:10,750 - app.services.payment_service - INFO - Payment token created: 66 for user 29, template 54 (2 uses)
2025-12-23 06:27:10,750 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 66
2025-12-23 06:27:10,752 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 66 for user 29
2025-12-23 06:27:11,425 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 66
2025-12-23 06:27:11,428 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 66
2025-12-23 06:27:11,428 - app.api.payment - INFO - âœ… Payment verified: Token 66
2025-12-23 06:27:25,717 - app.api.generation - INFO - ğŸ’³ PAID: Using token 66 - Uses remaining: 2/2
2025-12-23 06:27:25,855 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/915c68a8-c4a3-4ee9-ad35-de8354c4ba5b.jpg
2025-12-23 06:27:25,855 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/915c68a8-c4a3-4ee9-ad35-de8354c4ba5b.jpg
2025-12-23 06:27:25,855 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/915c68a8-c4a3-4ee9-ad35-de8354c4ba5b.jpg
2025-12-23 06:27:25,864 - app.api.generation - INFO - ğŸ”„ Processing generation 113 - Mode: GenerationMode.COUPLE
2025-12-23 06:27:25,884 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:27:25,884 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:27:25,884 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:27:25,885 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:27:25,997 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5507 characters
2025-12-23 06:27:26,061 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:27:26,062 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:27:34,572 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:27:34,774 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:27:34,776 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/ea528fe9-a8b4-4900-b608-17b1659dfb44.png (size: unknown)
2025-12-23 06:27:34,905 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/649ff465-f09e-4677-bdcb-3f15fe68c9d6.png
2025-12-23 06:27:34,906 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:27:34,906 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:27:34,909 - app.api.generation - INFO - ğŸ’³ Token 66 used. Remaining uses: 1/2
2025-12-23 06:27:34,913 - app.api.generation - INFO - âœ… Generation 113 completed successfully
2025-12-23 06:28:01,583 - app.api.generation - INFO - ğŸ’³ PAID: Using token 65 - Uses remaining: 2/2
2025-12-23 06:28:01,875 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/185a270a-6c05-4de3-85fd-3a1ffb141358.jpeg
2025-12-23 06:28:01,878 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/185a270a-6c05-4de3-85fd-3a1ffb141358.jpeg
2025-12-23 06:28:01,878 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/185a270a-6c05-4de3-85fd-3a1ffb141358.jpeg
2025-12-23 06:28:01,930 - app.api.generation - INFO - ğŸ”„ Processing generation 114 - Mode: GenerationMode.COUPLE
2025-12-23 06:28:01,972 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:28:01,972 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:28:01,972 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:28:01,972 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:28:02,427 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5127 characters
2025-12-23 06:28:02,491 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:28:02,492 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:28:12,641 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:28:12,820 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:28:12,822 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/50097c23-003c-437f-a716-6e37d7c717cf.png (size: unknown)
2025-12-23 06:28:12,957 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/bfbf95c9-7638-4d86-853f-848341ee19b1.png
2025-12-23 06:28:12,957 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:28:12,958 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:28:12,961 - app.api.generation - INFO - ğŸ’³ Token 65 used. Remaining uses: 1/2
2025-12-23 06:28:12,964 - app.api.generation - INFO - âœ… Generation 114 completed successfully
2025-12-23 06:28:14,431 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:28:14,482 - app.services.auth_service - INFO - Google token verified for email: mindsetgo.work@gmail.com
2025-12-23 06:28:14,491 - app.services.auth_service - INFO - New Google user created: mindsetgo.work@gmail.com (ID: 34)
2025-12-23 06:28:14,491 - app.services.auth_service - INFO - Access token created for user: mindsetgo.work@gmail.com
2025-12-23 06:29:09,545 - app.services.payment_service - INFO - Payment token created: 67 for user 29, template 46 (2 uses)
2025-12-23 06:29:09,545 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 67
2025-12-23 06:29:09,547 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 67 for user 29
2025-12-23 06:29:10,324 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 67
2025-12-23 06:29:10,326 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 67
2025-12-23 06:29:10,326 - app.api.payment - INFO - âœ… Payment verified: Token 67
2025-12-23 06:29:14,374 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 34 has 1 credits
2025-12-23 06:29:14,567 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/8cc52de0-b38b-436c-be01-32ea57e8c18f.jpg
2025-12-23 06:29:14,567 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8cc52de0-b38b-436c-be01-32ea57e8c18f.jpg
2025-12-23 06:29:14,567 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8cc52de0-b38b-436c-be01-32ea57e8c18f.jpg
2025-12-23 06:29:14,567 - app.services.storage_service - WARNING - Invalid file type attempted: .heic
2025-12-23 06:29:14,567 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:29:44,228 - app.services.payment_service - INFO - Payment token created: 68 for user 29, template 36 (2 uses)
2025-12-23 06:29:44,229 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 68
2025-12-23 06:29:44,233 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 68 for user 29
2025-12-23 06:29:45,235 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 68
2025-12-23 06:29:45,237 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 68
2025-12-23 06:29:45,237 - app.api.payment - INFO - âœ… Payment verified: Token 68
2025-12-23 06:30:33,508 - app.services.payment_service - INFO - Payment token created: 69 for user 30, template 7 (2 uses)
2025-12-23 06:30:33,509 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 69
2025-12-23 06:30:33,511 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 69 for user 30
2025-12-23 06:30:34,138 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 69
2025-12-23 06:30:34,140 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 69
2025-12-23 06:30:34,140 - app.api.payment - INFO - âœ… Payment verified: Token 69
2025-12-23 06:30:46,011 - app.api.generation - INFO - ğŸ’³ PAID: Using token 69 - Uses remaining: 2/2
2025-12-23 06:30:46,110 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/68a95c59-7a4f-478f-85eb-e58e38a5ce2f.jpg
2025-12-23 06:30:46,110 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/68a95c59-7a4f-478f-85eb-e58e38a5ce2f.jpg
2025-12-23 06:30:46,110 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/68a95c59-7a4f-478f-85eb-e58e38a5ce2f.jpg
2025-12-23 06:30:46,119 - app.api.generation - INFO - ğŸ”„ Processing generation 115 - Mode: GenerationMode.COUPLE
2025-12-23 06:30:46,141 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:30:46,141 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:30:46,141 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:30:46,141 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:30:46,238 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5127 characters
2025-12-23 06:30:46,307 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:30:46,307 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:30:54,087 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:30:54,274 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:30:54,276 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/67dd1b36-08a9-4ec4-a9b7-49e337f9f513.png (size: unknown)
2025-12-23 06:30:54,392 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/9b1cbba6-1c23-487c-8ee4-4e6410ce1da9.png
2025-12-23 06:30:54,392 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:30:54,393 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:30:54,396 - app.api.generation - INFO - ğŸ’³ Token 69 used. Remaining uses: 1/2
2025-12-23 06:30:54,399 - app.api.generation - INFO - âœ… Generation 115 completed successfully
2025-12-23 06:30:54,413 - app.services.payment_service - INFO - Payment token created: 70 for user 29, template 55 (2 uses)
2025-12-23 06:30:54,413 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 70
2025-12-23 06:30:54,415 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 70 for user 29
2025-12-23 06:30:54,425 - app.services.payment_service - INFO - Payment token created: 71 for user 29, template 55 (2 uses)
2025-12-23 06:30:54,425 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 71
2025-12-23 06:30:54,427 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 71 for user 29
2025-12-23 06:30:54,770 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 70
2025-12-23 06:30:54,773 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 70
2025-12-23 06:30:54,773 - app.api.payment - INFO - âœ… Payment verified: Token 70
2025-12-23 06:30:54,781 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 71
2025-12-23 06:30:54,784 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 71
2025-12-23 06:30:54,784 - app.api.payment - INFO - âœ… Payment verified: Token 71
2025-12-23 06:30:54,794 - app.services.payment_service - INFO - Payment token created: 72 for user 29, template 55 (2 uses)
2025-12-23 06:30:54,795 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 72
2025-12-23 06:30:54,797 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 72 for user 29
2025-12-23 06:30:55,155 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 72
2025-12-23 06:30:55,158 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 72
2025-12-23 06:30:55,158 - app.api.payment - INFO - âœ… Payment verified: Token 72
2025-12-23 06:31:09,483 - app.api.generation - INFO - ğŸ’³ PAID: Using token 70 - Uses remaining: 2/2
2025-12-23 06:31:09,586 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/844508c3-8fea-42c4-829d-687aa4cc8c91.jpg
2025-12-23 06:31:09,586 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/844508c3-8fea-42c4-829d-687aa4cc8c91.jpg
2025-12-23 06:31:09,587 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/844508c3-8fea-42c4-829d-687aa4cc8c91.jpg
2025-12-23 06:31:09,595 - app.api.generation - INFO - ğŸ”„ Processing generation 116 - Mode: GenerationMode.COUPLE
2025-12-23 06:31:09,617 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:31:09,617 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:31:09,617 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:31:09,617 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:31:09,734 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5041 characters
2025-12-23 06:31:09,799 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:31:09,799 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:31:19,962 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:31:20,162 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:31:20,164 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/ba9b7348-079c-492b-a30b-9dfad90ef5e4.png (size: unknown)
2025-12-23 06:31:20,303 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/3d6094ae-3f8a-4003-9a6b-cf9fec23385b.png
2025-12-23 06:31:20,303 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:31:20,304 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:31:20,307 - app.api.generation - INFO - ğŸ’³ Token 70 used. Remaining uses: 1/2
2025-12-23 06:31:20,311 - app.api.generation - INFO - âœ… Generation 116 completed successfully
2025-12-23 06:31:33,658 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 34 has 0 credits
2025-12-23 06:31:33,819 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/768eec6a-1a06-46e5-baca-6dd0a0c06523.jpg
2025-12-23 06:31:33,820 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/768eec6a-1a06-46e5-baca-6dd0a0c06523.jpg
2025-12-23 06:31:33,820 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/768eec6a-1a06-46e5-baca-6dd0a0c06523.jpg
2025-12-23 06:31:33,820 - app.services.storage_service - WARNING - Invalid file type attempted: .heic
2025-12-23 06:31:33,820 - app.database - ERROR - Database session error: 400: Invalid file type. Allowed types: .jpg, .jpeg, .png, .webp
2025-12-23 06:32:18,131 - app.database - ERROR - Database session error: 403: {'error': 'insufficient_credits', 'message': 'No free credits remaining.', 'free_credits_remaining': 0}
2025-12-23 06:32:36,957 - app.api.generation - INFO - ğŸ’³ PAID: Using token 67 - Uses remaining: 2/2
2025-12-23 06:32:37,056 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/8b9edfa9-6a61-4968-a7e4-4a45708f5e5d.jpg
2025-12-23 06:32:37,056 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8b9edfa9-6a61-4968-a7e4-4a45708f5e5d.jpg
2025-12-23 06:32:37,056 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8b9edfa9-6a61-4968-a7e4-4a45708f5e5d.jpg
2025-12-23 06:32:37,065 - app.api.generation - INFO - ğŸ”„ Processing generation 117 - Mode: GenerationMode.COUPLE
2025-12-23 06:32:37,085 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:32:37,085 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:32:37,085 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:32:37,085 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:32:37,177 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5079 characters
2025-12-23 06:32:37,243 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:32:37,243 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:32:46,019 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:32:46,205 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:32:46,206 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/752b30aa-d348-427c-aed5-1ba0bc87b04c.png (size: unknown)
2025-12-23 06:32:46,314 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/82d9f82c-7fc0-446e-82f4-9d0df6ed6386.png
2025-12-23 06:32:46,315 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:32:46,315 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:32:46,318 - app.api.generation - INFO - ğŸ’³ Token 67 used. Remaining uses: 1/2
2025-12-23 06:32:46,322 - app.api.generation - INFO - âœ… Generation 117 completed successfully
2025-12-23 06:33:40,991 - app.api.generation - INFO - ğŸ’³ PAID: Using token 68 - Uses remaining: 2/2
2025-12-23 06:33:41,109 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/cc252ba1-a67d-4891-ad14-6c7997ab1544.jpg
2025-12-23 06:33:41,109 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/cc252ba1-a67d-4891-ad14-6c7997ab1544.jpg
2025-12-23 06:33:41,109 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/cc252ba1-a67d-4891-ad14-6c7997ab1544.jpg
2025-12-23 06:33:41,118 - app.api.generation - INFO - ğŸ”„ Processing generation 118 - Mode: GenerationMode.COUPLE
2025-12-23 06:33:41,139 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:33:41,139 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:33:41,139 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:33:41,139 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:33:41,258 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5042 characters
2025-12-23 06:33:41,321 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:33:41,321 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:33:49,529 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:33:49,718 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:33:49,720 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/1a2f3ee8-aa17-4f64-b92c-75813bd91e7a.png (size: unknown)
2025-12-23 06:33:49,901 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/75efedf2-e2b6-4b51-98cf-362521c26017.png
2025-12-23 06:33:49,901 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:33:49,902 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:33:49,905 - app.api.generation - INFO - ğŸ’³ Token 68 used. Remaining uses: 1/2
2025-12-23 06:33:49,908 - app.api.generation - INFO - âœ… Generation 118 completed successfully
2025-12-23 06:35:47,640 - app.services.payment_service - INFO - Payment token created: 73 for user 30, template 19 (2 uses)
2025-12-23 06:35:47,640 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 73
2025-12-23 06:35:47,643 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 73 for user 30
2025-12-23 06:35:47,905 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 73
2025-12-23 06:35:47,907 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 73
2025-12-23 06:35:47,907 - app.api.payment - INFO - âœ… Payment verified: Token 73
2025-12-23 06:35:57,105 - app.api.generation - INFO - ğŸ’³ PAID: Using token 73 - Uses remaining: 2/2
2025-12-23 06:35:57,245 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/1e98ebc1-1db6-4f8e-b019-aad17cf099f0.jpg
2025-12-23 06:35:57,245 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/1e98ebc1-1db6-4f8e-b019-aad17cf099f0.jpg
2025-12-23 06:35:57,245 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/1e98ebc1-1db6-4f8e-b019-aad17cf099f0.jpg
2025-12-23 06:35:57,255 - app.api.generation - INFO - ğŸ”„ Processing generation 119 - Mode: GenerationMode.COUPLE
2025-12-23 06:35:57,279 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:35:57,279 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:35:57,279 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:35:57,279 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:35:57,368 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5035 characters
2025-12-23 06:35:57,432 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:35:57,432 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:36:05,551 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:36:05,742 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:36:05,743 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/be4916fd-ccdc-48fb-8bbb-56af2d021cfa.png (size: unknown)
2025-12-23 06:36:05,869 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/a1d50623-db7f-4a50-b7af-8f4b5b16c9e3.png
2025-12-23 06:36:05,869 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:36:05,869 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:36:05,873 - app.api.generation - INFO - ğŸ’³ Token 73 used. Remaining uses: 1/2
2025-12-23 06:36:05,876 - app.api.generation - INFO - âœ… Generation 119 completed successfully
2025-12-23 06:36:18,748 - app.services.payment_service - INFO - Payment token created: 74 for user 29, template 30 (2 uses)
2025-12-23 06:36:18,748 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 74
2025-12-23 06:36:18,750 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 74 for user 29
2025-12-23 06:36:19,763 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 74
2025-12-23 06:36:19,766 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 74
2025-12-23 06:36:19,766 - app.api.payment - INFO - âœ… Payment verified: Token 74
2025-12-23 06:36:21,225 - app.services.payment_service - INFO - Payment token created: 75 for user 32, template 57 (2 uses)
2025-12-23 06:36:21,225 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 75
2025-12-23 06:36:21,227 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 75 for user 32
2025-12-23 06:36:21,838 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 75
2025-12-23 06:36:21,840 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 75
2025-12-23 06:36:21,841 - app.api.payment - INFO - âœ… Payment verified: Token 75
2025-12-23 06:36:31,540 - app.services.payment_service - INFO - Payment token created: 76 for user 30, template 31 (2 uses)
2025-12-23 06:36:31,540 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 76
2025-12-23 06:36:31,543 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 76 for user 30
2025-12-23 06:36:31,870 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 76
2025-12-23 06:36:31,873 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 76
2025-12-23 06:36:31,873 - app.api.payment - INFO - âœ… Payment verified: Token 76
2025-12-23 06:36:36,108 - app.api.generation - INFO - ğŸ’³ PAID: Using token 74 - Uses remaining: 2/2
2025-12-23 06:36:36,202 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/82e56756-10dc-46c1-bd77-36cbd8bc3ff2.jpg
2025-12-23 06:36:36,202 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/82e56756-10dc-46c1-bd77-36cbd8bc3ff2.jpg
2025-12-23 06:36:36,202 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/82e56756-10dc-46c1-bd77-36cbd8bc3ff2.jpg
2025-12-23 06:36:36,211 - app.api.generation - INFO - ğŸ”„ Processing generation 120 - Mode: GenerationMode.COUPLE
2025-12-23 06:36:36,233 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:36:36,233 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:36:36,233 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:36:36,234 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:36:36,335 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5293 characters
2025-12-23 06:36:36,399 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:36:36,399 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:36:44,569 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:36:44,754 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:36:44,756 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/72a45ec4-05c2-4dbb-a8e4-1b744128e3af.png (size: unknown)
2025-12-23 06:36:44,896 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/36c1f1ca-e129-4cc2-82fc-48b526851399.png
2025-12-23 06:36:44,896 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:36:44,897 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:36:44,900 - app.api.generation - INFO - ğŸ’³ Token 74 used. Remaining uses: 1/2
2025-12-23 06:36:44,903 - app.api.generation - INFO - âœ… Generation 120 completed successfully
2025-12-23 06:36:45,159 - app.api.generation - INFO - ğŸ’³ PAID: Using token 76 - Uses remaining: 2/2
2025-12-23 06:36:45,197 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/3f949504-236b-4d35-a871-40d9592e1591.jpg
2025-12-23 06:36:45,198 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/3f949504-236b-4d35-a871-40d9592e1591.jpg
2025-12-23 06:36:45,198 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/3f949504-236b-4d35-a871-40d9592e1591.jpg
2025-12-23 06:36:45,206 - app.api.generation - INFO - ğŸ”„ Processing generation 121 - Mode: GenerationMode.COUPLE
2025-12-23 06:36:45,227 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:36:45,227 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:36:45,227 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:36:45,227 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:36:45,309 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5152 characters
2025-12-23 06:36:45,373 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:36:45,373 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:36:53,940 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:36:54,111 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:36:54,112 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/9305ad42-c784-4ff1-b65a-46d163168500.png (size: unknown)
2025-12-23 06:36:54,261 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/fd0d6d92-8de0-47e3-bd9f-7abdeff6a22e.png
2025-12-23 06:36:54,262 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:36:54,262 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:36:54,265 - app.api.generation - INFO - ğŸ’³ Token 76 used. Remaining uses: 1/2
2025-12-23 06:36:54,269 - app.api.generation - INFO - âœ… Generation 121 completed successfully
2025-12-23 06:36:55,104 - app.services.payment_service - INFO - Payment token created: 77 for user 31, template 19 (2 uses)
2025-12-23 06:36:55,104 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 77
2025-12-23 06:36:55,107 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 77 for user 31
2025-12-23 06:36:55,381 - app.services.payment_service - INFO - Payment token created: 78 for user 31, template 19 (2 uses)
2025-12-23 06:36:55,382 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 78
2025-12-23 06:36:55,384 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 78 for user 31
2025-12-23 06:36:55,705 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 77
2025-12-23 06:36:55,708 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 77
2025-12-23 06:36:55,708 - app.api.payment - INFO - âœ… Payment verified: Token 77
2025-12-23 06:36:55,969 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 78
2025-12-23 06:36:55,971 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 78
2025-12-23 06:36:55,971 - app.api.payment - INFO - âœ… Payment verified: Token 78
2025-12-23 06:36:57,506 - app.api.generation - INFO - ğŸ’³ PAID: Using token 75 - Uses remaining: 2/2
2025-12-23 06:36:57,613 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/95f6cb95-42de-462a-bb3a-e11513ba4e39.jpeg
2025-12-23 06:36:57,613 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/95f6cb95-42de-462a-bb3a-e11513ba4e39.jpeg
2025-12-23 06:36:57,613 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/95f6cb95-42de-462a-bb3a-e11513ba4e39.jpeg
2025-12-23 06:36:57,622 - app.api.generation - INFO - ğŸ”„ Processing generation 122 - Mode: GenerationMode.COUPLE
2025-12-23 06:36:57,643 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:36:57,643 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:36:57,643 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:36:57,644 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:36:57,979 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 4987 characters
2025-12-23 06:36:58,043 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:36:58,043 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:37:09,035 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:37:09,210 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:37:09,211 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/5ed4eb63-46f1-4b10-bd51-c189249e0bf0.png (size: unknown)
2025-12-23 06:37:09,380 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/6e843c4a-6f73-4327-a9ba-48f28eb6de6d.png
2025-12-23 06:37:09,381 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:37:09,381 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:37:09,384 - app.api.generation - INFO - ğŸ’³ Token 75 used. Remaining uses: 1/2
2025-12-23 06:37:09,388 - app.api.generation - INFO - âœ… Generation 122 completed successfully
2025-12-23 06:37:10,005 - app.api.generation - INFO - ğŸ’³ PAID: Using token 77 - Uses remaining: 2/2
2025-12-23 06:37:10,050 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/9d524a52-fa70-4a31-a203-95e9cfa6ecc1.jpg
2025-12-23 06:37:10,050 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9d524a52-fa70-4a31-a203-95e9cfa6ecc1.jpg
2025-12-23 06:37:10,051 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9d524a52-fa70-4a31-a203-95e9cfa6ecc1.jpg
2025-12-23 06:37:10,060 - app.api.generation - INFO - ğŸ”„ Processing generation 123 - Mode: GenerationMode.COUPLE
2025-12-23 06:37:10,081 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:37:10,081 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:37:10,081 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:37:10,081 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:37:10,166 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5035 characters
2025-12-23 06:37:10,229 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:37:10,230 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:37:19,141 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:37:19,321 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:37:19,322 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/712b5751-856d-4189-8990-2b4635bba5c5.png (size: unknown)
2025-12-23 06:37:19,435 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/35cfed47-542b-4f7a-b9c7-192b8dd430a4.png
2025-12-23 06:37:19,435 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:37:19,436 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:37:19,439 - app.api.generation - INFO - ğŸ’³ Token 77 used. Remaining uses: 1/2
2025-12-23 06:37:19,443 - app.api.generation - INFO - âœ… Generation 123 completed successfully
2025-12-23 06:37:51,223 - app.services.payment_service - INFO - Payment token created: 79 for user 29, template 24 (2 uses)
2025-12-23 06:37:51,223 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 79
2025-12-23 06:37:51,226 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 79 for user 29
2025-12-23 06:37:51,600 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 79
2025-12-23 06:37:51,603 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 79
2025-12-23 06:37:51,603 - app.api.payment - INFO - âœ… Payment verified: Token 79
2025-12-23 06:38:10,851 - app.api.generation - INFO - ğŸ’³ PAID: Using token 79 - Uses remaining: 2/2
2025-12-23 06:38:10,966 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/a14220df-0777-4b3c-8a2d-c4a749f5ae29.jpg
2025-12-23 06:38:10,966 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/a14220df-0777-4b3c-8a2d-c4a749f5ae29.jpg
2025-12-23 06:38:10,966 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/a14220df-0777-4b3c-8a2d-c4a749f5ae29.jpg
2025-12-23 06:38:10,975 - app.api.generation - INFO - ğŸ”„ Processing generation 124 - Mode: GenerationMode.COUPLE
2025-12-23 06:38:10,998 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:38:10,998 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:38:10,998 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:38:10,998 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:38:11,113 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5158 characters
2025-12-23 06:38:11,177 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:38:11,177 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:38:19,243 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:38:19,432 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:38:19,434 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/a54bc309-7e2f-46ae-9aca-676d0b246836.png (size: unknown)
2025-12-23 06:38:19,552 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/d217df7f-9ed5-48e7-9edc-0bd3a0a9812e.png
2025-12-23 06:38:19,552 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:38:19,552 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:38:19,556 - app.api.generation - INFO - ğŸ’³ Token 79 used. Remaining uses: 1/2
2025-12-23 06:38:19,559 - app.api.generation - INFO - âœ… Generation 124 completed successfully
2025-12-23 06:38:25,437 - app.api.generation - INFO - ğŸ’³ PAID: Using token 73 - Uses remaining: 1/2
2025-12-23 06:38:25,470 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/afbdf4fd-bef1-48ad-8c35-66364041a25a.jpeg
2025-12-23 06:38:25,470 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/afbdf4fd-bef1-48ad-8c35-66364041a25a.jpeg
2025-12-23 06:38:25,470 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/afbdf4fd-bef1-48ad-8c35-66364041a25a.jpeg
2025-12-23 06:38:25,479 - app.api.generation - INFO - ğŸ”„ Processing generation 125 - Mode: GenerationMode.COUPLE
2025-12-23 06:38:25,500 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:38:25,500 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:38:25,500 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:38:25,500 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:38:25,586 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5035 characters
2025-12-23 06:38:25,649 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:38:25,649 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:38:33,354 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:38:33,530 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:38:33,532 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/0dbeae46-62c6-4a01-ab61-fe3c8ca9c5cf.png (size: unknown)
2025-12-23 06:38:33,697 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/8851889a-acf9-4021-80c9-8e6642f3df49.png
2025-12-23 06:38:33,697 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:38:33,697 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:38:33,701 - app.api.generation - INFO - ğŸ’³ Token 73 used. Remaining uses: 0/2
2025-12-23 06:38:33,705 - app.api.generation - INFO - âœ… Generation 125 completed successfully
2025-12-23 06:38:54,170 - app.services.payment_service - INFO - Payment token created: 80 for user 32, template 54 (2 uses)
2025-12-23 06:38:54,170 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 80
2025-12-23 06:38:54,173 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 80 for user 32
2025-12-23 06:38:54,414 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 80
2025-12-23 06:38:54,416 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 80
2025-12-23 06:38:54,416 - app.api.payment - INFO - âœ… Payment verified: Token 80
2025-12-23 06:39:04,173 - app.services.payment_service - INFO - Payment token created: 81 for user 31, template 47 (2 uses)
2025-12-23 06:39:04,173 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 81
2025-12-23 06:39:04,175 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 81 for user 31
2025-12-23 06:39:04,438 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 81
2025-12-23 06:39:04,441 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 81
2025-12-23 06:39:04,441 - app.api.payment - INFO - âœ… Payment verified: Token 81
2025-12-23 06:39:04,776 - app.api.generation - INFO - ğŸ’³ PAID: Using token 76 - Uses remaining: 1/2
2025-12-23 06:39:04,905 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/de0b6b67-1a2f-4ce7-aff8-578798450da9.jpeg
2025-12-23 06:39:04,905 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/de0b6b67-1a2f-4ce7-aff8-578798450da9.jpeg
2025-12-23 06:39:04,905 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/de0b6b67-1a2f-4ce7-aff8-578798450da9.jpeg
2025-12-23 06:39:04,915 - app.api.generation - INFO - ğŸ”„ Processing generation 126 - Mode: GenerationMode.COUPLE
2025-12-23 06:39:04,935 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:39:04,935 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:39:04,935 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:39:04,936 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:39:05,023 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5152 characters
2025-12-23 06:39:05,087 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:39:05,087 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:39:12,876 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:39:13,066 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:39:13,068 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/5a985186-e257-4fb3-8167-dc5fb656bbac.png (size: unknown)
2025-12-23 06:39:13,207 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/e440fb63-488b-49da-81d0-7c893fd972f6.png
2025-12-23 06:39:13,207 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:39:13,207 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:39:13,210 - app.api.generation - INFO - ğŸ’³ Token 76 used. Remaining uses: 0/2
2025-12-23 06:39:13,214 - app.api.generation - INFO - âœ… Generation 126 completed successfully
2025-12-23 06:39:13,499 - app.api.generation - INFO - ğŸ’³ PAID: Using token 81 - Uses remaining: 2/2
2025-12-23 06:39:13,533 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/af5014cd-45ac-451e-8f53-9dbfeb3848dd.jpg
2025-12-23 06:39:13,533 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/af5014cd-45ac-451e-8f53-9dbfeb3848dd.jpg
2025-12-23 06:39:13,533 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/af5014cd-45ac-451e-8f53-9dbfeb3848dd.jpg
2025-12-23 06:39:13,541 - app.api.generation - INFO - ğŸ”„ Processing generation 127 - Mode: GenerationMode.COUPLE
2025-12-23 06:39:13,562 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:39:13,562 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:39:13,563 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:39:13,563 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:39:13,650 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5292 characters
2025-12-23 06:39:13,713 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:39:13,714 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:39:22,941 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:39:23,126 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:39:23,128 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/b3bc2999-e032-4336-b3f2-064f21dd8db1.png (size: unknown)
2025-12-23 06:39:23,238 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/6ac193f1-e5bc-4103-9393-d47b3a0209ce.png
2025-12-23 06:39:23,239 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:39:23,239 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:39:23,242 - app.api.generation - INFO - ğŸ’³ Token 81 used. Remaining uses: 1/2
2025-12-23 06:39:23,246 - app.api.generation - INFO - âœ… Generation 127 completed successfully
2025-12-23 06:39:25,726 - app.api.generation - INFO - ğŸ’³ PAID: Using token 80 - Uses remaining: 2/2
2025-12-23 06:39:25,813 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/9eb9f629-ae1c-44ce-905b-c867d38b4826.jpeg
2025-12-23 06:39:25,813 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9eb9f629-ae1c-44ce-905b-c867d38b4826.jpeg
2025-12-23 06:39:25,813 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9eb9f629-ae1c-44ce-905b-c867d38b4826.jpeg
2025-12-23 06:39:25,822 - app.api.generation - INFO - ğŸ”„ Processing generation 128 - Mode: GenerationMode.COUPLE
2025-12-23 06:39:25,844 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:39:25,844 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:39:25,844 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:39:25,844 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:39:26,194 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5507 characters
2025-12-23 06:39:26,257 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:39:26,257 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:39:35,078 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:39:35,294 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:39:35,296 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/682043bb-8ba1-4090-aada-30f5d7cb59cc.png (size: unknown)
2025-12-23 06:39:35,417 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/66c99672-5165-4416-b8db-3f9b74dac7a5.png
2025-12-23 06:39:35,418 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:39:35,418 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:39:35,421 - app.api.generation - INFO - ğŸ’³ Token 80 used. Remaining uses: 1/2
2025-12-23 06:39:35,425 - app.api.generation - INFO - âœ… Generation 128 completed successfully
2025-12-23 06:40:07,465 - app.services.payment_service - INFO - Payment token created: 82 for user 30, template 40 (2 uses)
2025-12-23 06:40:07,465 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 82
2025-12-23 06:40:07,467 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 82 for user 30
2025-12-23 06:40:07,793 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 82
2025-12-23 06:40:07,796 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 82
2025-12-23 06:40:07,796 - app.api.payment - INFO - âœ… Payment verified: Token 82
2025-12-23 06:40:17,188 - app.api.generation - INFO - ğŸ’³ PAID: Using token 82 - Uses remaining: 2/2
2025-12-23 06:40:17,292 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/8d304630-1676-449d-80ef-9f1508dd6c6a.jpeg
2025-12-23 06:40:17,292 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8d304630-1676-449d-80ef-9f1508dd6c6a.jpeg
2025-12-23 06:40:17,292 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8d304630-1676-449d-80ef-9f1508dd6c6a.jpeg
2025-12-23 06:40:17,301 - app.api.generation - INFO - ğŸ”„ Processing generation 129 - Mode: GenerationMode.COUPLE
2025-12-23 06:40:17,323 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:40:17,323 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:40:17,323 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:40:17,323 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:40:17,414 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 4997 characters
2025-12-23 06:40:17,478 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:40:17,478 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:40:25,656 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:40:25,846 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:40:25,847 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/c1e327a9-80a1-4efb-ade4-f8e2acfa127d.png (size: unknown)
2025-12-23 06:40:25,958 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/749f51df-f68f-49a0-922d-e530047f53ce.png
2025-12-23 06:40:25,959 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:40:25,959 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:40:25,962 - app.api.generation - INFO - ğŸ’³ Token 82 used. Remaining uses: 1/2
2025-12-23 06:40:25,967 - app.api.generation - INFO - âœ… Generation 129 completed successfully
2025-12-23 06:40:41,560 - app.database - ERROR - Database session error: 401: Invalid authentication credentials
2025-12-23 06:40:41,702 - app.database - ERROR - Database session error: 401: Invalid authentication credentials
2025-12-23 06:40:48,556 - app.services.payment_service - INFO - Payment token created: 83 for user 30, template 60 (2 uses)
2025-12-23 06:40:48,556 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 83
2025-12-23 06:40:48,559 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 83 for user 30
2025-12-23 06:40:49,071 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 83
2025-12-23 06:40:49,073 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 83
2025-12-23 06:40:49,073 - app.api.payment - INFO - âœ… Payment verified: Token 83
2025-12-23 06:40:52,073 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:40:52,125 - app.services.auth_service - INFO - Google token verified for email: vikaspurohit.0.3.4.5.6@gmail.com
2025-12-23 06:40:52,133 - app.services.auth_service - INFO - Existing Google user logged in: vikaspurohit.0.3.4.5.6@gmail.com
2025-12-23 06:40:52,133 - app.services.auth_service - INFO - Access token created for user: vikaspurohit.0.3.4.5.6@gmail.com
2025-12-23 06:40:56,575 - app.services.payment_service - INFO - Payment token created: 84 for user 32, template 5 (2 uses)
2025-12-23 06:40:56,575 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 84
2025-12-23 06:40:56,577 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 84 for user 32
2025-12-23 06:40:56,899 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 84
2025-12-23 06:40:56,902 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 84
2025-12-23 06:40:56,902 - app.api.payment - INFO - âœ… Payment verified: Token 84
2025-12-23 06:40:57,572 - app.api.generation - INFO - ğŸ’³ PAID: Using token 83 - Uses remaining: 2/2
2025-12-23 06:40:57,672 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/2bd5c208-1197-4d31-9238-b37688bd8c3c.jpeg
2025-12-23 06:40:57,672 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/2bd5c208-1197-4d31-9238-b37688bd8c3c.jpeg
2025-12-23 06:40:57,672 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/2bd5c208-1197-4d31-9238-b37688bd8c3c.jpeg
2025-12-23 06:40:57,681 - app.api.generation - INFO - ğŸ”„ Processing generation 130 - Mode: GenerationMode.COUPLE
2025-12-23 06:40:57,703 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:40:57,703 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:40:57,703 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:40:57,703 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:40:57,836 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5059 characters
2025-12-23 06:40:57,900 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:40:57,900 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:41:08,445 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:41:08,645 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:41:08,647 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/ed14f44f-fc15-4466-be02-b8630997cb6e.png (size: unknown)
2025-12-23 06:41:08,763 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/5e9faac3-82ac-413a-bd80-a90a590ec46f.png
2025-12-23 06:41:08,763 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:41:08,764 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:41:08,767 - app.api.generation - INFO - ğŸ’³ Token 83 used. Remaining uses: 1/2
2025-12-23 06:41:08,771 - app.api.generation - INFO - âœ… Generation 130 completed successfully
2025-12-23 06:41:09,839 - app.services.auth_service - WARNING - Login attempt for non-existent user: admin@gmail.com
2025-12-23 06:41:09,839 - app.database - ERROR - Database session error: 401: Incorrect email or password
2025-12-23 06:41:12,752 - app.services.payment_service - INFO - Payment token created: 85 for user 29, template 17 (2 uses)
2025-12-23 06:41:12,753 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 85
2025-12-23 06:41:12,755 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 85 for user 29
2025-12-23 06:41:13,094 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 85
2025-12-23 06:41:13,097 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 85
2025-12-23 06:41:13,097 - app.api.payment - INFO - âœ… Payment verified: Token 85
2025-12-23 06:41:24,019 - app.database - ERROR - Database session error: 1 validation error:
  {'type': 'value_error', 'loc': ('body', 'email'), 'msg': 'value is not a valid email address: The part after the @-sign is not valid. It should have a period.', 'input': 'admin@weddingplannerai', 'ctx': {'reason': 'The part after the @-sign is not valid. It should have a period.'}}

  File "/home/ubuntu/wedding_planner_production/app/api/admin.py", line 21, in admin_login
    POST /api/admin/login
2025-12-23 06:41:26,630 - app.services.payment_service - INFO - Payment token created: 86 for user 31, template 56 (2 uses)
2025-12-23 06:41:26,630 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 86
2025-12-23 06:41:26,632 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 86 for user 31
2025-12-23 06:41:27,169 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 86
2025-12-23 06:41:27,172 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 86
2025-12-23 06:41:27,172 - app.api.payment - INFO - âœ… Payment verified: Token 86
2025-12-23 06:41:35,560 - app.api.generation - INFO - ğŸ’³ PAID: Using token 85 - Uses remaining: 2/2
2025-12-23 06:41:35,655 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/6eda7fea-6b5a-4699-9592-fd788e6cfe1d.jpg
2025-12-23 06:41:35,655 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6eda7fea-6b5a-4699-9592-fd788e6cfe1d.jpg
2025-12-23 06:41:35,655 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6eda7fea-6b5a-4699-9592-fd788e6cfe1d.jpg
2025-12-23 06:41:35,701 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/70d7dbad-f318-4994-89de-a1cb67c461ac.jpg
2025-12-23 06:41:35,701 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/70d7dbad-f318-4994-89de-a1cb67c461ac.jpg
2025-12-23 06:41:35,701 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/70d7dbad-f318-4994-89de-a1cb67c461ac.jpg
2025-12-23 06:41:35,701 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:41:35,710 - app.api.generation - INFO - ğŸ”„ Processing generation 131 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:41:35,741 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:41:35,741 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:41:35,741 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:41:35,741 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:41:35,942 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5416 characters
2025-12-23 06:41:36,006 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:41:36,006 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:41:46,998 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:41:47,187 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:41:47,189 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/ace4d29b-690b-43cd-97da-d62ad9e66063.png (size: unknown)
2025-12-23 06:41:47,335 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/c39fb0b6-d02c-4cce-b8df-c3ec82c93441.png
2025-12-23 06:41:47,336 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:41:47,336 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:41:47,339 - app.api.generation - INFO - ğŸ’³ Token 85 used. Remaining uses: 1/2
2025-12-23 06:41:47,343 - app.api.generation - INFO - âœ… Generation 131 completed successfully
2025-12-23 06:41:52,215 - app.services.payment_service - INFO - Payment token created: 87 for user 31, template 56 (2 uses)
2025-12-23 06:41:52,215 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 87
2025-12-23 06:41:52,217 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 87 for user 31
2025-12-23 06:41:52,506 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 87
2025-12-23 06:41:52,508 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 87
2025-12-23 06:41:52,509 - app.api.payment - INFO - âœ… Payment verified: Token 87
2025-12-23 06:42:00,651 - app.services.payment_service - INFO - Payment token created: 88 for user 30, template 35 (2 uses)
2025-12-23 06:42:00,651 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 88
2025-12-23 06:42:00,654 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 88 for user 30
2025-12-23 06:42:00,970 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 88
2025-12-23 06:42:00,972 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 88
2025-12-23 06:42:00,973 - app.api.payment - INFO - âœ… Payment verified: Token 88
2025-12-23 06:42:02,416 - app.api.generation - INFO - ğŸ’³ PAID: Using token 87 - Uses remaining: 2/2
2025-12-23 06:42:02,577 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/7112c078-640d-4334-baaa-dada3153ef9a.jpg
2025-12-23 06:42:02,577 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7112c078-640d-4334-baaa-dada3153ef9a.jpg
2025-12-23 06:42:02,577 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7112c078-640d-4334-baaa-dada3153ef9a.jpg
2025-12-23 06:42:02,587 - app.api.generation - INFO - ğŸ”„ Processing generation 132 - Mode: GenerationMode.COUPLE
2025-12-23 06:42:02,611 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:42:02,611 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:42:02,611 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:42:02,611 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:42:02,819 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5082 characters
2025-12-23 06:42:02,954 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:42:02,954 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:42:13,223 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:42:13,412 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:42:13,414 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/60fd022e-5f50-4a7f-a14c-7410623042b3.png (size: unknown)
2025-12-23 06:42:13,544 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/cebe31be-7dca-43b3-a17f-6103f3fce026.png
2025-12-23 06:42:13,545 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:42:13,545 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:42:13,548 - app.api.generation - INFO - ğŸ’³ Token 87 used. Remaining uses: 1/2
2025-12-23 06:42:13,552 - app.api.generation - INFO - âœ… Generation 132 completed successfully
2025-12-23 06:42:13,570 - app.api.generation - INFO - ğŸ’³ PAID: Using token 84 - Uses remaining: 2/2
2025-12-23 06:42:13,680 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/350a87ce-bb3f-4933-bcc7-6d6d9d6cb6a6.jpeg
2025-12-23 06:42:13,681 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/350a87ce-bb3f-4933-bcc7-6d6d9d6cb6a6.jpeg
2025-12-23 06:42:13,681 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/350a87ce-bb3f-4933-bcc7-6d6d9d6cb6a6.jpeg
2025-12-23 06:42:13,689 - app.api.generation - INFO - ğŸ”„ Processing generation 133 - Mode: GenerationMode.COUPLE
2025-12-23 06:42:13,711 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:42:13,711 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:42:13,711 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:42:13,711 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:42:14,044 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5336 characters
2025-12-23 06:42:14,109 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:42:14,110 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:42:22,153 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:42:22,358 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:42:22,360 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/64c601ba-1f4c-457e-861d-d9fcb8b0b5ce.png (size: unknown)
2025-12-23 06:42:22,529 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/266cfe4f-cc91-4d86-98d4-0da5091e2d8e.png
2025-12-23 06:42:22,530 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:42:22,530 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:42:22,534 - app.api.generation - INFO - ğŸ’³ Token 84 used. Remaining uses: 1/2
2025-12-23 06:42:22,538 - app.api.generation - INFO - âœ… Generation 133 completed successfully
2025-12-23 06:42:22,558 - app.api.generation - INFO - ğŸ’³ PAID: Using token 88 - Uses remaining: 2/2
2025-12-23 06:42:22,602 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/9defd906-40ce-400f-bd4d-e375c8a4dd40.jpeg
2025-12-23 06:42:22,602 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9defd906-40ce-400f-bd4d-e375c8a4dd40.jpeg
2025-12-23 06:42:22,602 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9defd906-40ce-400f-bd4d-e375c8a4dd40.jpeg
2025-12-23 06:42:22,611 - app.api.generation - INFO - ğŸ”„ Processing generation 134 - Mode: GenerationMode.COUPLE
2025-12-23 06:42:22,633 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:42:22,633 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:42:22,633 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:42:22,634 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:42:22,719 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5033 characters
2025-12-23 06:42:22,783 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:42:22,783 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:42:30,200 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:42:30,382 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:42:30,384 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/b21f5a14-9b24-4fae-abe2-cb605fc036b6.png (size: unknown)
2025-12-23 06:42:30,516 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/2e4d4f42-54de-439f-a498-f27ed6b0f272.png
2025-12-23 06:42:30,516 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:42:30,517 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:42:30,520 - app.api.generation - INFO - ğŸ’³ Token 88 used. Remaining uses: 1/2
2025-12-23 06:42:30,524 - app.api.generation - INFO - âœ… Generation 134 completed successfully
2025-12-23 06:42:35,069 - app.services.auth_service - INFO - User authenticated successfully: admin@weddingai.com
2025-12-23 06:42:35,070 - app.services.auth_service - INFO - Access token created for user: admin@weddingai.com
2025-12-23 06:42:37,254 - app.services.payment_service - INFO - Payment token created: 89 for user 29, template 13 (2 uses)
2025-12-23 06:42:37,254 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 89
2025-12-23 06:42:37,256 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 89 for user 29
2025-12-23 06:42:37,834 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 89
2025-12-23 06:42:37,837 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 89
2025-12-23 06:42:37,837 - app.api.payment - INFO - âœ… Payment verified: Token 89
2025-12-23 06:42:55,471 - app.api.generation - INFO - ğŸ’³ PAID: Using token 89 - Uses remaining: 2/2
2025-12-23 06:42:55,583 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/5e114725-1580-4f35-b8d8-3aca0517bbcc.jpg
2025-12-23 06:42:55,583 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/5e114725-1580-4f35-b8d8-3aca0517bbcc.jpg
2025-12-23 06:42:55,583 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/5e114725-1580-4f35-b8d8-3aca0517bbcc.jpg
2025-12-23 06:42:55,612 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/e5e7d9bc-4ab6-4e1f-a98c-c8fb9b870a17.jpg
2025-12-23 06:42:55,612 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e5e7d9bc-4ab6-4e1f-a98c-c8fb9b870a17.jpg
2025-12-23 06:42:55,613 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e5e7d9bc-4ab6-4e1f-a98c-c8fb9b870a17.jpg
2025-12-23 06:42:55,613 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:42:55,622 - app.api.generation - INFO - ğŸ”„ Processing generation 135 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:42:55,653 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:42:55,653 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:42:55,653 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:42:55,653 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:42:55,855 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5459 characters
2025-12-23 06:42:55,920 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:42:55,920 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:43:06,712 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:43:06,913 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:43:06,915 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/51919d59-6728-4850-ac1e-d67c1afcae6a.png (size: unknown)
2025-12-23 06:43:07,067 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/784782aa-e3aa-432f-8f8b-f25aa5cadca8.png
2025-12-23 06:43:07,067 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:43:07,068 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:43:07,071 - app.api.generation - INFO - ğŸ’³ Token 89 used. Remaining uses: 1/2
2025-12-23 06:43:07,074 - app.api.generation - INFO - âœ… Generation 135 completed successfully
2025-12-23 06:43:07,091 - app.services.payment_service - INFO - Payment token created: 90 for user 30, template 34 (2 uses)
2025-12-23 06:43:07,091 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 90
2025-12-23 06:43:07,094 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 90 for user 30
2025-12-23 06:43:07,105 - app.services.payment_service - INFO - Payment token created: 91 for user 30, template 34 (2 uses)
2025-12-23 06:43:07,105 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 91
2025-12-23 06:43:07,108 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 91 for user 30
2025-12-23 06:43:07,117 - app.services.payment_service - INFO - Payment token created: 92 for user 30, template 34 (2 uses)
2025-12-23 06:43:07,117 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 92
2025-12-23 06:43:07,120 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 92 for user 30
2025-12-23 06:43:07,129 - app.services.payment_service - INFO - Payment token created: 93 for user 30, template 34 (2 uses)
2025-12-23 06:43:07,129 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 93
2025-12-23 06:43:07,131 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 93 for user 30
2025-12-23 06:43:07,340 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 92
2025-12-23 06:43:07,343 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 92
2025-12-23 06:43:07,343 - app.api.payment - INFO - âœ… Payment verified: Token 92
2025-12-23 06:43:07,404 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 90
2025-12-23 06:43:07,406 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 90
2025-12-23 06:43:07,406 - app.api.payment - INFO - âœ… Payment verified: Token 90
2025-12-23 06:43:07,427 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 91
2025-12-23 06:43:07,430 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 91
2025-12-23 06:43:07,430 - app.api.payment - INFO - âœ… Payment verified: Token 91
2025-12-23 06:43:07,451 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 93
2025-12-23 06:43:07,454 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 93
2025-12-23 06:43:07,454 - app.api.payment - INFO - âœ… Payment verified: Token 93
2025-12-23 06:43:15,043 - app.api.generation - INFO - ğŸ’³ PAID: Using token 92 - Uses remaining: 2/2
2025-12-23 06:43:15,159 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/ecdf34f7-9a19-430f-a1f6-b7f711a33108.jpeg
2025-12-23 06:43:15,160 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/ecdf34f7-9a19-430f-a1f6-b7f711a33108.jpeg
2025-12-23 06:43:15,160 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/ecdf34f7-9a19-430f-a1f6-b7f711a33108.jpeg
2025-12-23 06:43:15,168 - app.api.generation - INFO - ğŸ”„ Processing generation 136 - Mode: GenerationMode.COUPLE
2025-12-23 06:43:15,191 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:43:15,191 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:43:15,191 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:43:15,191 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:43:15,276 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5120 characters
2025-12-23 06:43:15,340 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:43:15,340 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:43:25,607 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:43:25,797 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:43:25,799 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/cdc7cc4a-a22b-4417-84e0-e5cb114424c9.png (size: unknown)
2025-12-23 06:43:25,913 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/0ccc7ffe-71d7-4f2e-99c8-ecd7fc5cc7fe.png
2025-12-23 06:43:25,914 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:43:25,914 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:43:25,918 - app.api.generation - INFO - ğŸ’³ Token 92 used. Remaining uses: 1/2
2025-12-23 06:43:25,922 - app.api.generation - INFO - âœ… Generation 136 completed successfully
2025-12-23 06:43:36,472 - app.services.payment_service - INFO - Payment token created: 94 for user 32, template 12 (2 uses)
2025-12-23 06:43:36,472 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 94
2025-12-23 06:43:36,474 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 94 for user 32
2025-12-23 06:43:36,758 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 94
2025-12-23 06:43:36,761 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 94
2025-12-23 06:43:36,761 - app.api.payment - INFO - âœ… Payment verified: Token 94
2025-12-23 06:43:47,692 - app.services.payment_service - INFO - Payment token created: 95 for user 5, template 23 (2 uses)
2025-12-23 06:43:47,692 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 95
2025-12-23 06:43:47,694 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 95 for user 5
2025-12-23 06:43:47,913 - app.services.payment_service - INFO - Payment token created: 96 for user 5, template 23 (2 uses)
2025-12-23 06:43:47,913 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 96
2025-12-23 06:43:47,916 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 96 for user 5
2025-12-23 06:43:48,179 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 95
2025-12-23 06:43:48,182 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 95
2025-12-23 06:43:48,182 - app.api.payment - INFO - âœ… Payment verified: Token 95
2025-12-23 06:43:48,430 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 96
2025-12-23 06:43:48,432 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 96
2025-12-23 06:43:48,432 - app.api.payment - INFO - âœ… Payment verified: Token 96
2025-12-23 06:43:56,795 - app.services.payment_service - INFO - Payment token created: 97 for user 30, template 50 (2 uses)
2025-12-23 06:43:56,795 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 97
2025-12-23 06:43:56,797 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 97 for user 30
2025-12-23 06:43:57,142 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 97
2025-12-23 06:43:57,145 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 97
2025-12-23 06:43:57,145 - app.api.payment - INFO - âœ… Payment verified: Token 97
2025-12-23 06:44:07,605 - app.services.payment_service - INFO - Payment token created: 98 for user 31, template 52 (2 uses)
2025-12-23 06:44:07,605 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 98
2025-12-23 06:44:07,608 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 98 for user 31
2025-12-23 06:44:07,811 - app.api.generation - INFO - ğŸ’³ PAID: Using token 97 - Uses remaining: 2/2
2025-12-23 06:44:07,922 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/945ecaef-5da7-44aa-af47-44a389654da4.jpeg
2025-12-23 06:44:07,922 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/945ecaef-5da7-44aa-af47-44a389654da4.jpeg
2025-12-23 06:44:07,922 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/945ecaef-5da7-44aa-af47-44a389654da4.jpeg
2025-12-23 06:44:07,931 - app.api.generation - INFO - ğŸ”„ Processing generation 137 - Mode: GenerationMode.COUPLE
2025-12-23 06:44:07,952 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:44:07,952 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:44:07,952 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:44:07,952 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:44:08,036 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5066 characters
2025-12-23 06:44:08,100 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:44:08,100 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:44:17,556 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:44:17,741 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:44:17,742 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/98884221-abfb-4ad9-abfa-664931f1df1f.png (size: unknown)
2025-12-23 06:44:17,872 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/d23e0208-d0e8-4717-9c1e-ff0f2878ed11.png
2025-12-23 06:44:17,872 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:44:17,872 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:44:17,876 - app.api.generation - INFO - ğŸ’³ Token 97 used. Remaining uses: 1/2
2025-12-23 06:44:17,880 - app.api.generation - INFO - âœ… Generation 137 completed successfully
2025-12-23 06:44:17,891 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 98
2025-12-23 06:44:17,894 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 98
2025-12-23 06:44:17,894 - app.api.payment - INFO - âœ… Payment verified: Token 98
2025-12-23 06:44:21,095 - app.api.generation - INFO - ğŸ’³ PAID: Using token 94 - Uses remaining: 2/2
2025-12-23 06:44:21,185 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/9ea78c20-4613-4036-a003-b3fe65f7ccd8.jpeg
2025-12-23 06:44:21,186 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9ea78c20-4613-4036-a003-b3fe65f7ccd8.jpeg
2025-12-23 06:44:21,186 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9ea78c20-4613-4036-a003-b3fe65f7ccd8.jpeg
2025-12-23 06:44:21,194 - app.api.generation - INFO - ğŸ”„ Processing generation 138 - Mode: GenerationMode.COUPLE
2025-12-23 06:44:21,212 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:44:21,213 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:44:21,213 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:44:21,213 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:44:21,528 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5301 characters
2025-12-23 06:44:21,593 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:44:21,593 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:44:33,535 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:44:33,727 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:44:33,729 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/5ad4de82-48c1-4afc-a478-ef63f23a351f.png (size: unknown)
2025-12-23 06:44:33,871 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/d01cc0b1-68e3-454e-afe2-c6867d6a5f46.png
2025-12-23 06:44:33,871 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:44:33,872 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:44:33,875 - app.api.generation - INFO - ğŸ’³ Token 94 used. Remaining uses: 1/2
2025-12-23 06:44:33,878 - app.api.generation - INFO - âœ… Generation 138 completed successfully
2025-12-23 06:44:33,927 - app.services.payment_service - INFO - Payment token created: 99 for user 29, template 23 (2 uses)
2025-12-23 06:44:33,927 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 99
2025-12-23 06:44:33,930 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 99 for user 29
2025-12-23 06:44:34,612 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 99
2025-12-23 06:44:34,615 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 99
2025-12-23 06:44:34,615 - app.api.payment - INFO - âœ… Payment verified: Token 99
2025-12-23 06:44:34,809 - app.api.generation - INFO - ğŸ’³ PAID: Using token 98 - Uses remaining: 2/2
2025-12-23 06:44:34,858 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/7ba53768-5fd2-44d3-8925-0dc072968256.jpg
2025-12-23 06:44:34,859 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7ba53768-5fd2-44d3-8925-0dc072968256.jpg
2025-12-23 06:44:34,859 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7ba53768-5fd2-44d3-8925-0dc072968256.jpg
2025-12-23 06:44:34,868 - app.api.generation - INFO - ğŸ”„ Processing generation 139 - Mode: GenerationMode.COUPLE
2025-12-23 06:44:34,888 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:44:34,888 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:44:34,888 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:44:34,888 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:44:34,976 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5618 characters
2025-12-23 06:44:35,040 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:44:35,040 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:44:48,614 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:44:48,799 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:44:48,800 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/fe25f657-5e7e-453b-aae4-1c540dcf57c7.png (size: unknown)
2025-12-23 06:44:48,939 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/67fc70a1-38d4-43da-9476-182869a2d48d.png
2025-12-23 06:44:48,940 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:44:48,940 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:44:48,943 - app.api.generation - INFO - ğŸ’³ Token 98 used. Remaining uses: 1/2
2025-12-23 06:44:48,947 - app.api.generation - INFO - âœ… Generation 139 completed successfully
2025-12-23 06:44:48,999 - app.api.generation - INFO - ğŸ’³ PAID: Using token 95 - Uses remaining: 2/2
2025-12-23 06:44:49,049 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/4716f9f2-c5a6-45f4-b421-592153406c3d.jpg
2025-12-23 06:44:49,049 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/4716f9f2-c5a6-45f4-b421-592153406c3d.jpg
2025-12-23 06:44:49,050 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/4716f9f2-c5a6-45f4-b421-592153406c3d.jpg
2025-12-23 06:44:49,059 - app.api.generation - INFO - ğŸ”„ Processing generation 140 - Mode: GenerationMode.COUPLE
2025-12-23 06:44:49,079 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:44:49,079 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:44:49,079 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:44:49,079 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:44:49,173 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5108 characters
2025-12-23 06:44:49,238 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:44:49,238 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:44:56,778 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:44:56,987 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:44:56,989 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/3421ca5f-0a78-4f38-a6fa-93204b3e7dec.png (size: unknown)
2025-12-23 06:44:57,135 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/086972e9-156a-43c1-9fed-79ef8a1d0073.png
2025-12-23 06:44:57,136 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:44:57,136 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:44:57,139 - app.api.generation - INFO - ğŸ’³ Token 95 used. Remaining uses: 1/2
2025-12-23 06:44:57,143 - app.api.generation - INFO - âœ… Generation 140 completed successfully
2025-12-23 06:44:57,194 - app.services.payment_service - INFO - Payment token created: 100 for user 29, template 23 (2 uses)
2025-12-23 06:44:57,194 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 100
2025-12-23 06:44:57,196 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 100 for user 29
2025-12-23 06:44:57,206 - app.services.payment_service - INFO - Payment token created: 101 for user 29, template 23 (2 uses)
2025-12-23 06:44:57,206 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 101
2025-12-23 06:44:57,208 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 101 for user 29
2025-12-23 06:44:57,220 - app.services.payment_service - INFO - Payment token created: 102 for user 29, template 23 (2 uses)
2025-12-23 06:44:57,220 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 102
2025-12-23 06:44:57,222 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 102 for user 29
2025-12-23 06:44:57,233 - app.services.payment_service - INFO - Payment token created: 103 for user 29, template 23 (2 uses)
2025-12-23 06:44:57,233 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 103
2025-12-23 06:44:57,236 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 103 for user 29
2025-12-23 06:44:57,262 - app.services.payment_service - INFO - Payment token created: 104 for user 29, template 14 (2 uses)
2025-12-23 06:44:57,262 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 104
2025-12-23 06:44:57,264 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 104 for user 29
2025-12-23 06:44:57,548 - app.services.payment_service - INFO - Payment token created: 105 for user 29, template 14 (2 uses)
2025-12-23 06:44:57,548 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 105
2025-12-23 06:44:57,550 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 105 for user 29
2025-12-23 06:44:57,558 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 102
2025-12-23 06:44:57,561 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 102
2025-12-23 06:44:57,561 - app.api.payment - INFO - âœ… Payment verified: Token 102
2025-12-23 06:44:57,566 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 101
2025-12-23 06:44:57,569 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 101
2025-12-23 06:44:57,569 - app.api.payment - INFO - âœ… Payment verified: Token 101
2025-12-23 06:44:57,574 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 103
2025-12-23 06:44:57,576 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 103
2025-12-23 06:44:57,576 - app.api.payment - INFO - âœ… Payment verified: Token 103
2025-12-23 06:44:57,582 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 100
2025-12-23 06:44:57,585 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 100
2025-12-23 06:44:57,585 - app.api.payment - INFO - âœ… Payment verified: Token 100
2025-12-23 06:44:57,591 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 104
2025-12-23 06:44:57,593 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 104
2025-12-23 06:44:57,593 - app.api.payment - INFO - âœ… Payment verified: Token 104
2025-12-23 06:44:57,808 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 105
2025-12-23 06:44:57,810 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 105
2025-12-23 06:44:57,811 - app.api.payment - INFO - âœ… Payment verified: Token 105
2025-12-23 06:45:11,835 - app.services.payment_service - INFO - Payment token created: 106 for user 30, template 58 (2 uses)
2025-12-23 06:45:11,835 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 106
2025-12-23 06:45:11,838 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 106 for user 30
2025-12-23 06:45:11,936 - app.api.generation - INFO - ğŸ’³ PAID: Using token 104 - Uses remaining: 2/2
2025-12-23 06:45:12,034 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/1c1cbac1-0714-4f38-ab87-249c39c56481.jpg
2025-12-23 06:45:12,034 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/1c1cbac1-0714-4f38-ab87-249c39c56481.jpg
2025-12-23 06:45:12,034 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/1c1cbac1-0714-4f38-ab87-249c39c56481.jpg
2025-12-23 06:45:12,102 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/9c085534-10aa-40c0-aa9d-55b21b3fcff0.jpg
2025-12-23 06:45:12,102 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9c085534-10aa-40c0-aa9d-55b21b3fcff0.jpg
2025-12-23 06:45:12,102 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9c085534-10aa-40c0-aa9d-55b21b3fcff0.jpg
2025-12-23 06:45:12,102 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:45:12,111 - app.api.generation - INFO - ğŸ”„ Processing generation 141 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:45:12,144 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:45:12,144 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:45:12,144 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:45:12,144 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:45:12,356 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5457 characters
2025-12-23 06:45:12,420 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:45:12,420 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:45:21,548 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:45:21,734 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:45:21,736 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/f2b6f463-996b-46ce-84ec-6d2195f11472.png (size: unknown)
2025-12-23 06:45:21,874 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/7799babd-5e56-4c5a-a2ba-8027b5cad63a.png
2025-12-23 06:45:21,875 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:45:21,875 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:45:21,878 - app.api.generation - INFO - ğŸ’³ Token 104 used. Remaining uses: 1/2
2025-12-23 06:45:21,882 - app.api.generation - INFO - âœ… Generation 141 completed successfully
2025-12-23 06:45:21,893 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 106
2025-12-23 06:45:21,895 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 106
2025-12-23 06:45:21,895 - app.api.payment - INFO - âœ… Payment verified: Token 106
2025-12-23 06:45:21,910 - app.services.payment_service - INFO - Payment token created: 107 for user 30, template 58 (2 uses)
2025-12-23 06:45:21,910 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 107
2025-12-23 06:45:21,913 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 107 for user 30
2025-12-23 06:45:21,922 - app.services.payment_service - INFO - Payment token created: 108 for user 30, template 58 (2 uses)
2025-12-23 06:45:21,922 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 108
2025-12-23 06:45:21,925 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 108 for user 30
2025-12-23 06:45:22,169 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 107
2025-12-23 06:45:22,172 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 107
2025-12-23 06:45:22,172 - app.api.payment - INFO - âœ… Payment verified: Token 107
2025-12-23 06:45:22,178 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 108
2025-12-23 06:45:22,181 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 108
2025-12-23 06:45:22,181 - app.api.payment - INFO - âœ… Payment verified: Token 108
2025-12-23 06:45:25,276 - app.api.generation - INFO - ğŸ’³ PAID: Using token 98 - Uses remaining: 1/2
2025-12-23 06:45:25,309 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/50633248-07ff-488b-8b9d-abe5d6918862.jpg
2025-12-23 06:45:25,309 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/50633248-07ff-488b-8b9d-abe5d6918862.jpg
2025-12-23 06:45:25,309 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/50633248-07ff-488b-8b9d-abe5d6918862.jpg
2025-12-23 06:45:25,318 - app.api.generation - INFO - ğŸ”„ Processing generation 142 - Mode: GenerationMode.COUPLE
2025-12-23 06:45:25,340 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:45:25,340 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:45:25,340 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:45:25,340 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:45:25,421 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5618 characters
2025-12-23 06:45:25,484 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:45:25,484 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:45:34,601 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:45:34,781 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:45:34,783 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/88598afa-13b3-4544-9d22-50c1deb5e262.png (size: unknown)
2025-12-23 06:45:34,906 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/db7f8435-4b65-4c22-8d5f-fedf1bcbc392.png
2025-12-23 06:45:34,906 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:45:34,907 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:45:34,910 - app.api.generation - INFO - ğŸ’³ Token 98 used. Remaining uses: 0/2
2025-12-23 06:45:34,913 - app.api.generation - INFO - âœ… Generation 142 completed successfully
2025-12-23 06:45:35,950 - app.api.generation - INFO - ğŸ’³ PAID: Using token 106 - Uses remaining: 2/2
2025-12-23 06:45:35,983 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/57fd9662-2474-4df8-aca2-b273fb27f7e7.jpeg
2025-12-23 06:45:35,983 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/57fd9662-2474-4df8-aca2-b273fb27f7e7.jpeg
2025-12-23 06:45:35,983 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/57fd9662-2474-4df8-aca2-b273fb27f7e7.jpeg
2025-12-23 06:45:35,991 - app.api.generation - INFO - ğŸ”„ Processing generation 143 - Mode: GenerationMode.COUPLE
2025-12-23 06:45:36,014 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:45:36,014 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:45:36,014 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:45:36,015 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:45:36,134 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5864 characters
2025-12-23 06:45:36,198 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:45:36,198 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:45:44,182 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:45:44,370 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:45:44,372 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/066efcc9-fb75-409d-8e16-7bf83f184931.png (size: unknown)
2025-12-23 06:45:44,510 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/ab0677f4-2e8a-4585-89b9-7e14108d5216.png
2025-12-23 06:45:44,511 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:45:44,511 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:45:44,514 - app.api.generation - INFO - ğŸ’³ Token 106 used. Remaining uses: 1/2
2025-12-23 06:45:44,518 - app.api.generation - INFO - âœ… Generation 143 completed successfully
2025-12-23 06:46:20,755 - app.services.payment_service - INFO - Payment token created: 109 for user 30, template 53 (2 uses)
2025-12-23 06:46:20,755 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 109
2025-12-23 06:46:20,758 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 109 for user 30
2025-12-23 06:46:21,011 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 109
2025-12-23 06:46:21,013 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 109
2025-12-23 06:46:21,013 - app.api.payment - INFO - âœ… Payment verified: Token 109
2025-12-23 06:46:21,578 - app.services.payment_service - INFO - Payment token created: 110 for user 31, template 38 (2 uses)
2025-12-23 06:46:21,578 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 110
2025-12-23 06:46:21,580 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 110 for user 31
2025-12-23 06:46:21,826 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 110
2025-12-23 06:46:21,828 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 110
2025-12-23 06:46:21,828 - app.api.payment - INFO - âœ… Payment verified: Token 110
2025-12-23 06:46:24,979 - app.services.payment_service - INFO - Payment token created: 111 for user 32, template 15 (2 uses)
2025-12-23 06:46:24,979 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 111
2025-12-23 06:46:24,981 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 111 for user 32
2025-12-23 06:46:25,706 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 111
2025-12-23 06:46:25,709 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 111
2025-12-23 06:46:25,709 - app.api.payment - INFO - âœ… Payment verified: Token 111
2025-12-23 06:46:25,852 - app.services.payment_service - INFO - Payment token created: 112 for user 32, template 15 (2 uses)
2025-12-23 06:46:25,852 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 112
2025-12-23 06:46:25,855 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 112 for user 32
2025-12-23 06:46:26,088 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 112
2025-12-23 06:46:26,091 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 112
2025-12-23 06:46:26,091 - app.api.payment - INFO - âœ… Payment verified: Token 112
2025-12-23 06:46:26,215 - app.api.generation - INFO - ğŸ’³ PAID: Using token 110 - Uses remaining: 2/2
2025-12-23 06:46:26,323 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/a17f16b4-29c7-42ee-b80c-69ff50340a37.jpg
2025-12-23 06:46:26,323 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/a17f16b4-29c7-42ee-b80c-69ff50340a37.jpg
2025-12-23 06:46:26,323 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/a17f16b4-29c7-42ee-b80c-69ff50340a37.jpg
2025-12-23 06:46:26,333 - app.api.generation - INFO - ğŸ”„ Processing generation 144 - Mode: GenerationMode.COUPLE
2025-12-23 06:46:26,354 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:46:26,354 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:46:26,354 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:46:26,354 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:46:26,436 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5236 characters
2025-12-23 06:46:26,500 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:46:26,500 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:46:35,670 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:46:35,868 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:46:35,870 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/24b9fc6e-9942-4976-b65e-b27f515fdc22.png (size: unknown)
2025-12-23 06:46:36,010 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/dbb85845-492b-4c7e-8a0b-cf8945b003d6.png
2025-12-23 06:46:36,011 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:46:36,011 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:46:36,014 - app.api.generation - INFO - ğŸ’³ Token 110 used. Remaining uses: 1/2
2025-12-23 06:46:36,018 - app.api.generation - INFO - âœ… Generation 144 completed successfully
2025-12-23 06:46:36,887 - app.api.generation - INFO - ğŸ’³ PAID: Using token 109 - Uses remaining: 2/2
2025-12-23 06:46:36,954 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/5c65b949-6342-417b-a625-2351865f7f27.jpeg
2025-12-23 06:46:36,954 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/5c65b949-6342-417b-a625-2351865f7f27.jpeg
2025-12-23 06:46:36,954 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/5c65b949-6342-417b-a625-2351865f7f27.jpeg
2025-12-23 06:46:36,963 - app.api.generation - INFO - ğŸ”„ Processing generation 145 - Mode: GenerationMode.COUPLE
2025-12-23 06:46:36,982 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:46:36,982 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:46:36,982 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:46:36,982 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:46:37,085 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5543 characters
2025-12-23 06:46:37,150 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:46:37,150 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:46:44,859 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:46:45,044 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:46:45,046 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/e895789c-9537-4170-bc9d-366b7a043edd.png (size: unknown)
2025-12-23 06:46:45,195 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/12995a1e-8c18-42d1-8002-7a028e2910f3.png
2025-12-23 06:46:45,196 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:46:45,196 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:46:45,199 - app.api.generation - INFO - ğŸ’³ Token 109 used. Remaining uses: 1/2
2025-12-23 06:46:45,203 - app.api.generation - INFO - âœ… Generation 145 completed successfully
2025-12-23 06:46:54,375 - app.api.generation - INFO - ğŸ’³ PAID: Using token 112 - Uses remaining: 2/2
2025-12-23 06:46:54,524 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/288c5d33-4aa2-4b04-a298-f4e778b96950.jpeg
2025-12-23 06:46:54,524 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/288c5d33-4aa2-4b04-a298-f4e778b96950.jpeg
2025-12-23 06:46:54,524 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/288c5d33-4aa2-4b04-a298-f4e778b96950.jpeg
2025-12-23 06:46:54,535 - app.api.generation - INFO - ğŸ”„ Processing generation 146 - Mode: GenerationMode.COUPLE
2025-12-23 06:46:54,557 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:46:54,557 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:46:54,558 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:46:54,558 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:46:54,971 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5112 characters
2025-12-23 06:46:55,035 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:46:55,036 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:47:05,055 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:47:05,251 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:47:05,253 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/4ac72167-ba4e-4fd6-a20e-18fb89ff9db0.png (size: unknown)
2025-12-23 06:47:05,377 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/66a93a82-b7fa-4305-8c0e-a616e3496834.png
2025-12-23 06:47:05,378 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:47:05,378 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:47:05,381 - app.api.generation - INFO - ğŸ’³ Token 112 used. Remaining uses: 1/2
2025-12-23 06:47:05,385 - app.api.generation - INFO - âœ… Generation 146 completed successfully
2025-12-23 06:47:38,724 - app.services.payment_service - INFO - Payment token created: 113 for user 29, template 37 (2 uses)
2025-12-23 06:47:38,724 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 113
2025-12-23 06:47:38,727 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 113 for user 29
2025-12-23 06:47:39,451 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 113
2025-12-23 06:47:39,453 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 113
2025-12-23 06:47:39,453 - app.api.payment - INFO - âœ… Payment verified: Token 113
2025-12-23 06:47:39,879 - app.services.payment_service - INFO - Payment token created: 114 for user 29, template 37 (2 uses)
2025-12-23 06:47:39,879 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 114
2025-12-23 06:47:39,881 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 114 for user 29
2025-12-23 06:47:40,113 - app.services.payment_service - INFO - Payment token created: 115 for user 29, template 37 (2 uses)
2025-12-23 06:47:40,114 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 115
2025-12-23 06:47:40,116 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 115 for user 29
2025-12-23 06:47:40,201 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 114
2025-12-23 06:47:40,204 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 114
2025-12-23 06:47:40,204 - app.api.payment - INFO - âœ… Payment verified: Token 114
2025-12-23 06:47:40,429 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 115
2025-12-23 06:47:40,431 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 115
2025-12-23 06:47:40,431 - app.api.payment - INFO - âœ… Payment verified: Token 115
2025-12-23 06:47:42,889 - app.api.generation - INFO - ğŸ’³ PAID: Using token 109 - Uses remaining: 1/2
2025-12-23 06:47:42,996 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/85e43f56-dcbb-4b53-8267-4ff0f8599d3b.jpeg
2025-12-23 06:47:42,996 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/85e43f56-dcbb-4b53-8267-4ff0f8599d3b.jpeg
2025-12-23 06:47:42,996 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/85e43f56-dcbb-4b53-8267-4ff0f8599d3b.jpeg
2025-12-23 06:47:43,006 - app.api.generation - INFO - ğŸ”„ Processing generation 147 - Mode: GenerationMode.COUPLE
2025-12-23 06:47:43,026 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:47:43,026 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:47:43,026 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:47:43,026 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:47:43,112 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5543 characters
2025-12-23 06:47:43,176 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:47:43,176 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:47:51,523 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:47:51,722 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:47:51,724 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/a7f97446-6f77-4e25-857d-3cea28c54a52.png (size: unknown)
2025-12-23 06:47:51,875 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/9862856e-a16b-477a-ab24-62e616a23170.png
2025-12-23 06:47:51,876 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:47:51,876 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:47:51,879 - app.api.generation - INFO - ğŸ’³ Token 109 used. Remaining uses: 0/2
2025-12-23 06:47:51,883 - app.api.generation - INFO - âœ… Generation 147 completed successfully
2025-12-23 06:48:16,445 - app.api.generation - INFO - ğŸ’³ PAID: Using token 110 - Uses remaining: 1/2
2025-12-23 06:48:16,569 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/0de50fa8-9941-4487-bee3-822c025c3abe.jpg
2025-12-23 06:48:16,570 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0de50fa8-9941-4487-bee3-822c025c3abe.jpg
2025-12-23 06:48:16,570 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0de50fa8-9941-4487-bee3-822c025c3abe.jpg
2025-12-23 06:48:16,578 - app.api.generation - INFO - ğŸ”„ Processing generation 148 - Mode: GenerationMode.COUPLE
2025-12-23 06:48:16,599 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:48:16,600 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:48:16,600 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:48:16,600 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:48:16,687 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5236 characters
2025-12-23 06:48:16,751 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:48:16,751 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:48:26,567 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:48:26,759 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:48:26,760 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/0cee3f91-34b6-4c06-a644-6f990d7364b9.png (size: unknown)
2025-12-23 06:48:26,878 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/3153cecc-8480-4cbd-b5d9-9c8f6c93a82d.png
2025-12-23 06:48:26,879 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:48:26,879 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:48:26,882 - app.api.generation - INFO - ğŸ’³ Token 110 used. Remaining uses: 0/2
2025-12-23 06:48:26,886 - app.api.generation - INFO - âœ… Generation 148 completed successfully
2025-12-23 06:48:26,898 - app.api.generation - INFO - ğŸ’³ PAID: Using token 114 - Uses remaining: 2/2
2025-12-23 06:48:26,951 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/46552a3b-9f15-4055-91db-ede62cd5fcb5.jpg
2025-12-23 06:48:26,951 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/46552a3b-9f15-4055-91db-ede62cd5fcb5.jpg
2025-12-23 06:48:26,951 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/46552a3b-9f15-4055-91db-ede62cd5fcb5.jpg
2025-12-23 06:48:26,960 - app.api.generation - INFO - ğŸ”„ Processing generation 149 - Mode: GenerationMode.COUPLE
2025-12-23 06:48:26,981 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:48:26,981 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:48:26,981 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:48:26,981 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:48:27,103 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5309 characters
2025-12-23 06:48:27,167 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:48:27,167 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:48:35,542 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:48:35,741 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:48:35,743 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/a0cd0595-6261-47ef-b513-8984782ca94d.png (size: unknown)
2025-12-23 06:48:35,854 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/56e5a62a-d486-4a40-abe5-71b631875458.png
2025-12-23 06:48:35,855 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:48:35,855 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:48:35,858 - app.api.generation - INFO - ğŸ’³ Token 114 used. Remaining uses: 1/2
2025-12-23 06:48:35,862 - app.api.generation - INFO - âœ… Generation 149 completed successfully
2025-12-23 06:48:36,172 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:48:36,227 - app.services.auth_service - INFO - Google token verified for email: patelprisha0320@gmail.com
2025-12-23 06:48:36,233 - app.services.auth_service - INFO - Existing Google user logged in: patelprisha0320@gmail.com
2025-12-23 06:48:36,234 - app.services.auth_service - INFO - Access token created for user: patelprisha0320@gmail.com
2025-12-23 06:48:37,440 - app.api.generation - INFO - ğŸ’³ PAID: Using token 114 - Uses remaining: 1/2
2025-12-23 06:48:37,482 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/f2f79f29-adfa-4b96-8b8e-79bb2946f907.jpg
2025-12-23 06:48:37,482 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/f2f79f29-adfa-4b96-8b8e-79bb2946f907.jpg
2025-12-23 06:48:37,482 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/f2f79f29-adfa-4b96-8b8e-79bb2946f907.jpg
2025-12-23 06:48:37,491 - app.api.generation - INFO - ğŸ”„ Processing generation 150 - Mode: GenerationMode.COUPLE
2025-12-23 06:48:37,512 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:48:37,513 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:48:37,513 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:48:37,513 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:48:37,629 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5309 characters
2025-12-23 06:48:37,693 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:48:37,694 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:48:46,303 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:48:46,509 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:48:46,510 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/460d3832-cfdc-4e74-b4e1-f2bf128e098f.png (size: unknown)
2025-12-23 06:48:46,635 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/86a42584-6d28-47a0-9ba1-067d1588a7cf.png
2025-12-23 06:48:46,636 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:48:46,636 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:48:46,639 - app.api.generation - INFO - ğŸ’³ Token 114 used. Remaining uses: 0/2
2025-12-23 06:48:46,642 - app.api.generation - INFO - âœ… Generation 150 completed successfully
2025-12-23 06:48:53,880 - app.services.payment_service - INFO - Payment token created: 116 for user 30, template 4 (2 uses)
2025-12-23 06:48:53,880 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 116
2025-12-23 06:48:53,883 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 116 for user 30
2025-12-23 06:48:54,140 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 116
2025-12-23 06:48:54,142 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 116
2025-12-23 06:48:54,142 - app.api.payment - INFO - âœ… Payment verified: Token 116
2025-12-23 06:49:01,792 - app.api.generation - INFO - ğŸ’³ PAID: Using token 116 - Uses remaining: 2/2
2025-12-23 06:49:01,931 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/b48fb9df-76df-409b-8465-beff0953a11e.jpeg
2025-12-23 06:49:01,932 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/b48fb9df-76df-409b-8465-beff0953a11e.jpeg
2025-12-23 06:49:01,932 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/b48fb9df-76df-409b-8465-beff0953a11e.jpeg
2025-12-23 06:49:01,951 - app.api.generation - INFO - ğŸ”„ Processing generation 151 - Mode: GenerationMode.COUPLE
2025-12-23 06:49:01,975 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:49:01,977 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:49:01,977 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:49:01,977 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:49:02,082 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5453 characters
2025-12-23 06:49:02,150 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:49:02,150 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:49:12,021 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:49:12,198 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:49:12,199 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/61cf5377-0ef3-44cb-87a1-589e160da20c.png (size: unknown)
2025-12-23 06:49:12,327 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/ebda6343-115f-46cc-9702-8441cc33b06d.png
2025-12-23 06:49:12,328 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:49:12,328 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:49:12,331 - app.api.generation - INFO - ğŸ’³ Token 116 used. Remaining uses: 1/2
2025-12-23 06:49:12,335 - app.api.generation - INFO - âœ… Generation 151 completed successfully
2025-12-23 06:49:12,590 - app.services.payment_service - INFO - Payment token created: 117 for user 31, template 32 (2 uses)
2025-12-23 06:49:12,590 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 117
2025-12-23 06:49:12,592 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 117 for user 31
2025-12-23 06:49:13,112 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 117
2025-12-23 06:49:13,115 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 117
2025-12-23 06:49:13,115 - app.api.payment - INFO - âœ… Payment verified: Token 117
2025-12-23 06:49:13,702 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 4 has 99 credits
2025-12-23 06:49:13,766 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/2661d038-61e0-48b6-85a6-24f399088a58.jpg
2025-12-23 06:49:13,766 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/2661d038-61e0-48b6-85a6-24f399088a58.jpg
2025-12-23 06:49:13,766 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/2661d038-61e0-48b6-85a6-24f399088a58.jpg
2025-12-23 06:49:13,775 - app.api.generation - INFO - ğŸ”„ Processing generation 152 - Mode: GenerationMode.COUPLE
2025-12-23 06:49:13,795 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:49:13,795 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:49:13,795 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:49:13,795 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:49:13,883 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5664 characters
2025-12-23 06:49:13,946 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:49:13,947 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:49:23,202 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:49:23,394 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:49:23,396 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/952ab494-e3d5-49b5-a8b0-a940b2135193.png (size: unknown)
2025-12-23 06:49:23,534 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/691996fe-5ec7-4537-b8b1-3489a5542b43.png
2025-12-23 06:49:23,613 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 06:49:23,613 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 06:49:23,613 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:49:23,613 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 06:49:23,613 - app.services.watermark_service - INFO -   Input: /tmp/tmpzygfvi9i.png
2025-12-23 06:49:23,613 - app.services.watermark_service - INFO -   Output: generated/20f623e1-36c3-4d34-b2a0-ea788e312cb3_watermarked.png
2025-12-23 06:49:23,613 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:49:23,613 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 06:49:23,640 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:49:23,641 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 06:49:23,648 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 06:49:23,648 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 06:49:25,595 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/20f623e1-36c3-4d34-b2a0-ea788e312cb3_watermarked.png
2025-12-23 06:49:25,661 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/738d820e-0435-4643-b21c-96e58f463286.png
2025-12-23 06:49:25,661 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/738d820e-0435-4643-b21c-96e58f463286.png
2025-12-23 06:49:25,662 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:49:25,663 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:49:25,667 - app.api.generation - INFO - âœ… Generation 152 completed successfully
2025-12-23 06:49:26,229 - app.api.generation - INFO - ğŸ’³ PAID: Using token 117 - Uses remaining: 2/2
2025-12-23 06:49:26,262 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/7eecec91-760f-43e2-a5b7-3d46c8797d55.jpg
2025-12-23 06:49:26,262 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7eecec91-760f-43e2-a5b7-3d46c8797d55.jpg
2025-12-23 06:49:26,262 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7eecec91-760f-43e2-a5b7-3d46c8797d55.jpg
2025-12-23 06:49:26,271 - app.api.generation - INFO - ğŸ”„ Processing generation 153 - Mode: GenerationMode.COUPLE
2025-12-23 06:49:26,300 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:49:26,300 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:49:26,300 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:49:26,300 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:49:26,385 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5048 characters
2025-12-23 06:49:26,449 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:49:26,450 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:49:34,022 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:49:34,221 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:49:34,223 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/b0ad2a23-9d3c-4475-8832-17d784eeb6e3.png (size: unknown)
2025-12-23 06:49:34,347 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/7361f2ae-397a-4ecb-bd11-87d31938a711.png
2025-12-23 06:49:34,348 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:49:34,348 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:49:34,351 - app.api.generation - INFO - ğŸ’³ Token 117 used. Remaining uses: 1/2
2025-12-23 06:49:34,355 - app.api.generation - INFO - âœ… Generation 153 completed successfully
2025-12-23 06:54:12,066 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:54:12,121 - app.services.auth_service - INFO - Google token verified for email: equanimoustechnologies@gmail.com
2025-12-23 06:54:12,129 - app.services.auth_service - INFO - New Google user created: equanimoustechnologies@gmail.com (ID: 35)
2025-12-23 06:54:12,130 - app.services.auth_service - INFO - Access token created for user: equanimoustechnologies@gmail.com
2025-12-23 06:54:24,282 - app.api.generation - INFO - ğŸ’³ PAID: Using token 117 - Uses remaining: 1/2
2025-12-23 06:54:24,377 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/9c000295-d719-440e-a234-222f34368967.jpg
2025-12-23 06:54:24,377 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9c000295-d719-440e-a234-222f34368967.jpg
2025-12-23 06:54:24,377 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9c000295-d719-440e-a234-222f34368967.jpg
2025-12-23 06:54:24,387 - app.api.generation - INFO - ğŸ”„ Processing generation 154 - Mode: GenerationMode.COUPLE
2025-12-23 06:54:24,410 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:54:24,410 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:54:24,410 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:54:24,410 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:54:24,489 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5048 characters
2025-12-23 06:54:24,554 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:54:24,554 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:54:34,605 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:54:34,791 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:54:34,792 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/fb7e8400-530f-4e51-ac11-7fe79d5f3bf4.png (size: unknown)
2025-12-23 06:54:34,901 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/8eddc5f2-b3f5-49ae-99c3-26a5a0e2506f.png
2025-12-23 06:54:34,901 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:54:34,902 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:54:34,904 - app.api.generation - INFO - ğŸ’³ Token 117 used. Remaining uses: 0/2
2025-12-23 06:54:34,909 - app.api.generation - INFO - âœ… Generation 154 completed successfully
2025-12-23 06:55:05,538 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 06:55:05,588 - app.services.auth_service - INFO - Google token verified for email: patelnidhitest@gmail.com
2025-12-23 06:55:05,596 - app.services.auth_service - INFO - New Google user created: patelnidhitest@gmail.com (ID: 36)
2025-12-23 06:55:05,597 - app.services.auth_service - INFO - Access token created for user: patelnidhitest@gmail.com
2025-12-23 06:55:36,781 - app.services.payment_service - INFO - Payment token created: 118 for user 31, template 32 (2 uses)
2025-12-23 06:55:36,781 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 118
2025-12-23 06:55:36,784 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 118 for user 31
2025-12-23 06:55:37,107 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 118
2025-12-23 06:55:37,110 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 118
2025-12-23 06:55:37,110 - app.api.payment - INFO - âœ… Payment verified: Token 118
2025-12-23 06:55:50,017 - app.api.generation - INFO - ğŸ’³ PAID: Using token 118 - Uses remaining: 2/2
2025-12-23 06:55:50,121 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/ed28b449-64af-4c39-89db-99c7f7ab1e93.jpg
2025-12-23 06:55:50,121 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/ed28b449-64af-4c39-89db-99c7f7ab1e93.jpg
2025-12-23 06:55:50,121 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/ed28b449-64af-4c39-89db-99c7f7ab1e93.jpg
2025-12-23 06:55:50,130 - app.api.generation - INFO - ğŸ”„ Processing generation 155 - Mode: GenerationMode.COUPLE
2025-12-23 06:55:50,151 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:55:50,151 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:55:50,151 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:55:50,151 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:55:50,242 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5048 characters
2025-12-23 06:55:50,306 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:55:50,306 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:55:57,800 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:55:57,999 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:55:58,001 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/e1837e82-9193-4928-ba18-6d40611f5d16.png (size: unknown)
2025-12-23 06:55:58,145 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/cf01c239-692e-428b-8001-0a83d75c9fc0.png
2025-12-23 06:55:58,146 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:55:58,146 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:55:58,149 - app.api.generation - INFO - ğŸ’³ Token 118 used. Remaining uses: 1/2
2025-12-23 06:55:58,153 - app.api.generation - INFO - âœ… Generation 155 completed successfully
2025-12-23 06:57:02,847 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 36 has 1 credits
2025-12-23 06:57:02,946 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/6be84d86-c817-4cf1-89b5-10381a62b676.jpeg
2025-12-23 06:57:02,946 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6be84d86-c817-4cf1-89b5-10381a62b676.jpeg
2025-12-23 06:57:02,946 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6be84d86-c817-4cf1-89b5-10381a62b676.jpeg
2025-12-23 06:57:02,956 - app.api.generation - INFO - ğŸ”„ Processing generation 156 - Mode: GenerationMode.COUPLE
2025-12-23 06:57:02,975 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:57:02,975 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:57:02,975 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:57:02,975 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:57:03,094 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5664 characters
2025-12-23 06:57:03,158 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:57:03,159 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:57:13,643 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:57:13,822 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:57:13,823 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/25bccc5c-1519-4d61-bf0c-a2b81ff30bf5.png (size: unknown)
2025-12-23 06:57:13,974 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/178f9348-0fa4-4821-a33d-01fa9b827770.png
2025-12-23 06:57:14,053 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 06:57:14,053 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 06:57:14,053 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:57:14,053 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 06:57:14,053 - app.services.watermark_service - INFO -   Input: /tmp/tmp3rgwz6pw.png
2025-12-23 06:57:14,053 - app.services.watermark_service - INFO -   Output: generated/2424725e-155e-4b63-91b9-b0ba5a1c3160_watermarked.png
2025-12-23 06:57:14,053 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:57:14,053 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 06:57:14,079 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:57:14,079 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 06:57:14,087 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 06:57:14,087 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 06:57:16,431 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/2424725e-155e-4b63-91b9-b0ba5a1c3160_watermarked.png
2025-12-23 06:57:16,531 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/9a576f6a-c43e-4c2f-9315-d765068a6e2a.png
2025-12-23 06:57:16,531 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/9a576f6a-c43e-4c2f-9315-d765068a6e2a.png
2025-12-23 06:57:16,533 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:57:16,533 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:57:16,537 - app.api.generation - INFO - âœ… Generation 156 completed successfully
2025-12-23 06:57:16,549 - app.api.generation - INFO - ğŸ’³ PAID: Using token 118 - Uses remaining: 1/2
2025-12-23 06:57:16,582 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/445f4624-eb35-448d-abae-9d0a5e642337.jpg
2025-12-23 06:57:16,582 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/445f4624-eb35-448d-abae-9d0a5e642337.jpg
2025-12-23 06:57:16,582 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/445f4624-eb35-448d-abae-9d0a5e642337.jpg
2025-12-23 06:57:16,592 - app.api.generation - INFO - ğŸ”„ Processing generation 157 - Mode: GenerationMode.COUPLE
2025-12-23 06:57:16,612 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:57:16,612 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:57:16,612 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:57:16,612 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:57:16,696 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5048 characters
2025-12-23 06:57:16,760 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:57:16,760 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:57:23,682 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:57:23,880 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:57:23,882 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/1209ad7b-ecb8-40b7-8e50-3b30452150fd.png (size: unknown)
2025-12-23 06:57:24,022 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/1e420189-4401-448d-9264-5d6b0e392be5.png
2025-12-23 06:57:24,022 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:57:24,023 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:57:24,026 - app.api.generation - INFO - ğŸ’³ Token 118 used. Remaining uses: 0/2
2025-12-23 06:57:24,030 - app.api.generation - INFO - âœ… Generation 157 completed successfully
2025-12-23 06:57:24,041 - app.api.generation - INFO - ğŸ’³ PAID: Using token 62 - Uses remaining: 2/2
2025-12-23 06:57:24,079 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/1c64ed42-0b39-4561-9d5b-634fabc123b1.jpg
2025-12-23 06:57:24,079 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/1c64ed42-0b39-4561-9d5b-634fabc123b1.jpg
2025-12-23 06:57:24,079 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/1c64ed42-0b39-4561-9d5b-634fabc123b1.jpg
2025-12-23 06:57:24,088 - app.api.generation - INFO - ğŸ”„ Processing generation 158 - Mode: GenerationMode.COUPLE
2025-12-23 06:57:24,110 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:57:24,111 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:57:24,111 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:57:24,111 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:57:24,198 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 4987 characters
2025-12-23 06:57:24,262 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:57:24,262 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:57:32,897 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:57:33,082 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:57:33,083 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/3b3711ce-927a-4b00-952d-0777adb94dff.png (size: unknown)
2025-12-23 06:57:33,216 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/5a2c4e55-f8f2-43b6-a496-72e16e6b001e.png
2025-12-23 06:57:33,217 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:57:33,217 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:57:33,220 - app.api.generation - INFO - ğŸ’³ Token 62 used. Remaining uses: 1/2
2025-12-23 06:57:33,224 - app.api.generation - INFO - âœ… Generation 158 completed successfully
2025-12-23 06:58:07,592 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 35 has 1 credits
2025-12-23 06:58:07,695 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/7fc6358e-2238-433b-8e17-b087b0fa3aa9.jpeg
2025-12-23 06:58:07,695 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7fc6358e-2238-433b-8e17-b087b0fa3aa9.jpeg
2025-12-23 06:58:07,696 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/7fc6358e-2238-433b-8e17-b087b0fa3aa9.jpeg
2025-12-23 06:58:07,725 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/6c89e845-fb90-40b8-bc1f-e5f09374d3c0.webp
2025-12-23 06:58:07,725 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6c89e845-fb90-40b8-bc1f-e5f09374d3c0.webp
2025-12-23 06:58:07,725 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/6c89e845-fb90-40b8-bc1f-e5f09374d3c0.webp
2025-12-23 06:58:07,725 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:58:07,734 - app.api.generation - INFO - ğŸ”„ Processing generation 159 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:58:07,768 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:58:07,769 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:58:07,769 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:58:07,769 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:58:08,013 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5366 characters
2025-12-23 06:58:08,078 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:58:08,078 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:58:19,946 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:58:20,124 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:58:20,126 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/c94fb24a-86ee-4efb-bb7d-56bd79e0f1c2.png (size: unknown)
2025-12-23 06:58:20,247 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/e0dafab7-115a-4af5-9580-08c35ed3c635.png
2025-12-23 06:58:20,324 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 06:58:20,324 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 06:58:20,324 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:58:20,324 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 06:58:20,325 - app.services.watermark_service - INFO -   Input: /tmp/tmpycq_k8pk.png
2025-12-23 06:58:20,325 - app.services.watermark_service - INFO -   Output: generated/7ec2b6a4-70d5-4fc7-8d06-cd079e9ccc97_watermarked.png
2025-12-23 06:58:20,325 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:58:20,325 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 06:58:20,350 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:58:20,350 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 06:58:20,358 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 06:58:20,358 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 06:58:22,276 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/7ec2b6a4-70d5-4fc7-8d06-cd079e9ccc97_watermarked.png
2025-12-23 06:58:22,366 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/37a81561-b84a-4760-9229-66f1ed7d7032.png
2025-12-23 06:58:22,366 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/37a81561-b84a-4760-9229-66f1ed7d7032.png
2025-12-23 06:58:22,368 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:58:22,368 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:58:22,372 - app.api.generation - INFO - âœ… Generation 159 completed successfully
2025-12-23 06:58:28,194 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 35 has 0 credits
2025-12-23 06:58:28,236 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/5df2dcb8-a560-49ab-82d8-74451e71f24c.jpeg
2025-12-23 06:58:28,236 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/5df2dcb8-a560-49ab-82d8-74451e71f24c.jpeg
2025-12-23 06:58:28,236 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/5df2dcb8-a560-49ab-82d8-74451e71f24c.jpeg
2025-12-23 06:58:28,283 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/b4d584f3-06e3-41ba-a4b9-1bc401b46341.webp
2025-12-23 06:58:28,283 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/b4d584f3-06e3-41ba-a4b9-1bc401b46341.webp
2025-12-23 06:58:28,283 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/b4d584f3-06e3-41ba-a4b9-1bc401b46341.webp
2025-12-23 06:58:28,283 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:58:28,292 - app.api.generation - INFO - ğŸ”„ Processing generation 160 - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:58:28,326 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:58:28,326 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:58:28,326 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 06:58:28,326 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 06:58:28,495 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5366 characters
2025-12-23 06:58:28,560 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:58:28,560 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:58:38,525 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:58:38,721 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:58:38,723 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/413762f3-a186-483f-8b23-142295bb8596.png (size: unknown)
2025-12-23 06:58:38,835 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/f2444571-0d09-48e5-af30-40d857392aa2.png
2025-12-23 06:58:39,015 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 06:58:39,015 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 06:58:39,015 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:58:39,015 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 06:58:39,015 - app.services.watermark_service - INFO -   Input: /tmp/tmpzf50xo7t.png
2025-12-23 06:58:39,015 - app.services.watermark_service - INFO -   Output: generated/f1a79dc1-e74e-4346-b7f9-f933da26f7a5_watermarked.png
2025-12-23 06:58:39,015 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:58:39,015 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 06:58:39,041 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 06:58:39,042 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 06:58:39,049 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 06:58:39,049 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 06:58:40,207 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/f1a79dc1-e74e-4346-b7f9-f933da26f7a5_watermarked.png
2025-12-23 06:58:40,288 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/4f8ce018-3731-48da-9220-10c73fc391fa.png
2025-12-23 06:58:40,288 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/4f8ce018-3731-48da-9220-10c73fc391fa.png
2025-12-23 06:58:40,290 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:58:40,290 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:58:40,294 - app.api.generation - INFO - âœ… Generation 160 completed successfully
2025-12-23 06:58:44,658 - app.api.generation - INFO - ğŸ’³ PAID: Using token 62 - Uses remaining: 1/2
2025-12-23 06:58:44,695 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/74ba892a-b938-4449-9a81-14098fda68b1.jpg
2025-12-23 06:58:44,695 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/74ba892a-b938-4449-9a81-14098fda68b1.jpg
2025-12-23 06:58:44,695 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/74ba892a-b938-4449-9a81-14098fda68b1.jpg
2025-12-23 06:58:44,703 - app.api.generation - INFO - ğŸ”„ Processing generation 161 - Mode: GenerationMode.COUPLE
2025-12-23 06:58:44,724 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 06:58:44,725 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 06:58:44,725 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 06:58:44,725 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 06:58:44,839 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 4987 characters
2025-12-23 06:58:44,904 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 06:58:44,904 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 06:58:53,121 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 06:58:53,314 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 06:58:53,316 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/535670ec-0a43-44d7-a9ba-9bdcde9ac6ba.png (size: unknown)
2025-12-23 06:58:53,432 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/abc09e46-79f7-4016-9f27-dcf7dc29220b.png
2025-12-23 06:58:53,432 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 06:58:53,433 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 06:58:53,436 - app.api.generation - INFO - ğŸ’³ Token 62 used. Remaining uses: 0/2
2025-12-23 06:58:53,439 - app.api.generation - INFO - âœ… Generation 161 completed successfully
2025-12-23 07:01:10,631 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 4 has 98 credits
2025-12-23 07:01:10,803 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/a463951e-8189-4c83-9216-379eb0d3965c.jpg
2025-12-23 07:01:10,803 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/a463951e-8189-4c83-9216-379eb0d3965c.jpg
2025-12-23 07:01:10,803 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/a463951e-8189-4c83-9216-379eb0d3965c.jpg
2025-12-23 07:01:10,813 - app.api.generation - INFO - ğŸ”„ Processing generation 162 - Mode: GenerationMode.COUPLE
2025-12-23 07:01:10,834 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:01:10,834 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:01:10,834 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:01:10,834 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:01:10,922 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5664 characters
2025-12-23 07:01:10,986 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:01:10,986 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:01:20,867 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:01:21,046 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:01:21,047 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/2d426551-17af-432e-849b-f014bb227948.png (size: unknown)
2025-12-23 07:01:21,202 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/fc5cd0e7-03f7-4f1d-8782-79b97016e2a2.png
2025-12-23 07:01:21,278 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 07:01:21,278 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 07:01:21,278 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:01:21,278 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 07:01:21,278 - app.services.watermark_service - INFO -   Input: /tmp/tmpc13q2ua4.png
2025-12-23 07:01:21,278 - app.services.watermark_service - INFO -   Output: generated/e21abcea-546f-432f-a9bc-20e6853e5bb3_watermarked.png
2025-12-23 07:01:21,278 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:01:21,278 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 07:01:21,306 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:01:21,306 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 07:01:21,313 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 07:01:21,313 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 07:01:23,079 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/e21abcea-546f-432f-a9bc-20e6853e5bb3_watermarked.png
2025-12-23 07:01:23,181 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/245215ce-2533-40a2-8a01-08873063bfcf.png
2025-12-23 07:01:23,182 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/245215ce-2533-40a2-8a01-08873063bfcf.png
2025-12-23 07:01:23,183 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:01:23,184 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:01:23,188 - app.api.generation - INFO - âœ… Generation 162 completed successfully
2025-12-23 07:03:09,382 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 07:03:09,433 - app.services.auth_service - INFO - Google token verified for email: nakul.equanimoustech@gmail.com
2025-12-23 07:03:09,441 - app.services.auth_service - INFO - New Google user created: nakul.equanimoustech@gmail.com (ID: 37)
2025-12-23 07:03:09,442 - app.services.auth_service - INFO - Access token created for user: nakul.equanimoustech@gmail.com
2025-12-23 07:04:32,378 - app.services.payment_service - INFO - Payment token created: 119 for user 31, template 45 (2 uses)
2025-12-23 07:04:32,378 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 119
2025-12-23 07:04:32,381 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 119 for user 31
2025-12-23 07:04:33,001 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 119
2025-12-23 07:04:33,004 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 119
2025-12-23 07:04:33,005 - app.api.payment - INFO - âœ… Payment verified: Token 119
2025-12-23 07:04:44,069 - app.api.generation - INFO - ğŸ’³ PAID: Using token 119 - Uses remaining: 2/2
2025-12-23 07:04:44,184 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/4cad232c-f177-4eab-8bd4-70a42ee9254d.jpg
2025-12-23 07:04:44,184 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/4cad232c-f177-4eab-8bd4-70a42ee9254d.jpg
2025-12-23 07:04:44,185 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/4cad232c-f177-4eab-8bd4-70a42ee9254d.jpg
2025-12-23 07:04:44,194 - app.api.generation - INFO - ğŸ”„ Processing generation 163 - Mode: GenerationMode.COUPLE
2025-12-23 07:04:44,217 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:04:44,217 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:04:44,217 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:04:44,217 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:04:44,304 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5244 characters
2025-12-23 07:04:44,370 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:04:44,370 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:04:55,068 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:04:55,261 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:04:55,262 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/004dd8be-be94-4eeb-9b46-58d59621f987.png (size: unknown)
2025-12-23 07:04:55,380 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/12cff898-a108-4c59-bac8-e99b55077213.png
2025-12-23 07:04:55,380 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:04:55,381 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:04:55,384 - app.api.generation - INFO - ğŸ’³ Token 119 used. Remaining uses: 1/2
2025-12-23 07:04:55,388 - app.api.generation - INFO - âœ… Generation 163 completed successfully
2025-12-23 07:05:57,998 - app.services.payment_service - INFO - Payment token created: 120 for user 31, template 33 (2 uses)
2025-12-23 07:05:57,998 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 120
2025-12-23 07:05:58,000 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 120 for user 31
2025-12-23 07:05:58,253 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 120
2025-12-23 07:05:58,256 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 120
2025-12-23 07:05:58,257 - app.api.payment - INFO - âœ… Payment verified: Token 120
2025-12-23 07:06:13,097 - app.api.generation - INFO - ğŸ’³ PAID: Using token 120 - Uses remaining: 2/2
2025-12-23 07:06:13,195 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/bcccb556-c207-4ddb-88a0-60e37dfddb32.jpg
2025-12-23 07:06:13,195 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/bcccb556-c207-4ddb-88a0-60e37dfddb32.jpg
2025-12-23 07:06:13,195 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/bcccb556-c207-4ddb-88a0-60e37dfddb32.jpg
2025-12-23 07:06:13,204 - app.api.generation - INFO - ğŸ”„ Processing generation 164 - Mode: GenerationMode.COUPLE
2025-12-23 07:06:13,225 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:06:13,225 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:06:13,226 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:06:13,226 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:06:13,310 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5050 characters
2025-12-23 07:06:13,373 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:06:13,374 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:06:20,511 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:06:20,710 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:06:20,712 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/396e5b24-f775-480d-864a-149103161409.png (size: unknown)
2025-12-23 07:06:20,919 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/cf2424ba-ea8c-4821-8e7a-f7874288df49.png
2025-12-23 07:06:20,920 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:06:20,920 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:06:20,923 - app.api.generation - INFO - ğŸ’³ Token 120 used. Remaining uses: 1/2
2025-12-23 07:06:20,927 - app.api.generation - INFO - âœ… Generation 164 completed successfully
2025-12-23 07:06:23,688 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 4 has 97 credits
2025-12-23 07:06:23,742 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/9eb36529-58e1-43ee-8767-435a9534cdd0.jpg
2025-12-23 07:06:23,742 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9eb36529-58e1-43ee-8767-435a9534cdd0.jpg
2025-12-23 07:06:23,742 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/9eb36529-58e1-43ee-8767-435a9534cdd0.jpg
2025-12-23 07:06:23,751 - app.api.generation - INFO - ğŸ”„ Processing generation 165 - Mode: GenerationMode.COUPLE
2025-12-23 07:06:23,773 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:06:23,773 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:06:23,773 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:06:23,773 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:06:23,861 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5664 characters
2025-12-23 07:06:23,925 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:06:23,925 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:06:31,130 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:06:31,322 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:06:31,324 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/d9bd7db2-293b-40f0-973d-ade089c7c65e.png (size: unknown)
2025-12-23 07:06:31,473 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/9fc95729-de4b-42a9-b810-1160e8607e30.png
2025-12-23 07:06:31,559 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 07:06:31,559 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 07:06:31,559 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:06:31,559 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 07:06:31,559 - app.services.watermark_service - INFO -   Input: /tmp/tmp3pjk58xd.png
2025-12-23 07:06:31,559 - app.services.watermark_service - INFO -   Output: generated/2de8b023-b0f1-4703-b3b4-f7d95ddf5bc7_watermarked.png
2025-12-23 07:06:31,559 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:06:31,559 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 07:06:31,587 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:06:31,587 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 07:06:31,594 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 07:06:31,594 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 07:06:33,383 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/2de8b023-b0f1-4703-b3b4-f7d95ddf5bc7_watermarked.png
2025-12-23 07:06:33,469 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/e8fea709-2b0d-44eb-8fe8-a9dba0b956b3.png
2025-12-23 07:06:33,469 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/e8fea709-2b0d-44eb-8fe8-a9dba0b956b3.png
2025-12-23 07:06:33,471 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:06:33,471 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:06:33,475 - app.api.generation - INFO - âœ… Generation 165 completed successfully
2025-12-23 07:07:25,687 - app.api.generation - INFO - ğŸ’³ PAID: Using token 120 - Uses remaining: 1/2
2025-12-23 07:07:25,802 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/3575a315-73ee-4469-bcda-9a604a8f21f9.jpg
2025-12-23 07:07:25,802 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/3575a315-73ee-4469-bcda-9a604a8f21f9.jpg
2025-12-23 07:07:25,802 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/3575a315-73ee-4469-bcda-9a604a8f21f9.jpg
2025-12-23 07:07:25,812 - app.api.generation - INFO - ğŸ”„ Processing generation 166 - Mode: GenerationMode.COUPLE
2025-12-23 07:07:25,834 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:07:25,834 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:07:25,834 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:07:25,834 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:07:25,927 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5050 characters
2025-12-23 07:07:25,991 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:07:25,991 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:07:34,118 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:07:34,316 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:07:34,317 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/14ad7db8-6fb4-4e5f-8a28-64ad4d894bc6.png (size: unknown)
2025-12-23 07:07:34,472 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/9e5e9979-6d2d-4f3c-9dbc-d46acf8fa9fc.png
2025-12-23 07:07:34,473 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:07:34,473 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:07:34,476 - app.api.generation - INFO - ğŸ’³ Token 120 used. Remaining uses: 0/2
2025-12-23 07:07:34,480 - app.api.generation - INFO - âœ… Generation 166 completed successfully
2025-12-23 07:08:44,473 - app.services.payment_service - INFO - Payment token created: 121 for user 31, template 39 (2 uses)
2025-12-23 07:08:44,473 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 121
2025-12-23 07:08:44,476 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 121 for user 31
2025-12-23 07:08:44,742 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 121
2025-12-23 07:08:44,745 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 121
2025-12-23 07:08:44,745 - app.api.payment - INFO - âœ… Payment verified: Token 121
2025-12-23 07:08:50,397 - app.api.generation - INFO - ğŸ’³ PAID: Using token 121 - Uses remaining: 2/2
2025-12-23 07:08:50,515 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/e1930f0a-e458-42d0-809f-3a81821c8ec9.jpg
2025-12-23 07:08:50,516 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e1930f0a-e458-42d0-809f-3a81821c8ec9.jpg
2025-12-23 07:08:50,516 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e1930f0a-e458-42d0-809f-3a81821c8ec9.jpg
2025-12-23 07:08:50,525 - app.api.generation - INFO - ğŸ”„ Processing generation 167 - Mode: GenerationMode.COUPLE
2025-12-23 07:08:50,545 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:08:50,546 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:08:50,546 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:08:50,546 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:08:50,632 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5064 characters
2025-12-23 07:08:50,696 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:08:50,696 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:08:58,330 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:08:58,518 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:08:58,520 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/dfd5ca00-bab1-4053-8187-1b003476700b.png (size: unknown)
2025-12-23 07:08:58,634 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/c3979a60-0fa6-481d-b973-109ab8e57466.png
2025-12-23 07:08:58,635 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:08:58,635 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:08:58,638 - app.api.generation - INFO - ğŸ’³ Token 121 used. Remaining uses: 1/2
2025-12-23 07:08:58,642 - app.api.generation - INFO - âœ… Generation 167 completed successfully
2025-12-23 07:09:20,308 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 07:09:20,358 - app.services.auth_service - INFO - Google token verified for email: jaykpandyya@gmail.com
2025-12-23 07:09:20,364 - app.services.auth_service - INFO - Existing Google user logged in: jaykpandyya@gmail.com
2025-12-23 07:09:20,365 - app.services.auth_service - INFO - Access token created for user: jaykpandyya@gmail.com
2025-12-23 07:09:37,999 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 4 has 96 credits
2025-12-23 07:09:38,141 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/67d0bfd4-83e0-45c7-a9da-ffbc6ae8a37b.jpg
2025-12-23 07:09:38,142 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/67d0bfd4-83e0-45c7-a9da-ffbc6ae8a37b.jpg
2025-12-23 07:09:38,142 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/67d0bfd4-83e0-45c7-a9da-ffbc6ae8a37b.jpg
2025-12-23 07:09:38,150 - app.api.generation - INFO - ğŸ”„ Processing generation 168 - Mode: GenerationMode.COUPLE
2025-12-23 07:09:38,173 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:09:38,173 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:09:38,173 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:09:38,173 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:09:38,264 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5089 characters
2025-12-23 07:09:38,328 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:09:38,328 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:09:46,287 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:09:46,466 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:09:46,468 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/242bf5ba-1434-4d1d-aab0-8411fe17fc37.png (size: unknown)
2025-12-23 07:09:46,577 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/9bd96b20-61a3-4caa-8241-7aa0c5159fb7.png
2025-12-23 07:09:46,652 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 07:09:46,653 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 07:09:46,653 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:09:46,653 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 07:09:46,653 - app.services.watermark_service - INFO -   Input: /tmp/tmpl07hz5aq.png
2025-12-23 07:09:46,653 - app.services.watermark_service - INFO -   Output: generated/8eb90378-41f8-404a-96c1-5e403c55601a_watermarked.png
2025-12-23 07:09:46,653 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:09:46,653 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 07:09:46,678 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:09:46,678 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 07:09:46,686 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 07:09:46,686 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 07:09:49,001 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/8eb90378-41f8-404a-96c1-5e403c55601a_watermarked.png
2025-12-23 07:09:49,070 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/aefbe96b-8205-4a55-8a53-d7b7497f8de1.png
2025-12-23 07:09:49,071 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/aefbe96b-8205-4a55-8a53-d7b7497f8de1.png
2025-12-23 07:09:49,072 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:09:49,072 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:09:49,076 - app.api.generation - INFO - âœ… Generation 168 completed successfully
2025-12-23 07:09:49,091 - app.services.payment_service - INFO - Payment token created: 122 for user 31, template 6 (2 uses)
2025-12-23 07:09:49,091 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 122
2025-12-23 07:09:49,094 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 122 for user 31
2025-12-23 07:09:49,103 - app.services.payment_service - INFO - Payment token created: 123 for user 31, template 6 (2 uses)
2025-12-23 07:09:49,103 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 123
2025-12-23 07:09:49,105 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 123 for user 31
2025-12-23 07:09:49,409 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 123
2025-12-23 07:09:49,412 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 123
2025-12-23 07:09:49,412 - app.api.payment - INFO - âœ… Payment verified: Token 123
2025-12-23 07:09:49,419 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 122
2025-12-23 07:09:49,422 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 122
2025-12-23 07:09:49,422 - app.api.payment - INFO - âœ… Payment verified: Token 122
2025-12-23 07:09:52,992 - app.services.payment_service - INFO - Payment token created: 124 for user 14, template 10 (2 uses)
2025-12-23 07:09:52,992 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 124
2025-12-23 07:09:52,994 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 124 for user 14
2025-12-23 07:09:54,064 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 124
2025-12-23 07:09:54,067 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 124
2025-12-23 07:09:54,067 - app.api.payment - INFO - âœ… Payment verified: Token 124
2025-12-23 07:09:55,846 - app.api.generation - INFO - ğŸ’³ PAID: Using token 122 - Uses remaining: 2/2
2025-12-23 07:09:55,953 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/48c019b7-d07a-4526-8b92-5ea38b503aa8.jpg
2025-12-23 07:09:55,953 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/48c019b7-d07a-4526-8b92-5ea38b503aa8.jpg
2025-12-23 07:09:55,953 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/48c019b7-d07a-4526-8b92-5ea38b503aa8.jpg
2025-12-23 07:09:55,962 - app.api.generation - INFO - ğŸ”„ Processing generation 169 - Mode: GenerationMode.COUPLE
2025-12-23 07:09:55,988 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:09:55,988 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:09:55,988 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:09:55,988 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:09:56,076 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5334 characters
2025-12-23 07:09:56,140 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:09:56,140 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:10:03,531 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:10:03,716 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:10:03,717 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/dd3ae7b0-76f0-4f8c-90d0-72d02092a899.png (size: unknown)
2025-12-23 07:10:03,853 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/d9dd5e3d-a80c-46de-be74-3f420c61b08b.png
2025-12-23 07:10:03,853 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:10:03,853 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:10:03,857 - app.api.generation - INFO - ğŸ’³ Token 122 used. Remaining uses: 1/2
2025-12-23 07:10:03,860 - app.api.generation - INFO - âœ… Generation 169 completed successfully
2025-12-23 07:10:41,307 - app.api.generation - INFO - ğŸ’³ PAID: Using token 124 - Uses remaining: 2/2
2025-12-23 07:10:41,457 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/aba984a3-c47d-4914-b89d-af4ac3c18bf8.jpeg
2025-12-23 07:10:41,457 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/aba984a3-c47d-4914-b89d-af4ac3c18bf8.jpeg
2025-12-23 07:10:41,457 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/aba984a3-c47d-4914-b89d-af4ac3c18bf8.jpeg
2025-12-23 07:10:41,465 - app.api.generation - INFO - ğŸ”„ Processing generation 170 - Mode: GenerationMode.COUPLE
2025-12-23 07:10:41,486 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:10:41,486 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:10:41,486 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:10:41,486 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:10:41,900 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5073 characters
2025-12-23 07:10:41,963 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:10:41,963 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:10:50,638 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:10:50,830 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:10:50,832 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/cba306cd-c898-4dbb-b7bc-edf2d8756dda.png (size: unknown)
2025-12-23 07:10:50,955 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/4ab55282-bd52-4cae-8da4-8c429d665558.png
2025-12-23 07:10:50,956 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:10:50,956 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:10:50,959 - app.api.generation - INFO - ğŸ’³ Token 124 used. Remaining uses: 1/2
2025-12-23 07:10:50,963 - app.api.generation - INFO - âœ… Generation 170 completed successfully
2025-12-23 07:10:50,980 - app.services.payment_service - INFO - Payment token created: 125 for user 31, template 18 (2 uses)
2025-12-23 07:10:50,980 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 125
2025-12-23 07:10:50,983 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 125 for user 31
2025-12-23 07:10:50,993 - app.services.payment_service - INFO - Payment token created: 126 for user 31, template 18 (2 uses)
2025-12-23 07:10:50,993 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 126
2025-12-23 07:10:50,996 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 126 for user 31
2025-12-23 07:10:51,007 - app.services.payment_service - INFO - Payment token created: 127 for user 31, template 18 (2 uses)
2025-12-23 07:10:51,007 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 127
2025-12-23 07:10:51,009 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 127 for user 31
2025-12-23 07:10:51,217 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 125
2025-12-23 07:10:51,220 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 125
2025-12-23 07:10:51,220 - app.api.payment - INFO - âœ… Payment verified: Token 125
2025-12-23 07:10:51,243 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 127
2025-12-23 07:10:51,245 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 127
2025-12-23 07:10:51,245 - app.api.payment - INFO - âœ… Payment verified: Token 127
2025-12-23 07:10:51,256 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 126
2025-12-23 07:10:51,258 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 126
2025-12-23 07:10:51,259 - app.api.payment - INFO - âœ… Payment verified: Token 126
2025-12-23 07:10:54,934 - app.api.generation - INFO - ğŸ’³ PAID: Using token 126 - Uses remaining: 2/2
2025-12-23 07:10:54,990 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/e51c1628-4727-4228-8dec-4b130763e3f7.jpg
2025-12-23 07:10:54,990 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e51c1628-4727-4228-8dec-4b130763e3f7.jpg
2025-12-23 07:10:54,990 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e51c1628-4727-4228-8dec-4b130763e3f7.jpg
2025-12-23 07:10:54,998 - app.api.generation - INFO - ğŸ”„ Processing generation 171 - Mode: GenerationMode.COUPLE
2025-12-23 07:10:55,027 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:10:55,027 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:10:55,027 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:10:55,027 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:10:55,120 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5024 characters
2025-12-23 07:10:55,184 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:10:55,184 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:11:03,903 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:11:04,091 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:11:04,093 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/69e60f3a-43c4-4b10-a011-3feec81d96e6.png (size: unknown)
2025-12-23 07:11:04,216 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/33fc3f52-e2a8-423e-8eae-f8c48dca04a2.png
2025-12-23 07:11:04,217 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:11:04,217 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:11:04,221 - app.api.generation - INFO - ğŸ’³ Token 126 used. Remaining uses: 1/2
2025-12-23 07:11:04,225 - app.api.generation - INFO - âœ… Generation 171 completed successfully
2025-12-23 07:12:20,575 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 4 has 95 credits
2025-12-23 07:12:20,692 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/f61bbf61-0138-4161-8f6c-ef8205e8042f.jpg
2025-12-23 07:12:20,692 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/f61bbf61-0138-4161-8f6c-ef8205e8042f.jpg
2025-12-23 07:12:20,692 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/f61bbf61-0138-4161-8f6c-ef8205e8042f.jpg
2025-12-23 07:12:20,702 - app.api.generation - INFO - ğŸ”„ Processing generation 172 - Mode: GenerationMode.COUPLE
2025-12-23 07:12:20,723 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:12:20,723 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:12:20,723 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:12:20,723 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:12:20,818 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5664 characters
2025-12-23 07:12:20,881 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:12:20,882 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:12:32,521 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:12:32,698 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:12:32,700 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/340822fc-4943-47e3-9b4b-da00c8c4e4ee.png (size: unknown)
2025-12-23 07:12:32,841 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/5305157b-c777-4dfb-99ee-77ba85e2c953.png
2025-12-23 07:12:32,921 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 07:12:32,922 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 07:12:32,922 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:12:32,922 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 07:12:32,922 - app.services.watermark_service - INFO -   Input: /tmp/tmp8q_dce_z.png
2025-12-23 07:12:32,922 - app.services.watermark_service - INFO -   Output: generated/44aabe70-7644-4c53-a422-3779e14c0e80_watermarked.png
2025-12-23 07:12:32,922 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:12:32,922 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 07:12:32,950 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:12:32,950 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 07:12:32,958 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 07:12:32,958 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 07:12:34,998 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/44aabe70-7644-4c53-a422-3779e14c0e80_watermarked.png
2025-12-23 07:12:35,205 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/a4c95e2e-5e09-4dbc-a7db-f85460a79ddd.png
2025-12-23 07:12:35,206 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/a4c95e2e-5e09-4dbc-a7db-f85460a79ddd.png
2025-12-23 07:12:35,207 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:12:35,207 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:12:35,212 - app.api.generation - INFO - âœ… Generation 172 completed successfully
2025-12-23 07:12:35,237 - app.services.payment_service - INFO - Payment token created: 128 for user 14, template 60 (2 uses)
2025-12-23 07:12:35,237 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 128
2025-12-23 07:12:35,240 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 128 for user 14
2025-12-23 07:12:35,250 - app.services.payment_service - INFO - Payment token created: 129 for user 14, template 60 (2 uses)
2025-12-23 07:12:35,250 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 129
2025-12-23 07:12:35,252 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 129 for user 14
2025-12-23 07:12:35,525 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 128
2025-12-23 07:12:35,527 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 128
2025-12-23 07:12:35,527 - app.api.payment - INFO - âœ… Payment verified: Token 128
2025-12-23 07:12:35,536 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 129
2025-12-23 07:12:35,539 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 129
2025-12-23 07:12:35,539 - app.api.payment - INFO - âœ… Payment verified: Token 129
2025-12-23 07:12:54,727 - app.api.generation - INFO - ğŸ’³ PAID: Using token 128 - Uses remaining: 2/2
2025-12-23 07:12:54,831 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/94e84b57-ef0a-4953-9edf-fb7bb94383ca.jpeg
2025-12-23 07:12:54,832 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/94e84b57-ef0a-4953-9edf-fb7bb94383ca.jpeg
2025-12-23 07:12:54,832 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/94e84b57-ef0a-4953-9edf-fb7bb94383ca.jpeg
2025-12-23 07:12:54,841 - app.api.generation - INFO - ğŸ”„ Processing generation 173 - Mode: GenerationMode.COUPLE
2025-12-23 07:12:54,862 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:12:54,862 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:12:54,862 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:12:54,862 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:12:55,259 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5059 characters
2025-12-23 07:12:55,323 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:12:55,323 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:13:03,540 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:13:03,741 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:13:03,743 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/8ae2dc2f-365a-47a6-b8d0-b0600b1b7860.png (size: unknown)
2025-12-23 07:13:03,873 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/97ab5e08-7c79-44e1-bee5-20c76f28e8c9.png
2025-12-23 07:13:03,874 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:13:03,874 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:13:03,877 - app.api.generation - INFO - ğŸ’³ Token 128 used. Remaining uses: 1/2
2025-12-23 07:13:03,881 - app.api.generation - INFO - âœ… Generation 173 completed successfully
2025-12-23 07:13:09,522 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 4 has 94 credits
2025-12-23 07:13:09,639 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/0ea6b68e-c74f-4118-9e80-3fbba0a95ecc.jpg
2025-12-23 07:13:09,639 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0ea6b68e-c74f-4118-9e80-3fbba0a95ecc.jpg
2025-12-23 07:13:09,639 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/0ea6b68e-c74f-4118-9e80-3fbba0a95ecc.jpg
2025-12-23 07:13:09,648 - app.api.generation - INFO - ğŸ”„ Processing generation 174 - Mode: GenerationMode.COUPLE
2025-12-23 07:13:09,669 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:13:09,670 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:13:09,670 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:13:09,670 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:13:09,770 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5664 characters
2025-12-23 07:13:09,834 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:13:09,835 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:13:19,123 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:13:19,304 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:13:19,306 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/15ceb005-32c0-4e68-92ac-b4664e4c028a.png (size: unknown)
2025-12-23 07:13:19,467 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/a31e4398-c4db-4337-aa7a-0265fd5b97d9.png
2025-12-23 07:13:19,604 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 07:13:19,604 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 07:13:19,605 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:13:19,605 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 07:13:19,605 - app.services.watermark_service - INFO -   Input: /tmp/tmpmluhzopl.png
2025-12-23 07:13:19,605 - app.services.watermark_service - INFO -   Output: generated/51917856-f504-4a14-bd06-79820025b2c5_watermarked.png
2025-12-23 07:13:19,605 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:13:19,605 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 07:13:19,632 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:13:19,632 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 07:13:19,639 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 07:13:19,640 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 07:13:21,673 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/51917856-f504-4a14-bd06-79820025b2c5_watermarked.png
2025-12-23 07:13:21,750 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/d45fe453-eea5-4bc7-82b6-d2d091abbcd4.png
2025-12-23 07:13:21,751 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/d45fe453-eea5-4bc7-82b6-d2d091abbcd4.png
2025-12-23 07:13:21,752 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:13:21,752 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:13:21,756 - app.api.generation - INFO - âœ… Generation 174 completed successfully
2025-12-23 07:14:00,455 - app.api.generation - INFO - ğŸ’³ FREE: Credit deducted. User 4 has 93 credits
2025-12-23 07:14:00,584 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/96085ee3-4599-4333-975f-f4832c42ab1f.jpg
2025-12-23 07:14:00,585 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/96085ee3-4599-4333-975f-f4832c42ab1f.jpg
2025-12-23 07:14:00,585 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/96085ee3-4599-4333-975f-f4832c42ab1f.jpg
2025-12-23 07:14:00,594 - app.api.generation - INFO - ğŸ”„ Processing generation 175 - Mode: GenerationMode.COUPLE
2025-12-23 07:14:00,616 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:14:00,616 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:14:00,616 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:14:00,616 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:14:00,704 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5664 characters
2025-12-23 07:14:00,768 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:14:00,768 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:14:11,157 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:14:11,330 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:14:11,332 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/4314033e-30d7-43fa-b0f6-dc566fc343b8.png (size: unknown)
2025-12-23 07:14:11,471 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/91e19b0e-1aeb-4fa2-bf5b-5260e02e76f3.png
2025-12-23 07:14:11,564 - app.services.image_generation_service - INFO - ğŸ” Searching for logo file...
2025-12-23 07:14:11,564 - app.services.image_generation_service - INFO -   Checking: /home/ubuntu/wedding_planner_production/static/logo.png (exists: True)
2025-12-23 07:14:11,564 - app.services.image_generation_service - INFO - âœ… Found logo at: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:14:11,564 - app.services.watermark_service - INFO - ğŸ¨ Adding logo watermark to image...
2025-12-23 07:14:11,564 - app.services.watermark_service - INFO -   Input: /tmp/tmp9b893wqt.png
2025-12-23 07:14:11,565 - app.services.watermark_service - INFO -   Output: generated/fbb0aa0d-8283-4df3-8867-9e5f6450f724_watermarked.png
2025-12-23 07:14:11,565 - app.services.watermark_service - INFO -   Logo: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:14:11,565 - app.services.watermark_service - INFO -   Image size: 768x1344
2025-12-23 07:14:11,591 - app.services.watermark_service - INFO - ğŸ“¸ Loading logo from: /home/ubuntu/wedding_planner_production/static/logo.png
2025-12-23 07:14:11,591 - app.services.watermark_service - INFO - âœ… Logo loaded successfully: (500, 500), mode: RGBA
2025-12-23 07:14:11,598 - app.services.watermark_service - INFO -   Resized logo to: 67x67
2025-12-23 07:14:11,599 - app.services.watermark_service - INFO - âœ… Logo watermark applied: 67x67 at (676, 1252)
2025-12-23 07:14:13,669 - app.services.watermark_service - INFO - âœ… Watermarked image saved: generated/fbb0aa0d-8283-4df3-8867-9e5f6450f724_watermarked.png
2025-12-23 07:14:13,740 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/c856e82a-68fc-45b3-8dec-d0d7c8bd6e01.png
2025-12-23 07:14:13,741 - app.services.image_generation_service - INFO - ğŸ–¼ï¸ Watermark added: https://wedplanner.s3.us-east-1.amazonaws.com/generated/c856e82a-68fc-45b3-8dec-d0d7c8bd6e01.png
2025-12-23 07:14:13,742 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:14:13,742 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:14:13,746 - app.api.generation - INFO - âœ… Generation 175 completed successfully
2025-12-23 07:14:13,761 - app.services.payment_service - INFO - Payment token created: 130 for user 14, template 16 (2 uses)
2025-12-23 07:14:13,761 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 130
2025-12-23 07:14:13,764 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 130 for user 14
2025-12-23 07:14:13,774 - app.services.payment_service - INFO - Payment token created: 131 for user 14, template 16 (2 uses)
2025-12-23 07:14:13,774 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 131
2025-12-23 07:14:13,776 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 131 for user 14
2025-12-23 07:14:14,119 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 131
2025-12-23 07:14:14,122 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 131
2025-12-23 07:14:14,122 - app.api.payment - INFO - âœ… Payment verified: Token 131
2025-12-23 07:14:14,129 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 130
2025-12-23 07:14:14,132 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 130
2025-12-23 07:14:14,132 - app.api.payment - INFO - âœ… Payment verified: Token 130
2025-12-23 07:14:38,787 - app.api.generation - INFO - ğŸ’³ PAID: Using token 131 - Uses remaining: 2/2
2025-12-23 07:14:38,924 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/e887ea5b-7366-408a-b795-31f6ab5009d8.jpeg
2025-12-23 07:14:38,924 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e887ea5b-7366-408a-b795-31f6ab5009d8.jpeg
2025-12-23 07:14:38,924 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/e887ea5b-7366-408a-b795-31f6ab5009d8.jpeg
2025-12-23 07:14:38,933 - app.api.generation - INFO - ğŸ”„ Processing generation 176 - Mode: GenerationMode.COUPLE
2025-12-23 07:14:38,955 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:14:38,955 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:14:38,955 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:14:38,955 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:14:39,078 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5070 characters
2025-12-23 07:14:39,142 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:14:39,142 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:14:48,030 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:14:48,221 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:14:48,223 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/0b319c7e-0ace-43ed-b05f-a4ba5353aff1.png (size: unknown)
2025-12-23 07:14:48,333 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/2a6a1e1c-1a32-4752-b342-0d029944ed06.png
2025-12-23 07:14:48,334 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:14:48,334 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:14:48,337 - app.api.generation - INFO - ğŸ’³ Token 131 used. Remaining uses: 1/2
2025-12-23 07:14:48,341 - app.api.generation - INFO - âœ… Generation 176 completed successfully
2025-12-23 07:15:45,435 - app.services.payment_service - INFO - Payment token created: 132 for user 14, template 41 (2 uses)
2025-12-23 07:15:45,435 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 132
2025-12-23 07:15:45,438 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 132 for user 14
2025-12-23 07:15:45,716 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 132
2025-12-23 07:15:45,719 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 132
2025-12-23 07:15:45,719 - app.api.payment - INFO - âœ… Payment verified: Token 132
2025-12-23 07:16:05,367 - app.api.generation - INFO - ğŸ’³ PAID: Using token 132 - Uses remaining: 2/2
2025-12-23 07:16:05,494 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/eeeed0ef-d893-46b3-b9fd-7a25e0e787bc.jpg
2025-12-23 07:16:05,494 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/eeeed0ef-d893-46b3-b9fd-7a25e0e787bc.jpg
2025-12-23 07:16:05,494 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/eeeed0ef-d893-46b3-b9fd-7a25e0e787bc.jpg
2025-12-23 07:16:05,504 - app.api.generation - INFO - ğŸ”„ Processing generation 177 - Mode: GenerationMode.COUPLE
2025-12-23 07:16:05,527 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:16:05,527 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:16:05,527 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:16:05,527 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:16:05,678 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5345 characters
2025-12-23 07:16:05,742 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:16:05,742 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:16:15,160 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:16:15,332 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:16:15,334 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/3229ebdf-1f00-4e8c-9303-579a84f53999.png (size: unknown)
2025-12-23 07:16:15,462 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/7e340082-8d86-4cbf-bd32-234b25ed862a.png
2025-12-23 07:16:15,464 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:16:15,465 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:16:15,468 - app.api.generation - INFO - ğŸ’³ Token 132 used. Remaining uses: 1/2
2025-12-23 07:16:15,472 - app.api.generation - INFO - âœ… Generation 177 completed successfully
2025-12-23 07:17:04,789 - app.services.payment_service - INFO - Payment token created: 133 for user 14, template 28 (2 uses)
2025-12-23 07:17:04,790 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 133
2025-12-23 07:17:04,792 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 133 for user 14
2025-12-23 07:17:06,563 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 133
2025-12-23 07:17:06,566 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 133
2025-12-23 07:17:06,566 - app.api.payment - INFO - âœ… Payment verified: Token 133
2025-12-23 07:17:45,794 - app.api.generation - INFO - ğŸ’³ PAID: Using token 133 - Uses remaining: 2/2
2025-12-23 07:17:45,893 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/cf10f3cc-e53c-473a-8d08-24647c4d454c.jpeg
2025-12-23 07:17:45,894 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/cf10f3cc-e53c-473a-8d08-24647c4d454c.jpeg
2025-12-23 07:17:45,894 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/cf10f3cc-e53c-473a-8d08-24647c4d454c.jpeg
2025-12-23 07:17:45,902 - app.api.generation - INFO - ğŸ”„ Processing generation 178 - Mode: GenerationMode.COUPLE
2025-12-23 07:17:45,921 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:17:45,921 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:17:45,921 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:17:45,921 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:17:46,025 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5070 characters
2025-12-23 07:17:46,088 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:17:46,088 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:17:53,671 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:17:53,856 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:17:53,858 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/08677880-0eaf-4a82-866b-42c3f368cb5e.png (size: unknown)
2025-12-23 07:17:54,014 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/1d2c8af7-c229-477b-8051-02ad7596c509.png
2025-12-23 07:17:54,014 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:17:54,015 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:17:54,018 - app.api.generation - INFO - ğŸ’³ Token 133 used. Remaining uses: 1/2
2025-12-23 07:17:54,022 - app.api.generation - INFO - âœ… Generation 178 completed successfully
2025-12-23 07:18:28,066 - app.services.payment_service - INFO - Payment token created: 134 for user 14, template 25 (2 uses)
2025-12-23 07:18:28,066 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 134
2025-12-23 07:18:28,071 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 134 for user 14
2025-12-23 07:18:28,398 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 134
2025-12-23 07:18:28,400 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 134
2025-12-23 07:18:28,400 - app.api.payment - INFO - âœ… Payment verified: Token 134
2025-12-23 07:18:43,542 - app.api.generation - INFO - ğŸ’³ PAID: Using token 134 - Uses remaining: 2/2
2025-12-23 07:18:43,690 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/8a460e75-cbb5-4463-8dd0-cbb5972c92e7.jpeg
2025-12-23 07:18:43,690 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8a460e75-cbb5-4463-8dd0-cbb5972c92e7.jpeg
2025-12-23 07:18:43,690 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/8a460e75-cbb5-4463-8dd0-cbb5972c92e7.jpeg
2025-12-23 07:18:43,699 - app.api.generation - INFO - ğŸ”„ Processing generation 179 - Mode: GenerationMode.COUPLE
2025-12-23 07:18:43,722 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:18:43,722 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:18:43,722 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:18:43,722 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:18:44,138 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5356 characters
2025-12-23 07:18:44,201 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:18:44,202 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:18:52,312 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:18:52,501 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:18:52,502 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/9e44b8d0-0015-4e14-bfd8-cb63239a7f18.png (size: unknown)
2025-12-23 07:18:52,643 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/fb088326-f652-4afc-9f12-d270d5dc07a5.png
2025-12-23 07:18:52,644 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:18:52,644 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:18:52,647 - app.api.generation - INFO - ğŸ’³ Token 134 used. Remaining uses: 1/2
2025-12-23 07:18:52,651 - app.api.generation - INFO - âœ… Generation 179 completed successfully
2025-12-23 07:19:55,225 - app.services.payment_service - INFO - Payment token created: 135 for user 14, template 1 (2 uses)
2025-12-23 07:19:55,225 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 135
2025-12-23 07:19:55,228 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 135 for user 14
2025-12-23 07:19:55,816 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 135
2025-12-23 07:19:55,818 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 135
2025-12-23 07:19:55,818 - app.api.payment - INFO - âœ… Payment verified: Token 135
2025-12-23 07:20:14,640 - app.api.generation - INFO - ğŸ’³ PAID: Using token 135 - Uses remaining: 2/2
2025-12-23 07:20:14,761 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/1d9c198c-2905-41fa-b1c1-883741070acc.jpeg
2025-12-23 07:20:14,761 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/1d9c198c-2905-41fa-b1c1-883741070acc.jpeg
2025-12-23 07:20:14,761 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/1d9c198c-2905-41fa-b1c1-883741070acc.jpeg
2025-12-23 07:20:14,770 - app.api.generation - INFO - ğŸ”„ Processing generation 180 - Mode: GenerationMode.COUPLE
2025-12-23 07:20:14,790 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:20:14,791 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:20:14,791 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:20:14,791 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:20:15,183 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5981 characters
2025-12-23 07:20:15,247 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:20:15,247 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:20:23,498 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:20:23,684 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:20:23,685 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/cb2f9105-540b-41c6-8741-959782b4db7f.png (size: unknown)
2025-12-23 07:20:23,799 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/517c2c1d-854b-4cfe-afba-de24c4a80652.png
2025-12-23 07:20:23,799 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:20:23,799 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:20:23,803 - app.api.generation - INFO - ğŸ’³ Token 135 used. Remaining uses: 1/2
2025-12-23 07:20:23,807 - app.api.generation - INFO - âœ… Generation 180 completed successfully
2025-12-23 07:21:31,230 - app.api.generation - INFO - ğŸ’³ PAID: Using token 135 - Uses remaining: 1/2
2025-12-23 07:21:31,345 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/86c3ddce-34c0-484a-80dd-f8d88ebe0dd4.jpeg
2025-12-23 07:21:31,345 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/86c3ddce-34c0-484a-80dd-f8d88ebe0dd4.jpeg
2025-12-23 07:21:31,345 - app.api.generation - INFO -    Saved user image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/86c3ddce-34c0-484a-80dd-f8d88ebe0dd4.jpeg
2025-12-23 07:21:31,381 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/2f0b3b15-d425-42d9-9a7b-b129146fa603.jpeg
2025-12-23 07:21:31,381 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/2f0b3b15-d425-42d9-9a7b-b129146fa603.jpeg
2025-12-23 07:21:31,381 - app.api.generation - INFO -    Saved partner image 1: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/2f0b3b15-d425-42d9-9a7b-b129146fa603.jpeg
2025-12-23 07:21:31,381 - app.api.generation - INFO - ğŸ“¸ FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 07:21:31,390 - app.api.generation - INFO - ğŸ”„ Processing generation 181 - Mode: GenerationMode.FLEXIBLE
2025-12-23 07:21:31,426 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:21:31,426 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:21:31,426 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.FLEXIBLE
2025-12-23 07:21:31,426 - app.services.image_generation_service - INFO - Preparing FLEXIBLE mode: 1 user + 1 partner images
2025-12-23 07:21:31,634 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 6258 characters
2025-12-23 07:21:31,698 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:21:31,698 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:21:44,570 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:21:44,779 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:21:44,780 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/6b227f0f-1162-4396-a5e3-1901976462c2.png (size: unknown)
2025-12-23 07:21:44,895 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/526b2801-77c2-47a1-8322-8cddb1c32b5f.png
2025-12-23 07:21:44,895 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:21:44,896 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:21:44,899 - app.api.generation - INFO - ğŸ’³ Token 135 used. Remaining uses: 0/2
2025-12-23 07:21:44,903 - app.api.generation - INFO - âœ… Generation 181 completed successfully
2025-12-23 07:22:10,318 - app.services.payment_service - INFO - Payment token created: 136 for user 14, template 12 (2 uses)
2025-12-23 07:22:10,318 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 136
2025-12-23 07:22:10,321 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 136 for user 14
2025-12-23 07:22:10,642 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 136
2025-12-23 07:22:10,645 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 136
2025-12-23 07:22:10,645 - app.api.payment - INFO - âœ… Payment verified: Token 136
2025-12-23 07:22:45,126 - app.api.generation - INFO - ğŸ’³ PAID: Using token 136 - Uses remaining: 2/2
2025-12-23 07:22:45,301 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/f0527db6-c13b-4cdf-9140-8b69e00a71f0.jpeg
2025-12-23 07:22:45,301 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/f0527db6-c13b-4cdf-9140-8b69e00a71f0.jpeg
2025-12-23 07:22:45,301 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/f0527db6-c13b-4cdf-9140-8b69e00a71f0.jpeg
2025-12-23 07:22:45,311 - app.api.generation - INFO - ğŸ”„ Processing generation 182 - Mode: GenerationMode.COUPLE
2025-12-23 07:22:45,333 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:22:45,333 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:22:45,333 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:22:45,333 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:22:45,733 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5301 characters
2025-12-23 07:22:45,797 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:22:45,797 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:22:54,000 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:22:54,186 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:22:54,187 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/09646c36-1715-4217-b5e2-f40f865445fe.png (size: unknown)
2025-12-23 07:22:54,300 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/3b31c7dd-63df-46be-baad-3c719e9c83ae.png
2025-12-23 07:22:54,301 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:22:54,301 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:22:54,305 - app.api.generation - INFO - ğŸ’³ Token 136 used. Remaining uses: 1/2
2025-12-23 07:22:54,308 - app.api.generation - INFO - âœ… Generation 182 completed successfully
2025-12-23 07:26:10,894 - app.services.auth_service - INFO - New user registered: user00@example.com (ID: 38)
2025-12-23 07:26:19,848 - app.services.auth_service - INFO - User authenticated successfully: user00@example.com
2025-12-23 07:26:19,848 - app.services.auth_service - INFO - Access token created for user: user00@example.com
2025-12-23 07:28:12,160 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 07:28:12,214 - app.services.auth_service - INFO - Google token verified for email: working74123@gmail.com
2025-12-23 07:28:12,221 - app.services.auth_service - INFO - Existing Google user logged in: working74123@gmail.com
2025-12-23 07:28:12,221 - app.services.auth_service - INFO - Access token created for user: working74123@gmail.com
2025-12-23 07:29:03,202 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 07:29:03,257 - app.services.auth_service - INFO - Google token verified for email: prishapatel021@gmail.com
2025-12-23 07:29:03,264 - app.services.auth_service - INFO - Existing Google user logged in: prishapatel021@gmail.com
2025-12-23 07:29:03,264 - app.services.auth_service - INFO - Access token created for user: prishapatel021@gmail.com
2025-12-23 07:37:55,745 - app.services.payment_service - INFO - Payment token created: 137 for user 14, template 5 (2 uses)
2025-12-23 07:37:55,745 - app.services.payment_service - INFO - TEST MODE: Creating test order for token 137
2025-12-23 07:37:55,749 - app.api.payment - INFO - ğŸ’³ Payment order created: Token 137 for user 14
2025-12-23 07:37:56,595 - app.services.payment_service - INFO - TEST MODE: Auto-verifying payment for token 137
2025-12-23 07:37:56,598 - app.services.payment_service - INFO - âœ… TEST MODE: Payment verified for token 137
2025-12-23 07:37:56,598 - app.api.payment - INFO - âœ… Payment verified: Token 137
2025-12-23 07:38:18,622 - app.api.generation - INFO - ğŸ’³ PAID: Using token 137 - Uses remaining: 2/2
2025-12-23 07:38:18,729 - app.services.s3_service - INFO - âœ… Uploaded fileobj to S3: uploads/bd72897a-24c4-4be6-8523-53ffa4d6d108.jpeg
2025-12-23 07:38:18,730 - app.services.storage_service - INFO - âœ… File uploaded to S3: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/bd72897a-24c4-4be6-8523-53ffa4d6d108.jpeg
2025-12-23 07:38:18,730 - app.api.generation - INFO - ğŸ“¸ COUPLE mode: https://wedplanner.s3.us-east-1.amazonaws.com/uploads/bd72897a-24c4-4be6-8523-53ffa4d6d108.jpeg
2025-12-23 07:38:18,740 - app.api.generation - INFO - ğŸ”„ Processing generation 183 - Mode: GenerationMode.COUPLE
2025-12-23 07:38:18,762 - app.api.generation - INFO - ğŸ¨ Starting image generation...
2025-12-23 07:38:18,762 - app.services.image_generation_service - INFO - Image Generation Service initialized with model: gemini-2.5-flash-image
2025-12-23 07:38:18,762 - app.services.image_generation_service - INFO - ğŸš€ Starting image generation - Mode: GenerationMode.COUPLE
2025-12-23 07:38:18,762 - app.services.image_generation_service - INFO - Preparing COUPLE mode generation
2025-12-23 07:38:18,849 - app.services.image_generation_service - INFO - ğŸ“ Prompt length: 5336 characters
2025-12-23 07:38:18,913 - app.services.image_generation_service - INFO - ğŸ“¤ Sending request to Gemini API with 9:16 ratio...
2025-12-23 07:38:18,913 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2025-12-23 07:38:27,518 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image:generateContent "HTTP/1.1 200 OK"
2025-12-23 07:38:27,705 - app.services.image_generation_service - INFO - ğŸ“¥ Gemini API response received
2025-12-23 07:38:27,707 - app.services.image_generation_service - INFO - ğŸ’¾ Image saved locally: generated/e4996a57-43e2-45c3-81c0-22eb3648a8e4.png (size: unknown)
2025-12-23 07:38:27,866 - app.services.s3_service - INFO - âœ… Uploaded to S3: generated/0ffba306-7b0b-4876-a119-88e782328e62.png
2025-12-23 07:38:27,866 - app.services.image_generation_service - INFO - âœ… Image generation completed successfully
2025-12-23 07:38:27,867 - app.api.generation - INFO - âœ… Generation complete!
2025-12-23 07:38:27,870 - app.api.generation - INFO - ğŸ’³ Token 137 used. Remaining uses: 1/2
2025-12-23 07:38:27,874 - app.api.generation - INFO - âœ… Generation 183 completed successfully
2025-12-23 07:39:00,208 - app.services.auth_service - INFO - Attempting Google authentication
2025-12-23 07:39:00,258 - app.services.auth_service - INFO - Google token verified for email: akshatjingar2404@gmail.com
2025-12-23 07:39:00,265 - app.services.auth_service - INFO - Existing Google user logged in: akshatjingar2404@gmail.com
2025-12-23 07:39:00,266 - app.services.auth_service - INFO - Access token created for user: akshatjingar2404@gmail.com
2025-12-27 12:36:02,026 - app.services.auth_service - INFO - User authenticated successfully: user8@example.com
2025-12-27 12:36:02,048 - app.services.auth_service - INFO - Access token created for user: user8@example.com
